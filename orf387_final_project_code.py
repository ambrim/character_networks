# -*- coding: utf-8 -*-
"""ORF387 Final Project code.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1uPXUND7f_OhWbJ7ckIBT0A_22atjgNtk
"""

import scipy as sp
#!pip install networkx==2.0 # uncomment to calculate PageRank
#!pip install networkx==2.8

import networkx as nx
import matplotlib.pyplot as plt
import matplotlib as mpl
# text = open("demonslayer_weighted_test.txt", "r") # insert name of txt file
# data = text.read()
# data_into_list = data.split("\n")
# print(data_into_list)
# text.close()
# G = nx.parse_edgelist(data_into_list)
# list(G.edges(data=True))
DS = nx.Graph()
DS.add_nodes_from(['Tanjiro Kamado', # demonslayers
                   'Zenitsu Agatsuma',
                   'Inosuke Hashibira',
                   'Genya Shinazugawa',
                   'Kanao Tsuyuri',

                   'Tanjuro Kamado', # parents
                   'Kie Kamado', 

                   'Giyu Tomioka', # hashira
                   'Mitsuri Kanroji',
                   'Obanai Iguro',
                   'Sanemi Shinazugawa',
                   'Gyomei Himejima',
                   'Muichiro Tokito',
                   'Shinobu Kocho',

                   'Sakonji Urokodaki', # former hashira
                   'Kyojuro Rengoku',
                   'Tengen Uzui',
                   'Jigoro Kuwajima',
                   'Kanae Kocho',

                   'Muzan Kibutsuji', # demons
                   'Nezuko Kamado',
                   'Tamayo',
                   'Yushiro',
                   
                   'Akaza', # upper ranks
                   'Daki',
                   'Doma',

                   'Kagaya Ubuyashiki' # leader
                   ])
DS.add_edges_from([
 ('Tanjiro Kamado', 'Nezuko Kamado', {'weight': 10, 'color': 'blue'}),
 ('Tanjiro Kamado', 'Giyu Tomioka', {'weight': 9, 'color': 'blue'}),
 ('Tanjiro Kamado', 'Zenitsu Agatsuma', {'weight': 9, 'color': 'blue'}),
 ('Tanjiro Kamado', 'Inosuke Hashibira', {'weight': 9, 'color': 'blue'}),
 ('Tanjiro Kamado', 'Sakonji Urokodaki', {'weight': 8, 'color': 'blue'}),
 ('Tanjiro Kamado', 'Shinobu Kocho', {'weight': 6, 'color': 'blue'}),
 ('Tanjiro Kamado', 'Kanao Tsuyuri', {'weight': 7, 'color': 'blue'}),
 ('Tanjiro Kamado', 'Genya Shinazugawa', {'weight': 6, 'color': 'blue'}),
 ('Tanjiro Kamado', 'Kyojuro Rengoku', {'weight': 6, 'color': 'blue'}),
 ('Tanjiro Kamado', 'Muichiro Tokito', {'weight': 6, 'color': 'blue'}),
 ('Tanjiro Kamado', 'Tamayo', {'weight': 6, 'color': 'blue'}),
 ('Tanjiro Kamado', 'Yushiro', {'weight': 6, 'color': 'blue'}),
 ('Tanjiro Kamado', 'Gyomei Himejima', {'weight': 6, 'color': 'blue'}),
 ('Tanjiro Kamado', 'Muzan Kibutsuji', {'weight': 8, 'color': 'red'}),
 ('Tanjiro Kamado', 'Akaza', {'weight': 6, 'color': 'red'}),
 ('Tanjiro Kamado', 'Daki', {'weight': 6, 'color': 'red'}),
 ('Tanjiro Kamado', 'Tanjuro Kamado', {'weight': 8, 'color': 'blue'}),
 ('Tanjiro Kamado', 'Kie Kamado', {'weight': 8, 'color': 'blue'}),
 ('Nezuko Kamado', 'Kie Kamado', {'weight': 8, 'color': 'blue'}),
 ('Nezuko Kamado', 'Zenitsu Agatsuma', {'weight': 7, 'color': 'blue'}),
 ('Nezuko Kamado', 'Sakonji Urokodaki', {'weight': 8, 'color': 'blue'}),
 ('Nezuko Kamado', 'Giyu Tomioka', {'weight': 6, 'color': 'blue'}),
 ('Nezuko Kamado', 'Yushiro', {'weight': 6, 'color': 'blue'}),
 ('Nezuko Kamado', 'Tamayo', {'weight': 6, 'color': 'blue'}),
 ('Nezuko Kamado', 'Muzan Kibutsuji', {'weight': 8, 'color': 'red'}),
 ('Nezuko Kamado', 'Sanemi Shinazugawa', {'weight': 6, 'color': 'blue'}),
 ('Nezuko Kamado', 'Shinobu Kocho', {'weight': 6, 'color': 'blue'}),
 ('Nezuko Kamado', 'Kanao Tsuyuri', {'weight': 6, 'color': 'blue'}),
 ('Nezuko Kamado', 'Mitsuri Kanroji', {'weight': 6, 'color': 'blue'}),
 ('Nezuko Kamado', 'Tengen Uzui', {'weight': 6, 'color': 'blue'}),
 ('Giyu Tomioka', 'Shinobu Kocho', {'weight': 7, 'color': 'blue'}),
 ('Giyu Tomioka', 'Sanemi Shinazugawa', {'weight': 6, 'color': 'blue'}),
 ('Giyu Tomioka', 'Mitsuri Kanroji', {'weight': 6, 'color': 'blue'}),
 ('Giyu Tomioka', 'Obanai Iguro', {'weight': 6, 'color': 'blue'}),
 ('Giyu Tomioka', 'Gyomei Himejima', {'weight': 6, 'color': 'blue'}),
 ('Giyu Tomioka', 'Muichiro Tokito', {'weight': 6, 'color': 'blue'}),
 ('Giyu Tomioka', 'Sakonji Urokodaki', {'weight': 8, 'color': 'blue'}),
 ('Shinobu Kocho', 'Kanao Tsuyuri', {'weight': 9, 'color': 'blue'}),
 ('Shinobu Kocho', 'Mitsuri Kanroji', {'weight': 7, 'color': 'blue'}),
 ('Shinobu Kocho', 'Obanai Iguro', {'weight': 6, 'color': 'blue'}),
 ('Shinobu Kocho', 'Sanemi Shinazugawa', {'weight': 6, 'color': 'blue'}),
 ('Shinobu Kocho', 'Gyomei Himejima', {'weight': 6, 'color': 'blue'}),
 ('Shinobu Kocho', 'Muichiro Tokito', {'weight': 6, 'color': 'blue'}),
 ('Shinobu Kocho', 'Tamayo', {'weight': 7, 'color': 'blue'}),
 ('Mitsuri Kanroji', 'Obanai Iguro', {'weight': 6, 'color': 'blue'}),
 ('Mitsuri Kanroji', 'Sanemi Shinazugawa', {'weight': 6, 'color': 'blue'}),
 ('Mitsuri Kanroji', 'Gyomei Himejima', {'weight': 6, 'color': 'blue'}),
 ('Mitsuri Kanroji', 'Muichiro Tokito', {'weight': 6, 'color': 'blue'}),
 ('Obanai Iguro', 'Sanemi Shinazugawa', {'weight': 6, 'color': 'blue'}),
 ('Obanai Iguro', 'Gyomei Himejima', {'weight': 6, 'color': 'blue'}),
 ('Obanai Iguro', 'Muichiro Tokito', {'weight': 6, 'color': 'blue'}),
 ('Sanemi Shinazugawa', 'Gyomei Himejima', {'weight': 6, 'color': 'blue'}),
 ('Sanemi Shinazugawa', 'Muichiro Tokito', {'weight': 6, 'color': 'blue'}),
 ('Sanemi Shinazugawa', 'Genya Shinazugawa', {'weight': 9, 'color': 'blue'}),
 ('Sanemi Shinazugawa', 'Kagaya Ubuyashiki', {'weight': 8, 'color': 'blue'}),
 ('Gyomei Himejima', 'Muichiro Tokito', {'weight': 6, 'color': 'blue'}),
 ('Gyomei Himejima', 'Genya Shinazugawa', {'weight': 8, 'color': 'blue'}),
 ('Gyomei Himejima', 'Kagaya Ubuyashiki', {'weight': 8, 'color': 'blue'}),
 ('Zenitsu Agatsuma', 'Jigoro Kuwajima', {'weight': 8, 'color': 'blue'}),
 ('Zenitsu Agatsuma', 'Inosuke Hashibira', {'weight': 8, 'color': 'blue'}),
 ('Zenitsu Agatsuma', 'Shinobu Kocho', {'weight': 6, 'color': 'blue'}),
 ('Inosuke Hashibira', 'Shinobu Kocho', {'weight': 6, 'color': 'blue'}),
 ('Inosuke Hashibira', 'Kanao Tsuyuri', {'weight': 6, 'color': 'blue'}),
 ('Inosuke Hashibira', 'Kyojuro Rengoku', {'weight': 8, 'color': 'blue'}),
 ('Inosuke Hashibira', 'Gyomei Himejima', {'weight': 6, 'color': 'blue'}),
 ('Doma', 'Muzan Kibutsuji', {'weight': 7, 'color': 'blue'}),
 ('Doma', 'Akaza', {'weight': 8, 'color': 'red'}),
 ('Doma', 'Daki', {'weight': 7, 'color': 'blue'}),
 ('Doma', 'Kanae Kocho', {'weight': 8, 'color': 'red'}),
 ('Doma', 'Inosuke Hashibira', {'weight': 8, 'color': 'red'}),
 ('Doma', 'Shinobu Kocho', {'weight': 8, 'color': 'red'}),
 ('Doma', 'Kanao Tsuyuri', {'weight': 8, 'color': 'red'}),
 ('Kanae Kocho', 'Shinobu Kocho', {'weight': 9, 'color': 'blue'}),
 ('Kanae Kocho', 'Kanao Tsuyuri', {'weight': 8, 'color': 'blue'}),
 ('Muzan Kibutsuji', 'Tamayo', {'weight': 6, 'color': 'blue'}),
 ('Muzan Kibutsuji', 'Kagaya Ubuyashiki', {'weight': 8, 'color': 'red'}),
 ('Muzan Kibutsuji', 'Yushiro', {'weight': 7, 'color': 'red'}),
 ('Muzan Kibutsuji', 'Akaza', {'weight': 6, 'color': 'blue'}),
 ('Muzan Kibutsuji', 'Daki', {'weight': 6, 'color': 'blue'})])

plt.figure(3,figsize=(11,10)) 
pos = nx.circular_layout(DS)
label_options = {"facecolor": 'white',"alpha": 0.9}
nx.draw(DS, pos,node_size=60,font_size=11, with_labels=True, font_weight='bold', bbox = label_options) 
plt.show()

edge_widths = [2**e[2]['weight']/64 for e in DS.edges(data=True)] # adjustable
edge_alphas = [e[2]['weight'] for e in DS.edges(data=True)]
edge_colors = [e[2]['color'] for e in DS.edges(data=True)]

# average negativity
avg_red_weight = 0;
num_red = 0;
for e in DS.edges(data=True):
  if e[2]['color'] == "red": 
    avg_red_weight += e[2]['weight'] 
    num_red += 1;
avg_red_weight /= num_red
print(avg_red_weight)

# percent negative
print(num_red / DS.number_of_edges())

import math as math
fig, ax = plt.subplots(figsize=(11, 10))
#### draw graph ####
#pos = nx.circular_layout(DS)
pos = nx.kamada_kawai_layout(DS)

# compute betweeness centrality
bw_centrality = nx.betweenness_centrality(DS, k=10, endpoints=True)
# compute degree centrality
deg_centrality = nx.degree_centrality(DS)
# compute closeness centrality
close_centrality = nx.closeness_centrality(DS)

# compute community structure
lpc = nx.community.label_propagation_communities(DS)
community_index = {n: i for i, com in enumerate(lpc) for n in com}

node_color = [community_index[n] for n in DS]

node_size = [v * 10000 for v in bw_centrality.values()]
#node_size = [v**2 * 10000 for v in close_centrality.values()] #too similar
#node_size = [v * 12000 for v in deg_centrality.values()]
#pr = nx.pagerank(DS) # uncomment to calculate PageRank
#ode_size = [v * 36000 for v in pr.values()]

cmap = plt.cm.coolwarm
label_options = {"ec": "k", "fc": "white", "alpha": 0.9}
female = ['Shinobu Kocho', 'Kanao Tsuyuri', 'Kanae Kocho', 'Daki', 'Tamayo', 'Nezuko Kamado'] # change list of female characters
color_map_fm = ['pink' if node in female else 'lightgreen' for node in DS]

nx.draw_networkx(
    DS,
    pos=pos,
    with_labels=True,
    #node_color="indigo",
    node_color=color_map_fm,
    node_size=node_size,
    font_color="black",
    edge_color=edge_colors,
    #edge_color=edge_alphas,
    #edge_color = 'white',
    width=edge_widths,
    edge_cmap=cmap,
    vmin=0,
    vmax=10,
    bbox = label_options
)

# Title/legend
font = {"color": "k", "fontweight": "bold", "fontsize": 15}
# fig, ax = plt.subplots(figsize=(16, 10))
# ax.set_title("Demonslayer Character Network", font)
# Change font color for legend
font["color"] = "black"

# ax.text(
#     0.80,
#     0.10,
#     "node color = community structure",
#     horizontalalignment="center",
#     transform=ax.transAxes,
#     fontdict=font,
# )
# ax.text(
#     0.10,
#     0.0,
#     "node color = male or female character",
#     horizontalalignment="left",
#     transform=ax.transAxes,
#     fontdict=font,
# )
# ax.text(
#     0.10,
#     0.05,
#     "node size = betweeness centrality",
#     horizontalalignment="left",
#     transform=ax.transAxes,
#     fontdict=font,
# )
# ax.text(
#     0.10,
#     0.10,
#     "edge color = positive or negative relationship",
#     horizontalalignment="left",
#     transform=ax.transAxes,
#     fontdict=font,
# )
# ax.text(
#     0.10,
#     0.15,
#     "edge width = weight of relationship",
#     horizontalalignment="left",
#     transform=ax.transAxes,
#     fontdict=font,
# )

# Resize figure for label readibility
ax.margins(0.1, 0.05)
fig.tight_layout()
# Add colorbar
# sm = plt.cm.ScalarMappable(cmap=cmap, norm=plt.Normalize(vmin = 0, vmax=10))
# sm._A = []
# ax = plt.gca()
# ax.set_axis_off()
# plt.colorbar(sm, ax=ax)
plt.axis("off")
# Create the figure
textstr = '\n'.join((
    r'Node Size = proportional to node betweenness centrality',
    r'Node Color = green if male, pink if female',
    r'Edge Width = proportional to squared edge weight',
    r'Edge Color = blue if positive, red if negative'))
# these are matplotlib.patch.Patch properties
props = dict(boxstyle='round', facecolor='white', alpha=1.)

# place a text box in upper left in axes coords
ax.text(0.75, 0.05, textstr, transform=ax.transAxes, fontsize=12, bbox=props)
plt.show()

# compute degree centrality
deg_centrality = nx.degree_centrality(DS)
# compute closeness centrality
close_centrality = nx.closeness_centrality(DS)
# compute eigenvector centrality
eigen_centrality = nx.eigenvector_centrality

# Select a list of influential nodes in a graph using VoteRank algorithm
vr = nx.voterank(DS)
#pr = nx.pagerank(DS)
#print(pr)
print(vr)
print(bw_centrality)
print(deg_centrality)

# number of cliques & number of cliques with protagonist
c = list(nx.find_cliques(DS))
print(c)
# s = sum(1 for cliq in c)
sum = 0
s = 0
for cliq in c:
  if len(cliq) > 2: 
    s += 1 
    if 'Tanjiro Kamado' in cliq: sum += 1
print(sum, s)

# percent female
print(DS.number_of_nodes())
print(len(female) / DS.number_of_nodes())

import networkx as nx
import matplotlib.pyplot as plt
import matplotlib as mpl
# text = open("maidsama_weighted.txt", "r")
# data = text.read()
# data_into_list = data.split("\n")
# print(data_into_list)
# text.close()
# G = nx.parse_edgelist(data_into_list)
# list(G.edges(data=True))
MS = nx.Graph();
MS.add_nodes_from(['Misaki Ayuzawa', # ayuzawa residence
                   'Suzuna Ayuzawa',
                   'Minako Ayuzawa',

                   'Takumi Usui', # love interests
                   'Hinata Shintani',

                   'Sotaro Kano', # school council
                   'Shoichiro Yukimara',
                   'Yumeyuma',
                   'Takashi Hagimoto',
                   'Kenji Sawa',

                   'Naoya Shirokawa', # trio
                   'Ryunosuke Kurosaki',
                   'Ikuto Sarashina',

                   'Sakura Hanazono', # besties
                   'Shizuko Kaga',

                   'Tora Igarashi', # rival high
                   'Kanade Maki',
                   'Hirofumi Koganei',

                   'Satsuki Hyodo', # maid latte
                   'Aoi Hyodo',
                   'Honoka',
                   'Erika',
                   'Subaru',
                   'Sayu',

                   'Kuga Sakurai', # band

])
MS.add_edges_from([('Misaki Ayuzawa', 'Minako Ayuzawa', {'weight': 9, 'color': 'blue'}),
 ('Misaki Ayuzawa', 'Suzuna Ayuzawa', {'weight': 9, 'color': 'blue'}),
 ('Misaki Ayuzawa', 'Takumi Usui', {'weight': 10, 'color': 'blue'}),
 ('Misaki Ayuzawa', 'Hinata Shintani', {'weight': 9, 'color': 'blue'}),
 ('Misaki Ayuzawa', 'Sotaro Kano', {'weight': 7, 'color': 'blue'}),
 ('Misaki Ayuzawa', 'Shoichiro Yukimara', {'weight': 7, 'color': 'blue'}),
 ('Misaki Ayuzawa', 'Naoya Shirokawa', {'weight': 7, 'color': 'blue'}),
 ('Misaki Ayuzawa', 'Ryunosuke Kurosaki', {'weight': 7, 'color': 'blue'}),
 ('Misaki Ayuzawa', 'Ikuto Sarashina', {'weight': 7, 'color': 'blue'}),
 ('Misaki Ayuzawa', 'Sakura Hanazono', {'weight': 8, 'color': 'blue'}),
 ('Misaki Ayuzawa', 'Shizuko Kaga', {'weight': 8, 'color': 'blue'}),
 ('Misaki Ayuzawa', 'Tora Igarashi', {'weight': 7, 'color': 'red'}),
 ('Misaki Ayuzawa', 'Kanade Maki', {'weight': 6, 'color': 'red'}),
 ('Misaki Ayuzawa', 'Hirofumi Koganei', {'weight': 6, 'color': 'red'}),
 ('Misaki Ayuzawa', 'Satsuki Hyodo', {'weight': 6, 'color': 'blue'}),
 ('Misaki Ayuzawa', 'Aoi Hyodo', {'weight': 6, 'color': 'blue'}),
 ('Misaki Ayuzawa', 'Honoka', {'weight': 6, 'color': 'blue'}),
 ('Misaki Ayuzawa', 'Erika', {'weight': 6, 'color': 'blue'}),
 ('Misaki Ayuzawa', 'Subaru', {'weight': 6, 'color': 'blue'}),
 ('Misaki Ayuzawa', 'Sayu', {'weight': 6, 'color': 'blue'}),
 ('Misaki Ayuzawa', 'Yumeyuma', {'weight': 6, 'color': 'blue'}),
 ('Misaki Ayuzawa', 'Takashi Hagimoto', {'weight': 6, 'color': 'blue'}),
 ('Misaki Ayuzawa', 'Kenji Sawa', {'weight': 6, 'color': 'blue'}),
 ('Misaki Ayuzawa', 'Kuga Sakurai', {'weight': 6, 'color': 'red'}),
 ('Minako Ayuzawa', 'Suzuna Ayuzawa', {'weight': 9, 'color': 'blue'}),
 ('Takumi Usui', 'Hinata Shintani', {'weight': 8, 'color': 'red'}),
 ('Takumi Usui', 'Sotaro Kano', {'weight': 6, 'color': 'blue'}),
 ('Takumi Usui', 'Shoichiro Yukimara', {'weight': 6, 'color': 'blue'}),
 ('Takumi Usui', 'Naoya Shirokawa', {'weight': 6, 'color': 'red'}),
 ('Takumi Usui', 'Ryunosuke Kurosaki', {'weight': 6, 'color': 'red'}),
 ('Takumi Usui', 'Ikuto Sarashina', {'weight': 6, 'color': 'red'}),
 ('Takumi Usui', 'Sakura Hanazono', {'weight': 6, 'color': 'blue'}),
 ('Takumi Usui', 'Shizuko Kaga', {'weight': 6, 'color': 'blue'}),
 ('Takumi Usui', 'Tora Igarashi', {'weight': 7, 'color': 'red'}),
 ('Takumi Usui', 'Kanade Maki', {'weight': 6, 'color': 'red'}),
 ('Takumi Usui', 'Hirofumi Koganei', {'weight': 6, 'color': 'red'}),
 ('Takumi Usui', 'Satsuki', {'weight': 6, 'color': 'blue'}),
 ('Takumi Usui', 'Aoi Hyodo', {'weight': 6, 'color': 'blue'}),
 ('Takumi Usui', 'Kuga Sakurai', {'weight': 6, 'color': 'red'}),
 ('Hinata Shintani', 'Sotaro Kano', {'weight': 6, 'color': 'blue'}),
 ('Hinata Shintani', 'Shoichiro Yukimara', {'weight': 6, 'color': 'blue'}),
 ('Sotaro Kano', 'Shoichiro Yukimara', {'weight': 8, 'color': 'blue'}),
 ('Sotaro Kano', 'Takashi Hagimoto', {'weight': 6, 'color': 'blue'}),
 ('Sotaro Kano', 'Kenji Sawa', {'weight': 6, 'color': 'blue'}),
 ('Shoichiro Yukimara', 'Takashi Hagimoto', {'weight': 6, 'color': 'blue'}),
 ('Shoichiro Yukimara', 'Kenji Sawa', {'weight': 6, 'color': 'blue'}),
 ('Naoya Shirokawa', 'Ryunosuke Kurosaki', {'weight': 8, 'color': 'blue'}),
 ('Naoya Shirokawa', 'Ikuto Sarashina', {'weight': 8, 'color': 'blue'}),
 ('Ryunosuke Kurosaki', 'Ikuto Sarashina', {'weight': 8, 'color': 'blue'}),
 ('Sakura Hanazono', 'Shizuko Kaga', {'weight': 8, 'color': 'blue'}),
 ('Sakura Hanazono', 'Kuga Sakurai', {'weight': 7, 'color': 'red'}),
 ('Tora Igarashi', 'Kanade Maki', {'weight': 8, 'color': 'blue'}),
 ('Tora Igarashi', 'Hirofumi Koganei', {'weight': 8, 'color': 'blue'}),
 ('Satsuki Hyodo', 'Aoi Hyodo', {'weight': 7, 'color': 'blue'}),
 ('Satsuki Hyodo', 'Honoka', {'weight': 7, 'color': 'blue'}),
 ('Satsuki Hyodo', 'Erika', {'weight': 7, 'color': 'blue'}),
 ('Satsuki Hyodo', 'Subaru', {'weight': 7, 'color': 'blue'}),
 ('Satsuki Hyodo', 'Sayu', {'weight': 7, 'color': 'blue'}),
 ('Honoka', 'Erika', {'weight': 6, 'color': 'blue'}),
 ('Honoka', 'Subaru', {'weight': 6, 'color': 'blue'}),
 ('Honoka', 'Sayu', {'weight': 6, 'color': 'blue'}),
 ('Erika', 'Subaru', {'weight': 6, 'color': 'blue'}),
 ('Erika', 'Sayu', {'weight': 6, 'color': 'blue'}),
 ('Subaru', 'Sayu', {'weight': 6, 'color': 'blue'})
 
 
 ])

# font = {"fontweight": "bold", "fontsize": 15}
# plt.figure(3,figsize=(11,10)) 
# plt.title('Maid Sama!', font)
# pos = nx.circular_layout(MS)
# label_options = {"facecolor": 'white',"alpha": 0.9}
# nx.draw(MS, pos,node_size=60,font_size=11, with_labels=True, font_weight='bold', bbox = label_options) 
# fig, axs = plt.subplots(1, 2)
# plt.tight_layout()
# plt.show()

plt.figure(3,figsize=(11,10)) 
pos = nx.circular_layout(MS)
label_options = {"facecolor": 'white',"alpha": 0.9}
nx.draw(MS, pos,node_size=60,font_size=11, with_labels=True, font_weight='bold', bbox = label_options) 
plt.show()

import math as math
edge_widths = [2**e[2]['weight']/64 for e in MS.edges(data=True)]
edge_alphas = [e[2]['weight'] for e in MS.edges(data=True)]
edge_colors = [e[2]['color'] for e in MS.edges(data=True)]

# average negativity
avg_red_weight = 0;
num_red = 0;
for e in MS.edges(data=True):
  if e[2]['color'] == "red": 
    avg_red_weight += e[2]['weight'] 
    num_red += 1;
avg_red_weight /= num_red
print(avg_red_weight)

# percent negative
print(num_red / MS.number_of_edges())

#### draw graph ####
fig, ax = plt.subplots(figsize=(11, 10))
#pos = nx.spring_layout(MS, k=0.15, seed=4572320)
pos = nx.kamada_kawai_layout(MS)
#pos = nx.circular_layout(MS)

# compute centrality
centrality = nx.betweenness_centrality(MS, k=10, endpoints=True)

# compute community structure
lpc = nx.community.label_propagation_communities(MS)
community_index = {n: i for i, com in enumerate(lpc) for n in com}

node_color = [community_index[n] for n in MS]
node_size = [v * 10000 for v in centrality.values()]
cmap = plt.cm.coolwarm
label_options = {"ec": "k", "fc": "white", "alpha": 0.9}
female = ['Misaki Ayuzawa', 'Minako Ayuzawa', 'Suzuna Ayuzawa', 'Sakura Hanazono', 
          'Shizuko Kaga', 'Satsuki Hyodo', 'Aoi Hyodo',
          'Honoka', 'Erika', 'Subaru', 'Sayu'] # change list of female characters
color_map_fm = ['pink' if node in female else 'lightgreen' for node in MS]

nx.draw_networkx(
    MS,
    pos=pos,
    with_labels=True,
    #node_color="indigo",
    node_color=color_map_fm,
    node_size=node_size,
    font_color="black",
    #edge_color=edge_alphas,
    edge_color=edge_colors,
    width=edge_widths,
    edge_cmap=cmap,
    vmin=0,
    vmax=10,
    bbox = label_options
)

# Title/legend
font = {"color": "k", "fontweight": "bold", "fontsize": 15}
# ax.set_title("Maid Sama!", font)
# Change font color for legend
font["color"] = "black"

# ax.text(
#     0.10,
#     0.0,
#     "node color = male or female character",
#     horizontalalignment="left",
#     transform=ax.transAxes,
#     fontdict=font,
# )
# ax.text(
#     0.10,
#     0.05,
#     "node size = betweeness centrality",
#     horizontalalignment="left",
#     transform=ax.transAxes,
#     fontdict=font,
# )
# ax.text(
#     0.10,
#     0.10,
#     "edge color = positive or negative relationship",
#     horizontalalignment="left",
#     transform=ax.transAxes,
#     fontdict=font,
# )
# ax.text(
#     0.10,
#     0.15,
#     "edge width = weight of relationship",
#     horizontalalignment="left",
#     transform=ax.transAxes,
#     fontdict=font,
# )

# Resize figure for label readibility
# ax.margins(0.1, 0.05)
fig.tight_layout()
# # Add colorbar
# sm = plt.cm.ScalarMappable(cmap=cmap, norm=plt.Normalize(vmin = 0, vmax=10))
# sm._A = []
# ax = plt.gca()
# ax.set_axis_off()
# plt.colorbar(sm, ax=ax)
# Create the figure
textstr = '\n'.join((
    r'Node Size = proportional to node betweenness centrality',
    r'Node Color = green if male, pink if female',
    r'Edge Width = proportional to squared edge weight',
    r'Edge Color = blue if positive, red if negative'))
# these are matplotlib.patch.Patch properties
props = dict(boxstyle='round', facecolor='white', alpha=1.)

# place a text box in upper left in axes coords
ax.text(0.75, 0.05, textstr, transform=ax.transAxes, fontsize=12, bbox=props)
plt.axis("off")
plt.show()

# compute betweenness centrality
bw_centrality = nx.betweenness_centrality(MS)
# compute degree centrality
deg_centrality = nx.degree_centrality(MS)
# compute closeness centrality
close_centrality = nx.closeness_centrality(MS)
# compute eigenvector centrality
eigen_centrality = nx.eigenvector_centrality(MS)

# Select a list of influential nodes in a graph using VoteRank algorithm
vrMS = nx.voterank(MS)
#prMS = nx.pagerank(MS)
#print(prMS)
print(vrMS)
print(bw_centrality)
print(deg_centrality)

# number of cliques & number of cliques with protagonist
c = list(nx.find_cliques(MS))
print(c)
# s = sum(1 for cliq in c)
sum = 0
s = 0
for cliq in c:
  if len(cliq) > 2: 
    s += 1 
    if 'Misaki Ayuzawa' in cliq: sum += 1
print(sum, s)

# percent female
print(MS.number_of_nodes())
print(len(female) / MS.number_of_nodes())

# from sys import stderr
# import pandas as pd
# pd.options.mode.chained_assignment = None  # default='warn'

# df = pd.read_csv("data2.csv")

# X = df[['Type (0: shonen, 1: shojo)', 'Cliques', 'Female percentage', 'Negativity (sum of weights of negative edges)', 'BCP (betweenness centrality of protagonist)']]
# X1 = X.copy(deep=True)
# for col in X:
#   X[col] = (X[col] - X[col].mean())/X[col].std()

# print(X)

# y = df['Popularity']

# y = (y - y.mean())/y.std()
# print(y)

# from sklearn import linear_model
# regr = linear_model.LinearRegression()
# regr.fit(X, y)
# print(regr.coef_)
# regr.fit(X1, y)
# print(regr.coef_)

import networkx as nx
import matplotlib.pyplot as plt
import math as math

FA = nx.Graph()
# Add nodes
FA.add_node("Edward Elric")
FA.add_node("Alphonse Elric")
FA.add_node("Trisha Elric")
FA.add_node("Izumi Curtis")
FA.add_node("Roy Mustang")
FA.add_node("Winry Rockbell")
FA.add_node("Maes Hughes")
FA.add_node("Scar")
FA.add_node("Lust")
FA.add_node("Gluttony")
FA.add_node("Envy")
FA.add_node("Wrath")
FA.add_node("Greed")
FA.add_node("Van Hohenheim")
FA.add_node("Olivier Armstrong")
FA.add_node("Riza Hawkeye")
FA.add_node("Alex Louis Armstrong")
FA.add_node("Selim Bradley")
FA.add_node("King Bradley")
FA.add_node("Dante")
FA.add_node("Hohenheim of Light")
FA.add_node("Mei Chang")
FA.add_node("Lan Fan")
FA.add_node("Tim Marcoh")
FA.add_node("Doctor Marcoh")
FA.add_node("Father")
FA.add_node("Ling Yao")
FA.add_node("Yoki")
FA.add_node("Kimblee")
FA.add_node("Barry the Chopper")
FA.add_node("Isaac McDougal")

# Add edges
# Positive relationships
FA.add_edges_from([('Edward Elric', 'Alphonse Elric', {'weight': 10, 'color': 'blue'}),
("Edward Elric", "Izumi Curtis",{'weight': 8, 'color': 'blue'}),
("Edward Elric", "Trisha Elric",{'weight': 9, 'color': 'blue'}),
("Edward Elric", "Roy Mustang",{'weight': 8, 'color': 'blue'}),
("Edward Elric", "Winry Rockbell",{'weight': 9, 'color': 'blue'}),
("Edward Elric", "Alex Louis Armstrong",{'weight': 8, 'color': 'blue'}),
("Edward Elric", "Greed",{'weight': 8, 'color': 'blue'}),
("Edward Elric", "Ling Yao",{'weight': 7, 'color': 'blue'}),
("Edward Elric", "Isaac McDougal",{'weight': 6, 'color': 'blue'}),
("Alphonse Elric", "Winry Rockbell",{'weight': 8, 'color': 'blue'}),
("Alphonse Elric", "Mei Chang",{'weight': 8, 'color': 'blue'}),
("Alphonse Elric", "Van Hohenheim",{'weight': 9, 'color': 'blue'}),
("Alphonse Elric", "Izumi Curtis",{'weight': 7, 'color': 'blue'}),
("Alphonse Elric", "Roy Mustang",{'weight': 7, 'color': 'blue'}),
("Izumi Curtis", "Roy Mustang",{'weight': 8, 'color': 'blue'}),
("Scar", "Mei Chang",{'weight': 7, 'color': 'blue'}),
("Maes Hughes", "Roy Mustang",{'weight': 8, 'color': 'blue'}),
("Maes Hughes", "Riza Hawkeye",{'weight': 8, 'color': 'blue'}),
("Maes Hughes", "Alex Louis Armstrong",{'weight': 8, 'color': 'blue'}),
("Olivier Armstrong", "Roy Mustang",{'weight': 8, 'color': 'blue'}),
("Olivier Armstrong", "Riza Hawkeye",{'weight': 8, 'color': 'blue'}),
("Olivier Armstrong", "Alex Louis Armstrong",{'weight': 8, 'color': 'blue'}),
("Riza Hawkeye", "Roy Mustang",{'weight': 9, 'color': 'blue'}),
("Riza Hawkeye", "Alex Louis Armstrong",{'weight': 8, 'color': 'blue'}),
("Alex Louis Armstrong", "Roy Mustang",{'weight': 8, 'color': 'blue'}),
("Selim Bradley", "King Bradley",{'weight': 8, 'color': 'blue'}),
("Hohenheim of Light", "Van Hohenheim",{'weight': 8, 'color': 'blue'}),
("Ling Yao", "Lan Fan",{'weight': 9, 'color': 'blue'}),
("Doctor Marcoh", "Tim Marcoh",{'weight': 8, 'color': 'blue'}),

# Negative relationships
("Lan Fan", "Mei Chang",{'weight': 7, 'color': 'red'}),
("Edward Elric", "Van Hohenheim",{'weight': 8, 'color': 'red'}),
("Edward Elric", "Scar",{'weight': 8, 'color': 'red'}),
("Edward Elric", "Greed",{'weight': 8, 'color': 'red'}),
("Winry Rockbell", "Scar",{'weight': 8, 'color': 'red'}),
("Ling Yao", "Greed",{'weight': 8, 'color': 'red'}),
("Doctor Marcoh", "Scar",{'weight': 8, 'color': 'red'}),
("Lust", "Envy",{'weight': 8, 'color': 'red'}),
("Lust", "Gluttony",{'weight': 8, 'color': 'red'}),
("Wrath", "Selim Bradley",{'weight': 8, 'color': 'red'}),
("Wrath", "King Bradley",{'weight': 9, 'color': 'red'}),
("Wrath", "Ling Yao",{'weight': 8, 'color': 'red'}),
("Martel", "Ling Yao",{'weight': 6, 'color': 'red'}),
("Dante", "Hohenheim of Light",{'weight': 8, 'color': 'red'}),
("Dante", "Van Hohenheim",{'weight': 8, 'color': 'red'}),
("Father", "Ling Yao",{'weight': 8, 'color': 'red'}),
("Father", "Lust",{'weight': 8, 'color': 'red'}),
("Father", "Gluttony",{'weight': 8, 'color': 'red'}),
("Father", "Envy",{'weight': 8, 'color': 'red'}),
("Father", "Wrath",{'weight': 8, 'color': 'red'}),
("Father", "Greed",{'weight': 8, 'color': 'red'}),
("Yoki", "Kimblee",{'weight': 8, 'color': 'red'}),
("Scar", "Yoki",{'weight': 7, 'color': 'red'}),
("Scar", "Kimblee",{'weight': 8, 'color': 'red'}),
("Barry the Chopper", "Isaac McDougal",{'weight': 6, 'color': 'red'})])

plt.figure(3,figsize=(11,10)) 
pos = nx.circular_layout(FA)
label_options = {"facecolor": 'white',"alpha": 0.9}
nx.draw(FA, pos,node_size=60,font_size=11, with_labels=True, font_weight='bold', bbox = label_options) 
plt.show()

import math as math
edge_widths = [2**e[2]['weight']/64 for e in FA.edges(data=True)]
edge_alphas = [e[2]['weight'] for e in FA.edges(data=True)]
edge_colors = [e[2]['color'] for e in FA.edges(data=True)]

# average negativity
avg_red_weight = 0;
num_red = 0;
for e in FA.edges(data=True):
  if e[2]['color'] == "red": 
    avg_red_weight += e[2]['weight'] 
    num_red += 1;
avg_red_weight /= num_red
print(avg_red_weight)

# percent negative
print(num_red / FA.number_of_edges())

#### draw graph ####
fig, ax = plt.subplots(figsize=(11, 10))
#pos = nx.spring_layout(FA, k=0.15, seed=4572320)
pos = nx.kamada_kawai_layout(FA)
#pos = nx.circular_layout(FA)

# compute centrality
centrality = nx.betweenness_centrality(FA, k=10, endpoints=True)

# compute community structure
lpc = nx.community.label_propagation_communities(FA)
community_index = {n: i for i, com in enumerate(lpc) for n in com}

node_color = [community_index[n] for n in FA]
node_size = [v * 10000 for v in centrality.values()]
cmap = plt.cm.coolwarm
label_options = {"ec": "k", "fc": "white", "alpha": 0.9}
female = ['Winry Rockbell', 'Riza Hawkeye', 'Trisha Elric', 'Izumi Curtis', 'Lust',
          'Mei Chang,' 'Lan Fan', ] # change list of female characters
color_map_fm = ['pink' if node in female else 'lightgreen' for node in FA]

nx.draw_networkx(
    FA,
    pos=pos,
    with_labels=True,
    #node_color="indigo",
    node_color=color_map_fm,
    node_size=node_size,
    font_color="black",
    #edge_color=edge_alphas,
    edge_color=edge_colors,
    width=edge_widths,
    edge_cmap=cmap,
    vmin=0,
    vmax=10,
    bbox = label_options
)

# Title/legend
font = {"color": "k", "fontweight": "bold", "fontsize": 15}
# ax.set_title("Fullmetal Alchemist", font)
# Change font color for legend
font["color"] = "black"

# ax.text(
#     0.10,
#     0.0,
#     "node color = male or female character",
#     horizontalalignment="left",
#     transform=ax.transAxes,
#     fontdict=font,
# )
# ax.text(
#     0.10,
#     0.05,
#     "node size = betweeness centrality",
#     horizontalalignment="left",
#     transform=ax.transAxes,
#     fontdict=font,
# )
# ax.text(
#     0.10,
#     0.10,
#     "edge color = positive or negative relationship",
#     horizontalalignment="left",
#     transform=ax.transAxes,
#     fontdict=font,
# )
# ax.text(
#     0.10,
#     0.15,
#     "edge width = weight of relationship",
#     horizontalalignment="left",
#     transform=ax.transAxes,
#     fontdict=font,
# )

# Resize figure for label readibility
# ax.margins(0.1, 0.05)
fig.tight_layout()
# # Add colorbar
# sm = plt.cm.ScalarMappable(cmap=cmap, norm=plt.Normalize(vmin = 0, vmax=10))
# sm._A = []
# ax = plt.gca()
# ax.set_axis_off()
# plt.colorbar(sm, ax=ax)
# Create the figure
textstr = '\n'.join((
    r'Node Size = proportional to node betweenness centrality',
    r'Node Color = green if male, pink if female',
    r'Edge Width = proportional to squared edge weight',
    r'Edge Color = blue if positive, red if negative'))
# these are matplotlib.patch.Patch properties
props = dict(boxstyle='round', facecolor='white', alpha=1.)

# place a text box in upper left in axes coords
ax.text(0.05, 0.05, textstr, transform=ax.transAxes, fontsize=12, bbox=props)
plt.axis("off")
plt.show()

# compute betweenness centrality
bw_centrality = nx.betweenness_centrality(FA)
# compute degree centrality
deg_centrality = nx.degree_centrality(FA)
# compute closeness centrality
close_centrality = nx.closeness_centrality(FA)
# compute eigenvector centrality
eigen_centrality = nx.eigenvector_centrality(FA)

# Select a list of influential nodes in a graph using VoteRank algorithm
vrFA = nx.voterank(FA)
#prFA = nx.pagerank(FA)
#print(prFA)
print(vrFA)
print(bw_centrality)
print(deg_centrality)

# number of cliques & number of cliques with protagonist
c = list(nx.find_cliques(FA))

# s = sum(1 for cliq in c)
sum = 0
s = 0
for cliq in c:
  if len(cliq) > 2: 
    s += 1 
    if 'Edward Elric' in cliq: sum += 1
print(sum, s)

# percent female
print(FA.number_of_nodes())
print(len(female) / FA.number_of_nodes())

import networkx as nx
import matplotlib.pyplot as plt
import math as math

KG = nx.Graph()
KG.add_nodes_from(['Ai Hayasaka',
                  'Kaguya Shinomiya', # Pro 
                  'Miyuki Shirogane', # Deuter
                  'Chika Fujiwara',
                  'Miko Iino',
                  'Yu Ishigami',
                   
                  'Nao Hayasaka', # (mom)
                  'Mirin Hinokuchi',
                  'Subaru Suruga',
                  'Daichi Fujiwara', # (dad)

                  'Unyo Shinomiya', # (bro)
                  'Oko Shinomiya',
                  'Ganan Shinomiya',
                  'Kei Shirogane', # (sis)
                  'Go Kazamatsuri',
                  'Saburo Toyosaki',
                  'Mikado Shijo',

                  'Erika Kose',
                  'Karen Kino',
                  'Kobachi Osaragi',
                  'Maki Shijo',
                  'Nagisa Kashiwagi',
                  'Rei Onodera',
                  'Tsubame Koyasu',
                  'Tsubasa Tanuma'])

KG.add_edges_from([('Ai Hayasaka', 'Miyuki Shirogane', {'weight': 8, 'color': 'blue'}),
('Ai Hayasaka', 'Nao Hayasaka', {'weight': 9, 'color': 'blue'}),
('Ai Hayasaka', 'Kaguya Shinomiya', {'weight': 9, 'color': 'blue'}),
('Ai Hayasaka', 'Chika Fujiwara', {'weight': 8, 'color': 'blue'}),
('Ai Hayasaka', 'Yu Ishigami', {'weight': 8, 'color': 'blue'}),
('Ai Hayasaka', 'Mirin Hinokuchi', {'weight': 7, 'color': 'blue'}),
('Ai Hayasaka', 'Subaru Suruga', {'weight': 7, 'color': 'blue'}),
('Ai Hayasaka', 'Karen Kino', {'weight': 6, 'color': 'blue'}),
('Ai Hayasaka', 'Erika Kose', {'weight': 6, 'color': 'blue'}),
('Kaguya Shinomiya', 'Unyo Shinomiya', {'weight': 9, 'color': 'blue'}),
('Kaguya Shinomiya', 'Maki Shijo', {'weight': 7, 'color': 'red'}),
('Kaguya Shinomiya', 'Miyuki Shirogane', {'weight': 10, 'color': 'blue'}),
('Kaguya Shinomiya', 'Chika Fujiwara', {'weight': 9, 'color': 'blue'}),
('Kaguya Shinomiya', 'Yu Ishigami', {'weight': 9, 'color': 'blue'}),
('Kaguya Shinomiya', 'Miko Iino', {'weight': 8, 'color': 'blue'}),
('Kaguya Shinomiya', 'Kei Shirogane', {'weight': 7, 'color': 'blue'}),
('Kaguya Shinomiya', 'Nagisa Kashiwagi', {'weight': 7, 'color': 'blue'}),
('Kaguya Shinomiya', 'Tsubame Koyasu', {'weight': 7, 'color': 'blue'}),
('Kaguya Shinomiya', 'Rei Onodera', {'weight': 7, 'color': 'blue'}),
('Kaguya Shinomiya', 'Tsubame Koyasu', {'weight': 7, 'color': 'blue'}),
('Kaguya Shinomiya', 'Kobachi Osaragi', {'weight': 7, 'color': 'blue'}),
('Miyuki Shirogane', 'Kei Shirogane', {'weight': 9, 'color': 'blue'}),
('Miyuki Shirogane', 'Papa Shirogane', {'weight': 8, 'color': 'blue'}),
('Miyuki Shirogane', 'Yu Ishigami', {'weight': 9, 'color': 'blue'}),
('Miyuki Shirogane', 'Chika Fujiwara', {'weight': 9, 'color': 'blue'}),
('Miyuki Shirogane', 'Miko Iino', {'weight': 8, 'color': 'blue'}),
('Miyuki Shirogane', 'Go Kazamatsuri', {'weight': 7, 'color': 'blue'}),
('Miyuki Shirogane', 'Saburo Toyosaki', {'weight': 6, 'color': 'blue'}),
('Miyuki Shirogane', 'Maki Shiyo', {'weight': 6, 'color': 'blue'}),
('Miyuki Shirogane', 'Mikado Shijo', {'weight': 7, 'color': 'blue'}),
('Miyuki Shirogane', 'Kobachi Osaragi', {'weight': 6, 'color': 'blue'}),
('Chika Fujiwara', 'Yu Ishigami', {'weight': 9, 'color': 'blue'}),
('Chika Fujiwara', 'Miko Iino', {'weight': 8, 'color': 'blue'}),
('Chika Fujiwara', 'Kei Shirogane', {'weight': 9, 'color': 'blue'}),
('Chika Fujiwara', 'Daichi Fujiwara', {'weight': 9, 'color': 'blue'}),
('Miko Iino', 'Yu Ishigami', {'weight': 9, 'color': 'blue'}),
('Miko Iino', 'Kobachi Osaragi', {'weight': 8, 'color': 'blue'}),
('Miko Iino', 'Rei Onodera', {'weight': 7, 'color': 'blue'}),
('Miko Iino', 'Karen Kino', {'weight': 6, 'color': 'blue'}),
('Yu Ishigami', 'Tsubame Koyasu', {'weight': 8, 'color': 'blue'}),
('Yu Ishigami', 'Maki Shijo', {'weight': 7, 'color': 'blue'}),
('Yu Ishigami', 'Rei Onodera', {'weight': 6, 'color': 'blue'}),
('Yu Ishigami', 'Karen Kino', {'weight': 6, 'color': 'blue'}),
('Yu Ishigami', 'Tsubasa Tanuma', {'weight': 6, 'color': 'blue'}),
('Erika Kose', 'Karen Kino', {'weight': 9, 'color': 'blue'}),
('Erika Kose', 'Maki Shijo', {'weight': 7, 'color': 'blue'}),
('Erika Kose', 'Nagisa Kashiwagi', {'weight': 7, 'color': 'blue'}),
('Karen Kino', 'Maki Shijo', {'weight': 7, 'color': 'blue'}),
('Karen Kino', 'Nagisa Kashiwagi', {'weight': 7, 'color': 'blue'}),
('Kobachi Osaragi', 'Rei Onodera', {'weight': 6, 'color': 'blue'}),
('Kobachi Osaragi', 'Tsubame Koyasu', {'weight': 6, 'color': 'blue'}),
('Maki Shijo', 'Mikado Shijo', {'weight': 8, 'color': 'blue'}),
('Maki Shijo', 'Nagisa Kashiwagi', {'weight': 8, 'color': 'blue'}),
('Maki Shijo', 'Tsubasa Tanuma', {'weight': 8, 'color': 'blue'}),
('Nagisa Kashiwagi', 'Tsubasa Tanuma', {'weight': 9, 'color': 'blue'}),
('Rei Onodera', 'Tsubame Koyasu', {'weight': 6, 'color': 'blue'}),
('Ganan Shinomiya', 'Kaguya Shinomiya', {'weight': 6, 'color': 'red'}),
('Oko Shinomiya', 'Kaguya Shinomiya', {'weight': 7, 'color': 'red'}),
('Oko Shinomiya', 'Unyo Shinomiya', {'weight': 7, 'color': 'red'})])

plt.figure(3,figsize=(11,10)) 
pos = nx.circular_layout(KG)
label_options = {"facecolor": 'white',"alpha": 0.9}
nx.draw(KG, pos,node_size=60,font_size=11, with_labels=True, font_weight='bold', bbox = label_options) 
plt.show()

edge_widths = [2**e[2]['weight']/64 for e in KG.edges(data=True)] # adjustable
edge_alphas = [e[2]['weight'] for e in KG.edges(data=True)]
edge_colors = [e[2]['color'] for e in KG.edges(data=True)]

# average negativity
avg_red_weight = 0;
num_red = 0;
for e in KG.edges(data=True):
  if e[2]['color'] == "red": 
    avg_red_weight += e[2]['weight'] 
    num_red += 1;
avg_red_weight /= num_red
print(avg_red_weight)

# percent negative
print(num_red / KG.number_of_edges())

#### draw graph ####
fig, ax = plt.subplots(figsize=(11, 10))
pos = nx.spring_layout(KG, k=0.15, seed=4572320)
pos = nx.kamada_kawai_layout(KG)

# compute centrality
centrality = nx.betweenness_centrality(KG, k=10, endpoints=True)

# compute community structure
lpc = nx.community.label_propagation_communities(KG)
community_index = {n: i for i, com in enumerate(lpc) for n in com}

node_color = [community_index[n] for n in KG]
node_size = [v * 10000 for v in centrality.values()]
cmap = plt.cm.coolwarm
label_options = {"ec": "k", "fc": "white", "alpha": 0.9}
male = ['Miyuki Shirogane', 'Yu Ishigami', 'Daichi Fujiwara', 'Unyo Shinomiya', 
                  'Oko Shinomiya','Ganan Shinomiya', 'Kazeno', 'Tsubasa Tanuma', 
                  'Papa Shirogane', 'Mikado Shijo', 'Go Kazamatsuri',
                  'Saburo Toyosaki'] # change list of MALE characters
color_map_fm = ['lightgreen' if node in male else 'pink' for node in KG]

nx.draw_networkx(
    KG,
    pos=pos,
    with_labels=True,
    #node_color="indigo",
    node_color=color_map_fm,
    node_size=node_size,
    font_color="black",
    #edge_color=edge_alphas,
    edge_color=edge_colors,
    width=edge_widths,
    #edge_cmap=cmap,
    vmin=0,
    vmax=10,
    bbox = label_options
)

# # Title/legend
# font = {"color": "k", "fontweight": "bold", "fontsize": 15}
# ax.set_title("Kaguya-Sama Character Network", font)
# # Change font color for legend
# font["color"] = "black"

# ax.text(
#     0.10,
#     0.0,
#     "node color = male or female character",
#     horizontalalignment="left",
#     transform=ax.transAxes,
#     fontdict=font,
# )
# ax.text(
#     0.10,
#     0.05,
#     "node size = betweeness centrality",
#     horizontalalignment="left",
#     transform=ax.transAxes,
#     fontdict=font,
# )
# ax.text(
#     0.10,
#     0.10,
#     "edge color = positive or negative relationship",
#     horizontalalignment="left",
#     transform=ax.transAxes,
#     fontdict=font,
# )
# ax.text(
#     0.10,
#     0.15,
#     "edge width = weight of relationship",
#     horizontalalignment="left",
#     transform=ax.transAxes,
#     fontdict=font,
# )

# Resize figure for label readibility
ax.margins(0.1, 0.05)
fig.tight_layout()
# Add colorbar
# sm = plt.cm.ScalarMappable(cmap=cmap, norm=plt.Normalize(vmin = 0, vmax=10))
# sm._A = []
# ax = plt.gca()
# ax.set_axis_off()
# plt.colorbar(sm, ax=ax)
# Create the figure
textstr = '\n'.join((
    r'Node Size = proportional to node betweenness centrality',
    r'Node Color = green if male, pink if female',
    r'Edge Width = proportional to squared edge weight',
    r'Edge Color = blue if positive, red if negative'))
# these are matplotlib.patch.Patch properties
props = dict(boxstyle='round', facecolor='white', alpha=1.)

# place a text box in upper left in axes coords
ax.text(0.75, 0.05, textstr, transform=ax.transAxes, fontsize=12, bbox=props)
plt.axis("off")
plt.show()

# compute betweenness centrality
bw_centrality = nx.betweenness_centrality(KG)
# compute degree centrality
deg_centrality = nx.degree_centrality(KG)
# compute closeness centrality
close_centrality = nx.closeness_centrality(KG)
# compute eigenvector centrality
eigen_centrality = nx.eigenvector_centrality(KG)

# Select a list of influential nodes in a graph using VoteRank algorithm
vr = nx.voterank(KG)
#pr = nx.pagerank(KG)
#print(pr)
print(vr)
print(bw_centrality)
print(deg_centrality)

# 2-way clustering
from sklearn.cluster import KMeans
import matplotlib.pyplot as plt
import numpy as np

ppc = [0.68,
       0.6666666667,
       0.75,
       0.1818181818,
       0.4,
       0.6875,
       0.8,
       0.5714285714,
       0.8,
       0.6111111111,
       0.6,
       1,
       1,
       0.4666666667]

fem = [0.4074074074,
       0.3666666667,
       0.3,
       0.05,
       0.1875,
       0.3,
       0.28,
       0.425,
       0.4857142857,
       0.5555555556,
       0.5,
       0.4230769231,
       0.04,
       0.32]

neg = [7.545454545,
       7.150943396,
       7.731707317,
       8,
       7.8,
       8.3,
       6.657894737,
       7.375,
       8.25,
       6.75,
       6.633333333,
       6.384615385,
       6.894736842,
       8.090909091]

bcp = [0.42629121,
       0.2243408451,
       0.2779447181,
       0.3943426943,
       0.5598566308,
       0.6636579512,
       0.5293136724,
       0.3840598291,
       0.7941176471,
       0.3459334,
       0.2767816092,
       0.6833333,
       0.4636806,
       0.1379563]

prp = [0.1108259,
      0.062213253,
      0.068073982,
      0.043404993,
      0.061254480,
      0.147108971,
      0.1385747499,
      0.096027381,
      0.155135837,
      0.1143391,
      0.074672005,
      0.1779745,
      0.1415762,
      0.0757784]

dcp = [0.692308,
      0.7241379310,
      0.7241379310,
      0.35897435897,
      0.32258064516,
      0.896551724,
      0.9583333333,
      0.56410256410,
      0.61764705882,
      0.538462,
      0.7586206897,
      0.96,
      1.00,
      0.46]

x = bcp
y = prp

n = len(neg)
data = list(zip(x, y))
inertias = []

for i in range(1,n+1):
    kmeans = KMeans(n_clusters=i)
    kmeans.fit(data)
    inertias.append(kmeans.inertia_)

plt.plot(range(1,n+1), inertias, marker='o')
plt.title('Elbow method')
plt.xlabel('Number of clusters')
plt.ylabel('Inertia')
plt.show()

kmeans = KMeans(n_clusters = 2)
kmeans.fit(data)

data = np.array(data)
# Step size of the mesh. Decrease to increase the quality of the VQ.
h = 0.001  # point in the mesh [x_min, x_max]x[y_min, y_max].
# Plot the decision boundary. For that, we will assign a color to each
x_min, x_max = data[:, 0].min() - 1, data[:, 0].max() + 1
y_min, y_max = data[:, 1].min() - 1, data[:, 1].max() + 1
xx, yy = np.meshgrid(np.arange(x_min, x_max, h), np.arange(y_min, y_max, h))

# Obtain labels for each point in mesh. Use last trained model.
Z = kmeans.predict(np.c_[xx.ravel(), yy.ravel()])

# Put the result into a color plot
Z = Z.reshape(xx.shape)
plt.figure(1)
plt.clf()
plt.imshow(
    Z,
    interpolation="nearest",
    extent=(xx.min(), xx.max(), yy.min(), yy.max()),
    cmap=plt.cm.bwr,
    aspect="auto",
    origin="lower",
)

plt.scatter(x, y, c=kmeans.labels_)


#plt.xlabel('PRP: PageRank of the protagonist')
plt.xlabel('BCP: betweenness centrality of the protagonist')
#plt.xlabel('PPC: percentage of cliques involving the protagonist')
#plt.xlabel('Fem: percentage of female characters')
#plt.ylabel('DCP: degree centrality of the protagonist')
#plt.ylabel('PPC: percentage of cliques involving the protagonist')
#plt.ylabel('Neg: average weight of negative relationships')
plt.ylabel('PRP: PageRank of the protagonist')

# shows = [
#     'Demonslayer',
#     'Maid Sama!',
#     'Kaguya-Sama',
#     'Haikyuu',
#     'Violet Evergarden',
#     'Ouran High School Host Club',
#     'My Hero Academia',
#     'Jujutsu Kaisen',
#     'Attack on Titan',
#     'Fruits Basket'
# ]


shows = [
    'DS',
    'AOT',
    'JK',
    'HK',
    'FA',
    'MHA',
    'DN',
    'OHS',
    'VE',
    'KS',
    'FB',
    'MS',
    'BF',
    'VN'
]

plt.xlim(min(x) - 0.05, max(x) + 0.05)
plt.ylim(min(y) - 0.1, max(y) + 0.1)

# Plot the centroids as a white X
centroids = kmeans.cluster_centers_
plt.scatter(
    centroids[:, 0],
    centroids[:, 1],
    marker="x",
    s=169,
    linewidths=3,
    color="white",
    zorder=10,
)

shojo = ['OHS',
    'VE',
    'KS',
    'FB',
    'MS',
    'VN',
    'BF']
# Plot the points
for i in range(n):
  plt.annotate(shows[i], (x[i],y[i]), textcoords="offset points", xytext=(0,10),
                ha='center', wrap=True, bbox=dict(boxstyle="round,pad=0.3", 
                color='lightpink' if shows[i] in shojo else 'lightblue', ec="black", lw=1))


plt.show()

# number of cliques & number of cliques with protagonist
c = list(nx.find_cliques(KG))
print(c)
# s = sum(1 for cliq in c)
sum = 0
s = 0
for cliq in c:
  if len(cliq) > 2:
    s += 1 
    if 'Kaguya Shinomiya' in cliq: sum += 1
print(sum, s)

# percent female
print(KG.number_of_nodes())
print( 1 - (len(male) / KG.number_of_nodes()))

# decision tree
from sklearn.datasets import load_iris
iris = load_iris()
print(iris)

import networkx as nx
import matplotlib.pyplot as plt
import math as math

VE = nx.Graph()
VE.add_node("Violet Evergarden")
VE.add_nodes_from(["Gilbert Bougainvillea", 
                   "Dietfried Bougainvillea",
                   "Claudia Hodgins",

                   "Tiffany Evergarden",
                   "Oliver", #Butler

                   "Roland", #Postman
                   "Benedict Blue", #Delivery
                   "Nerine", #Reception
                   "Lilian", #Reception

                   "Iris Cannary",
                   "Sara Florent", #Deceased Great Grandmother
                   "Emonn Snow", #Guy she liked 
                   "Montgomery", #Bachelor
                   "Hans", #Bachelor
                
                   "Cattleya Baudelaire",

                   "Luculia Marlborough",
                   "Spencer Marlborough", 

                   "Rhodanthe", #Doll Instructuctor

                   "Charlotte Abelfreyja Drossel", #Client
                   "Damian Baldur Flugel",                 
                   "Alberta", #maid

                   "Leon Stephanotis",
                   "Le Verrier", #head of Shaher Astronomical Headquarters
                   "Kyle Zoenig", #coworker
                   "Iberis Conway", #Kyle's doll partner

                   "Oscar Webster", #writer
                   "Olivia Webster", #deceased daughter

                   "Erica Brown", 

                   "Ann Magnolia",
                   "Clara Magnolia", #deceased mother

                   "Aidan Field", #deceased soldier
                   "Maria", #his finace
                   "Elle", #comerade

                   "Merkulov Brigadier" #enemies of Dietfried, his soldiers killed Aidan
                  ])

#10 - Strongest, most pivotal relationships of the anime. Edges given this weight must have the protagonist as one of its endpoints (i.e. must involve the protagonist). 
#9 - Very important relationships, top relationships of non-protagonist or very plot-centric relationships of the protagonist
#8 - Close relationships, should have some plot significance and have a developed story
#7 - Important relationship but not core to the show
#6 - Acquaintances / Once-off / Not very emotionally attached

VE.add_edges_from([("Gilbert Bougainvillea", "Violet Evergarden", {'weight': 10,'color': 'blue'}), 
                   
                   ("Dietfried Bougainvillea", "Violet Evergarden", {'weight': 8,'color': 'red'}),
                   ("Dietfried Bougainvillea", "Gilbert Bougainvillea", {'weight': 9, 'color': 'blue'}), 

                   ("Claudia Hodgins", "Violet Evergarden", {'weight': 9, 'color': 'blue'}),
                   ("Claudia Hodgins", "Gilbert Bougainvillea", {'weight': 9, 'color': 'blue'}),
                   ("Claudia Hodgins", "Dietfried Bougainvillea", {'weight': 6,'color': 'blue'}),

                   ("Tiffany Evergarden", "Violet Evergarden", {'weight': 7, 'color': 'blue'}),
                   ("Tiffany Evergarden", "Claudia Hodgins", {'weight': 6, 'color': 'blue'}),
                   ("Tiffany Evergarden", "Gilbert Bougainvillea", {'weight': 7, 'color': 'blue'}),
                   ("Tiffany Evergarden", "Dietfried Bougainvillea", {'weight': 7,'color': 'blue'}),

                   ("Oliver", "Tiffany Evergarden", {'weight': 7, 'color': 'blue'}),

                   ("Roland", "Violet Evergarden", {'weight': 7, 'color': 'blue'}),
                   ("Roland", "Claudia Hodgins", {'weight': 6, 'color': 'blue'}),

                   ("Benedict Blue", "Violet Evergarden", {'weight': 7, 'color': 'blue'}),
                   ("Benedict Blue", "Claudia Hodgins", {'weight': 7, 'color': 'blue'}),
                   ("Benedict Blue", "Roland", {'weight': 6, 'color': 'blue'}),

                   ("Nerine", "Benedict Blue", {'weight': 6, 'color': 'blue'}),

                   ("Lilian", "Nerine", {'weight': 7, 'color': 'blue'}),
                   ("Lilian", "Benedict Blue", {'weight': 7, 'color': 'blue'}),

                   ("Iris Cannary", "Violet Evergarden", {'weight': 8, 'color': 'blue'}),
                   ("Iris Cannary", "Claudia Hodgins", {'weight': 7, 'color': 'blue'}),
                   ("Iris Cannary", "Benedict Blue", {'weight': 7, 'color': 'blue'}),
                   ("Iris Cannary", "Roland", {'weight': 6, 'color': 'blue'}),

                   ("Emonn Snow", "Iris Cannary", {'weight': 9, 'color': 'blue'}),

                   ("Montgomery", "Iris Cannary", {'weight': 6, 'color': 'blue'}),

                   ("Hans", "Iris Cannary", {'weight': 6, 'color': 'blue'}),

                   ("Cattleya Baudelaire", "Violet Evergarden", {'weight': 8, 'color': 'blue'}),
                   ("Cattleya Baudelaire", "Claudia Hodgins", {'weight': 9, 'color': 'blue'}),
                   ("Cattleya Baudelaire", "Benedict Blue", {'weight': 7, 'color': 'blue'}),
                   ("Cattleya Baudelaire", "Roland", {'weight': 6, 'color': 'blue'}),
                   ("Cattleya Baudelaire", "Iris Cannary", {'weight': 7, 'color': 'blue'}),

                   ("Luculia Marlborough", "Violet Evergarden", {'weight': 9, 'color': 'blue'}),
                  
                   ("Spencer Marlborough", "Violet Evergarden", {'weight': 8, 'color': 'blue'}),
                   ("Spencer Marlborough", "Luculia Marlborough", {'weight': 9, 'color': 'blue'}),

                   ("Rhodanthe", "Violet Evergarden", {'weight': 6, 'color': 'blue'}),
                   ("Rhodanthe", "Luculia Marlborough", {'weight': 6, 'color': 'blue'}),

                   ("Charlotte Abelfreyja Drossel", "Violet Evergarden", {'weight': 6, 'color': 'blue'}),

                   ("Damian Baldur Flugel", "Charlotte Abelfreyja Drossel", {'weight': 9, 'color': 'blue'}),

                   ("Alberta", "Violet Evergarden", {'weight': 6, 'color': 'blue'}),
                   ("Alberta", "Charlotte Abelfreyja Drossel", {'weight': 9, 'color': 'blue'}),

                   ("Leon Stephanotis", "Violet Evergarden", {'weight': 9, 'color': 'blue'}),
                   
                   ("Le Verrier", "Leon Stephanotis", {'weight': 6, 'color': 'blue'}),

                   ("Kyle Zoenig", "Leon Stephanotis", {'weight': 7, 'color': 'red'}),
                   ("Kyle Zoenig", "Le Verrier", {'weight': 6, 'color': 'blue'}),     

                   ("Iberis Conway", "Kyle Zoenig", {'weight': 6, 'color': 'blue'}),

                   ("Oscar Webster", "Violet Evergarden", {'weight': 8, 'color': 'blue'}),

                   ("Olivia Webster", "Oscar Webster", {'weight': 9, 'color': 'blue'}),

                   ("Erica Brown", "Violet Evergarden", {'weight': 8, 'color': 'blue'}),
                   ("Erica Brown", "Claudia Hodgins", {'weight': 7, 'color': 'blue'}),
                   ("Erica Brown", "Benedict Blue", {'weight': 7, 'color': 'blue'}),
                   ("Erica Brown", "Roland", {'weight': 6, 'color': 'blue'}),
                   ("Erica Brown", "Iris Cannary", {'weight': 7, 'color': 'blue'}),
                   ("Erica Brown", "Cattleya Baudelaire", {'weight': 7, 'color': 'blue'}),

                   ("Ann Magnolia", "Violet Evergarden", {'weight': 8, 'color': 'blue'}),

                   ("Clara Magnolia", "Violet Evergarden", {'weight': 8, 'color': 'blue'}),
                   ("Clara Magnolia", "Ann Magnolia", {'weight': 9, 'color': 'blue'}),

                   ("Aidan Field", "Violet Evergarden", {'weight': 6, 'color': 'blue'}),

                   ("Maria", "Violet Evergarden", {'weight': 6, 'color': 'blue'}),
                   ("Aidan Field", "Maria", {'weight': 8, 'color': 'blue'}),

                   ("Elle", "Aidan Field", {'weight': 7, 'color': 'blue'}),

                   ("Merkulov Brigadier", "Violet Evergarden", {'weight': 9, 'color': 'red'}),
                   ("Merkulov Brigadier", "Dietfried Bougainvillea", {'weight': 9, 'color': 'red'})
                  ])

import math as math
edge_widths = [2**e[2]['weight']/64 for e in VE.edges(data=True)]
edge_alphas = [e[2]['weight'] for e in VE.edges(data=True)]
edge_colors = [e[2]['color'] for e in VE.edges(data=True)]

#### draw graphs ####
plt.figure(3,figsize=(11,10)) 
pos = nx.circular_layout(VE)
label_options = {"facecolor": 'white',"alpha": 0.9}
nx.draw(VE, pos,node_size=60,font_size=11, with_labels=True, font_weight='bold', bbox = label_options) 
plt.show()


fig, ax = plt.subplots(figsize=(11, 10))
pos = nx.kamada_kawai_layout(VE)

# compute betweeness centrality
bw_centrality = nx.betweenness_centrality(VE, k=10, endpoints=True)
# compute community structure
lpc = nx.community.label_propagation_communities(VE)
community_index = {n: i for i, com in enumerate(lpc) for n in com}

node_color = [community_index[n] for n in VE]

node_size = [v * 10000 for v in bw_centrality.values()]

cmap = plt.cm.coolwarm
label_options = {"ec": "k", "fc": "white", "alpha": 0.9}
female = ["Violet Evergarden", 
          "Tiffany Evergarden",
          "Nerine", #Reception
          "Lilian", #Reception
          "Iris Cannary",
          "Sara Florent", #Deceased Great Grandmother
          "Cattleya Baudelaire",
          "Luculia Marlborough",
          "Rhodanthe", #Doll Instructuctor
          "Charlotte Abelfreyja Drossel", #Client
          "Alberta", #maid
          "Iberis Conway", #Kyle's doll partner
          "Olivia Webster", #deceased daughter
          "Erica Brown", 
          "Ann Magnolia",
          "Clara Magnolia", #deceased mother
          "Maria"]
color_map_fm = ['pink' if node in female else 'lightgreen' for node in VE]

nx.draw_networkx(
    VE,
    pos=pos,
    with_labels=True,
    #node_color="indigo",
    node_color=color_map_fm,
    node_size=node_size,
    font_color="black",
    edge_color=edge_colors,
    width=edge_widths,
    edge_cmap=cmap,
    vmin=0,
    vmax=10,
    bbox = label_options
)

# Title/legend
font = {"color": "k", "fontweight": "bold", "fontsize": 15}
font["color"] = "black"

ax.margins(0.1, 0.05)
fig.tight_layout()
plt.axis("off")
plt.legend("")
plt.show()

# number of cliques / sub-complete graphs
c = list(nx.find_cliques(VE))
print(c)
# s = sum(1 for cliq in c)
sum = 0
s = 0
for cliq in c:
  if len(cliq) > 2: 
    s += 1 
    if 'Violet Evergarden' in cliq: sum += 1
print(sum, s)

# percentage of female characters
numFem = len(female)
numNodes = VE.number_of_nodes()
print(numFem, numNodes, numFem/numNodes)

# number of edges
print(VE.number_of_edges())


# compute betweeness centrality
bw_centrality = nx.betweenness_centrality(VE, k=10, endpoints=True)
# compute degree centrality
deg_centrality = nx.degree_centrality(VE)
# compute closeness centrality
close_centrality = nx.closeness_centrality(VE)
# compute eigenvector centrality
eigen_centrality = nx.eigenvector_centrality

# Select a list of influential nodes in a graph using VoteRank algorithm
vr = nx.voterank(VE)
pr = nx.pagerank(VE)
print(pr)
print(vr)
print(bw_centrality)
print(deg_centrality)

from matplotlib.offsetbox import HPacker
import networkx as nx
import matplotlib.pyplot as plt

HK = nx.Graph()
HK.add_node("Shoyo Hinata")
HK.add_nodes_from([                  
                   "Daichi Sawamura",
                   "Tobio Kageyama", 
                   "Koshi Sugawara", #karasuno members
                   "Asahi Azumane",
                   "Yu Nishinoya",
                   "Ryunosuke Tanaka",
                   "Kei Tsukishima",
                   "Tadashi Yamaguchi",

                   "Ittetsu Takeda", #karasuno managers
                   "Keishin Ukai", 
                   "Kiyoko Shimizu",
                   "Ikkei Ukai", #retired. Keishin's dad
                   
                   "Yui Michimiya", #Daichi's friend

                   #aoba josai members
                   "Toru Oikawa",  #same middle school as kageyama     
                   "Issei Matsukawa", 
                   "Yutaro Kindaichi", #same middle school as kageyama  
                   "Akira Kunimi", #same middle school as kageyama                
                   "Hajime Iwaizumi", #same middle school as kageyama     
                   "Takahiro Hanamaki",
                   "Shinji Watari",
                   
                   "Sadayuki Mizoguchi", #aoba josai coaches
                   "Nobuteru Irihata",

                   "Yusuke Takinoue", #alumni, knows young ukai
                   "Makoto Shimada", #Yamaguchi's teacher
                   "Hidenori Uchizawa",

                   "Tetsuro Kuroo", #friends with Tsukishima
                   "Kenma Kozume", #friends with Hinata
                   "Taketora Yamamoto", #friends with Tanaka
                   "So Inuoka", #friends with Hinata
                   "Shohei Fukunaga",
                   "Morisuke Yaku",

                   "Manabu Naoi", #Nekoma current Manager, knows Ukai 
                   "Yasufumi Nekomata", 
                   
                   #Tokonami characters
                   "Hayato Ikejiri", #Daichi's middle school friend
                   "Kazuma Chaya",                   

                   #Dateko members
                   "Takanobu Aone", #knows hinata
                   "Yasushi Kamasaki", 
                   "Kenji Futakuchi",                    

                   "Wakatoshi Ushijima", #enemy of oikawa
                   ])

#10 - Strongest, most pivotal relationships of the anime. Edges given this weight must have the protagonist as one of its endpoints (i.e. must involve the protagonist). 
#9 - Very important relationships, top relationships of non-protagonist or very plot-centric relationships of the protagonist
#8 - Close relationships, should have some plot significance and have a developed story
#7 - Important relationship but not core to the show
#6 - Acquaintances / Once-off / Not very emotionally attached
HK.add_edges_from([("Daichi Sawamura", "Shoyo Hinata", {'weight': 9, 'color': 'blue'}),
                   
                   ("Tobio Kageyama", "Shoyo Hinata", {'weight': 10, 'color': 'blue'}),
                   ("Tobio Kageyama", "Daichi Sawamura", {'weight': 8, 'color': 'blue'}),

                   ("Koshi Sugawara", "Shoyo Hinata", {'weight': 8, 'color': 'blue'}),
                   ("Koshi Sugawara", "Daichi Sawamura", {'weight': 9, 'color': 'blue'}),
                   ("Koshi Sugawara", "Tobio Kageyama", {'weight': 8, 'color': 'blue'}),

                   ("Asahi Azumane", "Shoyo Hinata", {'weight': 8, 'color': 'blue'}),
                   ("Asahi Azumane", "Daichi Sawamura", {'weight': 9, 'color': 'blue'}),
                   ("Asahi Azumane", "Tobio Kageyama", {'weight': 8, 'color': 'blue'}),
                   ("Asahi Azumane", "Koshi Sugawara", {'weight': 9, 'color': 'blue'}),

                   ("Yu Nishinoya", "Shoyo Hinata", {'weight': 8, 'color': 'blue'}),
                   ("Yu Nishinoya", "Daichi Sawamura", {'weight': 8, 'color': 'blue'}),
                   ("Yu Nishinoya", "Tobio Kageyama", {'weight': 8, 'color': 'blue'}),
                   ("Yu Nishinoya", "Koshi Sugawara", {'weight': 8, 'color': 'blue'}),
                   ("Yu Nishinoya", "Asahi Azumane", {'weight': 9, 'color': 'blue'}),

                   ("Ryunosuke Tanaka", "Shoyo Hinata", {'weight': 8, 'color': 'blue'}),
                   ("Ryunosuke Tanaka", "Daichi Sawamura", {'weight': 8, 'color': 'blue'}),
                   ("Ryunosuke Tanaka", "Tobio Kageyama", {'weight': 8, 'color': 'blue'}),
                   ("Ryunosuke Tanaka", "Koshi Sugawara", {'weight': 8, 'color': 'blue'}),
                   ("Ryunosuke Tanaka", "Asahi Azumane", {'weight': 8, 'color': 'blue'}),
                   ("Ryunosuke Tanaka", "Yu Nishinoya", {'weight': 9, 'color': 'blue'}),

                   ("Kei Tsukishima", "Shoyo Hinata", {'weight': 8, 'color': 'blue'}),
                   ("Kei Tsukishima", "Daichi Sawamura", {'weight': 8, 'color': 'blue'}),
                   ("Kei Tsukishima", "Tobio Kageyama", {'weight': 8, 'color': 'blue'}),
                   ("Kei Tsukishima", "Koshi Sugawara", {'weight': 8, 'color': 'blue'}),
                   ("Kei Tsukishima", "Asahi Azumane", {'weight': 8, 'color': 'blue'}),
                   ("Kei Tsukishima", "Yu Nishinoya", {'weight': 8, 'color': 'blue'}),
                   ("Kei Tsukishima", "Ryunosuke Tanaka", {'weight': 8, 'color': 'blue'}),

                   ("Tadashi Yamaguchi", "Shoyo Hinata", {'weight': 8, 'color': 'blue'}),
                   ("Tadashi Yamaguchi", "Daichi Sawamura", {'weight': 8, 'color': 'blue'}),
                   ("Tadashi Yamaguchi", "Tobio Kageyama", {'weight': 8, 'color': 'blue'}),
                   ("Tadashi Yamaguchi", "Koshi Sugawara", {'weight': 8, 'color': 'blue'}),
                   ("Tadashi Yamaguchi", "Asahi Azumane", {'weight': 8, 'color': 'blue'}),
                   ("Tadashi Yamaguchi", "Yu Nishinoya", {'weight': 8, 'color': 'blue'}),
                   ("Tadashi Yamaguchi", "Ryunosuke Tanaka", {'weight': 8, 'color': 'blue'}),
                   ("Tadashi Yamaguchi", "Kei Tsukishima", {'weight': 9, 'color': 'blue'}),

                   ("Ittetsu Takeda", "Shoyo Hinata", {'weight': 8, 'color': 'blue'}),
                   ("Ittetsu Takeda", "Daichi Sawamura", {'weight': 8, 'color': 'blue'}),
                   ("Ittetsu Takeda", "Tobio Kageyama", {'weight': 8, 'color': 'blue'}),
                   ("Ittetsu Takeda", "Koshi Sugawara", {'weight': 8, 'color': 'blue'}),
                   ("Ittetsu Takeda", "Asahi Azumane", {'weight': 8, 'color': 'blue'}),
                   ("Ittetsu Takeda", "Yu Nishinoya", {'weight': 8, 'color': 'blue'}),
                   ("Ittetsu Takeda", "Ryunosuke Tanaka", {'weight': 8, 'color': 'blue'}),
                   ("Ittetsu Takeda", "Kei Tsukishima", {'weight': 8, 'color': 'blue'}),
                   ("Ittetsu Takeda", "Tadashi Yamaguchi", {'weight': 8, 'color': 'blue'}),

                   ("Keishin Ukai", "Shoyo Hinata", {'weight': 8, 'color': 'blue'}),
                   ("Keishin Ukai", "Daichi Sawamura", {'weight': 8, 'color': 'blue'}),
                   ("Keishin Ukai", "Tobio Kageyama", {'weight': 8, 'color': 'blue'}),
                   ("Keishin Ukai", "Koshi Sugawara", {'weight': 8, 'color': 'blue'}),
                   ("Keishin Ukai", "Asahi Azumane", {'weight': 8, 'color': 'blue'}),
                   ("Keishin Ukai", "Yu Nishinoya", {'weight': 8, 'color': 'blue'}),
                   ("Keishin Ukai", "Ryunosuke Tanaka", {'weight': 8, 'color': 'blue'}),
                   ("Keishin Ukai", "Kei Tsukishima", {'weight': 8, 'color': 'blue'}),
                   ("Keishin Ukai", "Tadashi Yamaguchi", {'weight': 8, 'color': 'blue'}),
                   ("Keishin Ukai", "Ittetsu Takeda", {'weight': 9, 'color': 'blue'}),

                   ("Kiyoko Shimizu", "Shoyo Hinata", {'weight': 8, 'color': 'blue'}),
                   ("Kiyoko Shimizu", "Daichi Sawamura", {'weight': 8, 'color': 'blue'}),
                   ("Kiyoko Shimizu", "Tobio Kageyama", {'weight': 8, 'color': 'blue'}),
                   ("Kiyoko Shimizu", "Koshi Sugawara", {'weight': 8, 'color': 'blue'}),
                   ("Kiyoko Shimizu", "Asahi Azumane", {'weight': 8, 'color': 'blue'}),
                   ("Kiyoko Shimizu", "Yu Nishinoya", {'weight': 9, 'color': 'blue'}),
                   ("Kiyoko Shimizu", "Ryunosuke Tanaka", {'weight': 9, 'color': 'blue'}),
                   ("Kiyoko Shimizu", "Kei Tsukishima", {'weight': 8, 'color': 'blue'}),
                   ("Kiyoko Shimizu", "Tadashi Yamaguchi", {'weight': 8, 'color': 'blue'}),
                   ("Kiyoko Shimizu", "Ittetsu Takeda", {'weight': 8, 'color': 'blue'}),
                   ("Kiyoko Shimizu", "Keishin Ukai", {'weight': 8, 'color': 'blue'}),

                   ("Ikkei Ukai", "Keishin Ukai", {'weight': 9, 'color': 'blue'}),

                   ("Yui Michimiya", "Daichi Sawamura", {'weight': 9, 'color': 'blue'}),

                   ("Toru Oikawa", "Tobio Kageyama", {'weight': 9, 'color': 'red'}),

                   ("Issei Matsukawa", "Toru Oikawa", {'weight': 7, 'color': 'blue'}),

                   ("Yutaro Kindaichi", "Tobio Kageyama", {'weight': 7, 'color': 'red'}),
                   ("Yutaro Kindaichi", "Toru Oikawa", {'weight': 7, 'color': 'blue'}),
                   ("Yutaro Kindaichi", "Issei Matsukawa", {'weight': 7, 'color': 'blue'}),

                   ("Akira Kunimi", "Tobio Kageyama", {'weight': 7, 'color': 'red'}),
                   ("Akira Kunimi", "Toru Oikawa", {'weight': 7, 'color': 'blue'}),
                   ("Akira Kunimi", "Issei Matsukawa", {'weight': 7, 'color': 'blue'}),
                   ("Akira Kunimi", "Yutaro Kindaichi", {'weight': 9, 'color': 'blue'}),

                   ("Hajime Iwaizumi", "Tobio Kageyama", {'weight': 6, 'color': 'blue'}),
                   ("Hajime Iwaizumi", "Toru Oikawa", {'weight': 9, 'color': 'blue'}),
                   ("Hajime Iwaizumi", "Issei Matsukawa", {'weight': 7, 'color': 'blue'}),
                   ("Hajime Iwaizumi", "Yutaro Kindaichi", {'weight': 7, 'color': 'blue'}),
                   ("Hajime Iwaizumi", "Akira Kunimi", {'weight': 7, 'color': 'blue'}),
                   
                   ("Takahiro Hanamaki", "Toru Oikawa", {'weight': 7, 'color': 'blue'}),
                   ("Takahiro Hanamaki", "Issei Matsukawa", {'weight': 7, 'color': 'blue'}),
                   ("Takahiro Hanamaki", "Yutaro Kindaichi", {'weight': 7, 'color': 'blue'}),
                   ("Takahiro Hanamaki", "Akira Kunimi", {'weight': 7, 'color': 'blue'}),
                   ("Takahiro Hanamaki", "Hajime Iwaizumi", {'weight': 7, 'color': 'blue'}),

                   ("Shinji Watari", "Toru Oikawa", {'weight': 7, 'color': 'blue'}),
                   ("Shinji Watari", "Issei Matsukawa", {'weight': 7, 'color': 'blue'}),
                   ("Shinji Watari", "Yutaro Kindaichi", {'weight': 7, 'color': 'blue'}),
                   ("Shinji Watari", "Akira Kunimi", {'weight': 7, 'color': 'blue'}),
                   ("Shinji Watari", "Hajime Iwaizumi", {'weight': 7, 'color': 'blue'}),
                   ("Shinji Watari", "Takahiro Hanamaki", {'weight': 7, 'color': 'blue'}),

                   ("Sadayuki Mizoguchi", "Toru Oikawa", {'weight': 7, 'color': 'blue'}),
                   ("Sadayuki Mizoguchi", "Issei Matsukawa", {'weight': 7, 'color': 'blue'}),
                   ("Sadayuki Mizoguchi", "Yutaro Kindaichi", {'weight': 7, 'color': 'blue'}),
                   ("Sadayuki Mizoguchi", "Akira Kunimi", {'weight': 7, 'color': 'blue'}),
                   ("Sadayuki Mizoguchi", "Hajime Iwaizumi", {'weight': 7, 'color': 'blue'}),
                   ("Sadayuki Mizoguchi", "Takahiro Hanamaki", {'weight': 7, 'color': 'blue'}),
                   ("Sadayuki Mizoguchi", "Shinji Watari", {'weight': 7, 'color': 'blue'}),

                   ("Nobuteru Irihata", "Toru Oikawa", {'weight': 7, 'color': 'blue'}),
                   ("Nobuteru Irihata", "Issei Matsukawa", {'weight': 7, 'color': 'blue'}),
                   ("Nobuteru Irihata", "Yutaro Kindaichi", {'weight': 7, 'color': 'blue'}),
                   ("Nobuteru Irihata", "Akira Kunimi", {'weight': 7, 'color': 'blue'}),
                   ("Nobuteru Irihata", "Hajime Iwaizumi", {'weight': 7, 'color': 'blue'}),
                   ("Nobuteru Irihata", "Takahiro Hanamaki", {'weight': 7, 'color': 'blue'}),
                   ("Nobuteru Irihata", "Shinji Watari", {'weight': 7, 'color': 'blue'}),
                   ("Nobuteru Irihata", "Sadayuki Mizoguchi", {'weight': 7, 'color': 'blue'}),

                   ("Yusuke Takinoue", "Keishin Ukai", {'weight': 7, 'color': 'blue'}),

                   ("Makoto Shimada", "Yusuke Takinoue", {'weight': 7, 'color': 'blue'}),
                   ("Makoto Shimada", "Tadashi Yamaguchi", {'weight': 9, 'color': 'blue'}),
                   ("Makoto Shimada", "Keishin Ukai", {'weight': 7, 'color': 'blue'}),

                   ("Hidenori Uchizawa", "Yusuke Takinoue", {'weight': 6, 'color': 'blue'}),
                   ("Hidenori Uchizawa", "Keishin Ukai", {'weight': 6, 'color': 'blue'}),
                   ("Hidenori Uchizawa", "Makoto Shimada", {'weight': 6, 'color': 'blue'}),

                   ("Tetsuro Kuroo", "Kei Tsukishima", {'weight': 8, 'color': 'blue'}),
                   
                   ("Kenma Kozume", "Tetsuro Kuroo", {'weight': 9, 'color': 'blue'}),
                   ("Kenma Kozume", "Shoyo Hinata", {'weight': 9, 'color': 'blue'}),

                   ("Taketora Yamamoto", "Tetsuro Kuroo", {'weight': 7, 'color': 'blue'}),
                   ("Taketora Yamamoto", "Kenma Kozume", {'weight': 7, 'color': 'blue'}),
                   ("Taketora Yamamoto", "Ryunosuke Tanaka", {'weight': 8, 'color': 'blue'}),

                   ("So Inuoka", "Tetsuro Kuroo", {'weight': 7, 'color': 'blue'}),
                   ("So Inuoka", "Kenma Kozume", {'weight': 7, 'color': 'blue'}),
                   ("So Inuoka", "Shoyo Hinata", {'weight': 7, 'color': 'blue'}),
                   ("So Inuoka", "Taketora Yamamoto", {'weight': 7, 'color': 'blue'}),

                   ("Shohei Fukunaga", "Tetsuro Kuroo", {'weight': 7, 'color': 'blue'}),
                   ("Shohei Fukunaga", "Kenma Kozume", {'weight': 7, 'color': 'blue'}),
                   ("Shohei Fukunaga", "Taketora Yamamoto", {'weight': 7, 'color': 'blue'}),
                   ("Shohei Fukunaga", "So Inuoka", {'weight': 7, 'color': 'blue'}),

                   ("Morisuke Yaku", "Tetsuro Kuroo", {'weight': 7, 'color': 'blue'}),
                   ("Morisuke Yaku", "Kenma Kozume", {'weight': 7, 'color': 'blue'}),
                   ("Morisuke Yaku", "Taketora Yamamoto", {'weight': 7, 'color': 'blue'}),
                   ("Morisuke Yaku", "So Inuoka", {'weight': 7, 'color': 'blue'}),
                   ("Morisuke Yaku", "Shohei Fukunaga", {'weight': 7, 'color': 'blue'}),

                   ("Manabu Naoi", "Tetsuro Kuroo", {'weight': 7, 'color': 'blue'}),
                   ("Manabu Naoi", "Kenma Kozume", {'weight': 7, 'color': 'blue'}),
                   ("Manabu Naoi", "Taketora Yamamoto", {'weight': 7, 'color': 'blue'}),
                   ("Manabu Naoi", "So Inuoka", {'weight': 7, 'color': 'blue'}),
                   ("Manabu Naoi", "So Inuoka", {'weight': 7, 'color': 'blue'}),
                   ("Manabu Naoi", "Morisuke Yaku", {'weight': 7, 'color': 'blue'}),
                   ("Manabu Naoi", "Keishin Ukai", {'weight': 7, 'color': 'blue'}),

                   ("Yasufumi Nekomata", "Tetsuro Kuroo", {'weight': 7, 'color': 'blue'}),
                   ("Yasufumi Nekomata", "Kenma Kozume", {'weight': 7, 'color': 'blue'}),
                   ("Yasufumi Nekomata", "Taketora Yamamoto", {'weight': 7, 'color': 'blue'}),
                   ("Yasufumi Nekomata", "So Inuoka", {'weight': 7, 'color': 'blue'}),
                   ("Yasufumi Nekomata", "So Inuoka", {'weight': 7, 'color': 'blue'}),
                   ("Yasufumi Nekomata", "Morisuke Yaku", {'weight': 7, 'color': 'blue'}),
                   ("Yasufumi Nekomata", "Keishin Ukai", {'weight': 7, 'color': 'blue'}),
                   ("Yasufumi Nekomata", "Manabu Naoi", {'weight': 7, 'color': 'blue'}),
                   ("Yasufumi Nekomata", "Ikkei Ukai", {'weight': 9, 'color': 'blue'}),
                  
                   ("Hayato Ikejiri", "Daichi Sawamura", {'weight': 9, 'color': 'blue'}),

                   ("Kazuma Chaya", "Hayato Ikejiri", {'weight': 7, 'color': 'blue'}),


                   ("Takanobu Aone", "Shoyo Hinata", {'weight': 8, 'color': 'blue'}),

                   ("Yasushi Kamasaki", "Takanobu Aone", {'weight': 7, 'color': 'blue'}),

                   ("Kenji Futakuchi", "Takanobu Aone", {'weight': 8, 'color': 'blue'}),
                   ("Kenji Futakuchi", "Yasushi Kamasaki", {'weight': 7, 'color': 'blue'}),

                   ("Wakatoshi Ushijima", "Toru Oikawa", {'weight': 9, 'color': 'red'}),

                  ])
                   
#### draw graphs ####
plt.figure(3,figsize=(11,10)) 
pos = nx.circular_layout(HK)
label_options = {"facecolor": 'white',"alpha": 0.9}
nx.draw(HK, pos,node_size=60,font_size=11, with_labels=True, font_weight='bold', bbox = label_options) 
plt.show()

fig, ax = plt.subplots(figsize=(11, 10))
pos = nx.kamada_kawai_layout(HK)

# compute betweeness centrality
bw_centrality = nx.betweenness_centrality(HK, k=10, endpoints=True)
# compute community structure
lpc = nx.community.label_propagation_communities(HK)
community_index = {n: i for i, com in enumerate(lpc) for n in com}

node_color = [community_index[n] for n in HK]

node_size = [v * 10000 for v in bw_centrality.values()]

cmap = plt.cm.coolwarm
label_options = {"ec": "k", "fc": "white", "alpha": 0.9}
female = ["Kiyoko Shimizu",
          "Yui Michimiya"
         ]
color_map_fm = ['pink' if node in female else 'lightgreen' for node in HK]

nx.draw_networkx(
    HK,
    pos=pos,
    with_labels=True,
    #node_color="indigo",
    node_color=color_map_fm,
    node_size=node_size,
    font_color="black",
    edge_color=edge_colors,
    width=edge_widths,
    edge_cmap=cmap,
    vmin=0,
    vmax=10,
    bbox = label_options
)

# Title/legend
font = {"color": "k", "fontweight": "bold", "fontsize": 15}
font["color"] = "black"

ax.margins(0.1, 0.05)
fig.tight_layout()
plt.axis("off")
plt.legend("")
plt.show()

# number of cliques / sub-complete graphs
c = list(nx.find_cliques(HK))
print(c)
# s = sum(1 for cliq in c)
sum = 0
s = 0
for cliq in c:
  if len(cliq) > 2: 
    s += 1 
    if 'Shoyo Hinata' in cliq: sum += 1
print(sum, s)
# percentage of femal characters
numFem = len(female)
numNodes = HK.number_of_nodes()
print(numFem, numNodes, numFem/numNodes)
# number of edges
print(HK.number_of_edges())

# compute betweeness centrality
bw_centrality = nx.betweenness_centrality(HK, k=10, endpoints=True)
# compute degree centrality
deg_centrality = nx.degree_centrality(HK)
# compute closeness centrality
close_centrality = nx.closeness_centrality(HK)
# compute eigenvector centrality
eigen_centrality = nx.eigenvector_centrality

# Select a list of influential nodes in a graph using VoteRank algorithm
vr = nx.voterank(HK)
pr = nx.pagerank(HK)
print(pr)
print(vr)
print(bw_centrality)
print(deg_centrality)

import networkx as nx
import matplotlib.pyplot as plt

OR = nx.Graph()
OR.add_node("Haruhi Fujioka")
OR.add_nodes_from(["Kyoya Ootori",
                   "Tamaki Suoh",
                   "Kaoru Hitachiin",
                   "Hikaru Hitachiin",
                   "Mitsukuni Haninozuka",
                   "Takashi Morinozuka",

                   "Renge Hoshakuji", #Manager
                  
                   "Umehito Nekozawa", #weak ties with host club but knows renge and tamaki
                   "Kirimi Nekozawa", #fake sis of Tamaki
                   "Kuretake", #maid of the nekozawas

                   "Seika Ayanokoji", #Tamaki's client, Haruhi's enemy
                   "Kanako Kasugazaki", #client of all members, medium tie
                   "Toru Suzushima", #Kanako's fiance

                   "Shiro Takaoji", #Tamaki's steward
                   "Hina Kamishiro", #liked by Shiro

                   "Chizuru Mihara", #want to steal haruhi from ouran
                   "Hinako Tsuwabuki", #likes haruhi but not the other members
                   "Benio Amakusa",

                   "Ryouji Fujioka", #Haruhi's dad, contacting with Kyouya
                   "Kotoko Fujioka", #Haruhi's deceased mother
                   "Isao Sonoda", #Haruhi's dad's coworker, haruhi's employer 

                   "Arai", #Confessed to Haruhi, Hikaru's challenger

                   "Akira Komatsuzawa", #newspaper club president
                   "Chikage Ukyo", #club members
                   "Tomochika Sakyo",                     

                   "Akito Ootori", #Kyouya's brothers
                   "Yuuichi Ootori",
                   "Fuyumi Ootori-Shidou", #sis
                   "Yoshio Ootori", #dad, knows tamaki. 

                   "Yasuchika Haninozuka", #Mitsukuni's brother, doesn't like Mitsukuni               

                   "Soga Kazukiyo", #Classmates of hitachiins, haruhi, renge
                   "Momoka Kurakano",

                   "Ayame Jounouchi", #classmates of suoh and kyoya

                   "Ritsu Kasanoda", #takashi's steward, likes Haruhi
                   "Tetsuya Sendo", #member of kasanoda organization

                   "Yuzuru Suoh", #tamaki's dad, knows kyoya's dad
                   "Shizue Suoh", #grandma. doens't like tamaki
                   "clair Tonnerre", #fiance. knows grandma and tamaki
                   "Shima Maezono", #Tamaki's maid, knows kyouya
                   ])

#10 - Strongest, most pivotal relationships of the anime. Edges given this weight must have the protagonist as one of its endpoints (i.e. must involve the protagonist). 
#9 - Very important relationships, top relationships of non-protagonist or very plot-centric relationships of the protagonist
#8 - Close relationships, should have some plot significance and have a developed story
#7 - Important relationship but not core to the show
#6 - Acquaintances / Once-off / Not very emotionally attached
OR.add_edges_from([("Kyoya Ootori","Haruhi Fujioka", {'weight': 9, 'color': 'blue'}), 
                   
                   ("Tamaki Suoh", "Haruhi Fujioka", {'weight': 10, 'color': 'blue'}), 
                   ("Tamaki Suoh", "Kyoya Ootori", {'weight': 9, 'color': 'blue'}),

                   ("Kaoru Hitachiin", "Haruhi Fujioka", {'weight': 8, 'color': 'blue'}), 
                   ("Kaoru Hitachiin", "Kyoya Ootori", {'weight': 8, 'color': 'blue'}),
                   ("Kaoru Hitachiin", "Tamaki Suoh", {'weight': 8, 'color': 'blue'}),

                   ("Hikaru Hitachiin", "Haruhi Fujioka", {'weight': 9, 'color': 'blue'}), 
                   ("Hikaru Hitachiin", "Kyoya Ootori", {'weight': 8, 'color': 'blue'}),
                   ("Hikaru Hitachiin", "Tamaki Suoh", {'weight': 8, 'color': 'blue'}),
                   ("Hikaru Hitachiin", "Kaoru Hitachiin", {'weight': 9, 'color': 'blue'}),

                   ("Mitsukuni Haninozuka", "Haruhi Fujioka", {'weight': 8, 'color': 'blue'}), 
                   ("Mitsukuni Haninozuka", "Kyoya Ootori", {'weight': 8, 'color': 'blue'}),
                   ("Mitsukuni Haninozuka", "Tamaki Suoh", {'weight': 8, 'color': 'blue'}),
                   ("Mitsukuni Haninozuka", "Kaoru Hitachiin", {'weight': 8, 'color': 'blue'}),
                   ("Mitsukuni Haninozuka", "Hikaru Hitachiin", {'weight': 8, 'color': 'blue'}),

                   ("Takashi Morinozuka", "Haruhi Fujioka", {'weight': 8, 'color': 'blue'}), 
                   ("Takashi Morinozuka", "Kyoya Ootori", {'weight': 8, 'color': 'blue'}),
                   ("Takashi Morinozuka", "Tamaki Suoh", {'weight': 8, 'color': 'blue'}),
                   ("Takashi Morinozuka", "Kaoru Hitachiin", {'weight': 8, 'color': 'blue'}),
                   ("Takashi Morinozuka", "Hikaru Hitachiin", {'weight': 8, 'color': 'blue'}),
                   ("Takashi Morinozuka", "Mitsukuni Haninozuka", {'weight': 9, 'color': 'blue'}),

                   ("Renge Hoshakuji", "Haruhi Fujioka", {'weight': 7, 'color': 'blue'}), 
                   ("Renge Hoshakuji", "Kyoya Ootori", {'weight': 9, 'color': 'blue'}),
                   ("Renge Hoshakuji", "Tamaki Suoh", {'weight': 7, 'color': 'blue'}),
                   ("Renge Hoshakuji", "Kaoru Hitachiin", {'weight': 7, 'color': 'blue'}),
                   ("Renge Hoshakuji", "Hikaru Hitachiin", {'weight': 7, 'color': 'blue'}),
                   ("Renge Hoshakuji", "Mitsukuni Haninozuka", {'weight': 7, 'color': 'blue'}),
                   ("Renge Hoshakuji", "Takashi Morinozuka", {'weight': 7, 'color': 'blue'}),

                   ("Umehito Nekozawa", "Tamaki Suoh", {'weight': 8, 'color': 'red'}),
                   ("Umehito Nekozawa", "Renge Hoshakuji", {'weight': 6, 'color': 'blue'}),

                   ("Kirimi Nekozawa", "Tamaki Suoh", {'weight': 8, 'color': 'blue'}),
                   ("Kirimi Nekozawa", "Umehito Nekozawa", {'weight': 9, 'color': 'blue'}),

                   ("Kuretake", "Umehito Nekozawa", {'weight': 7, 'color': 'blue'}),
                   ("Kuretake", "Kirimi Nekozawa", {'weight': 7, 'color': 'blue'}),

                   ("Seika Ayanokoji", "Haruhi Fujioka", {'weight': 7, 'color': 'red'}), 
                   ("Seika Ayanokoji", "Tamaki Suoh", {'weight': 6, 'color': 'red'}),

                   ("Kanako Kasugazaki", "Haruhi Fujioka", {'weight': 8, 'color': 'blue'}), 
                   ("Kanako Kasugazaki", "Kyoya Ootori", {'weight': 6, 'color': 'blue'}),
                   ("Kanako Kasugazaki", "Tamaki Suoh", {'weight': 6, 'color': 'blue'}),
                   ("Kanako Kasugazaki", "Kaoru Hitachiin", {'weight': 6, 'color': 'blue'}),
                   ("Kanako Kasugazaki", "Hikaru Hitachiin", {'weight': 6, 'color': 'blue'}),
                   ("Kanako Kasugazaki", "Mitsukuni Haninozuka", {'weight': 6, 'color': 'blue'}),
                   ("Kanako Kasugazaki", "Takashi Morinozuka", {'weight': 6, 'color': 'blue'}),

                   ("Toru Suzushima", "Kanako Kasugazaki", {'weight': 9, 'color': 'blue'}),

                   ("Shiro Takaoji", "Tamaki Suoh", {'weight': 8, 'color': 'blue'}),
                   
                   ("Hina Kamishiro", "Shiro Takaoji", {'weight': 9, 'color': 'blue'}),

                   ("Chizuru Mihara", "Haruhi Fujioka", {'weight': 8, 'color': 'blue'}), 

                   ("Hinako Tsuwabuki", "Haruhi Fujioka", {'weight': 8, 'color': 'blue'}), 
                   ("Hinako Tsuwabuki", "Chizuru Mihara", {'weight': 8, 'color': 'blue'}),

                   ("Benio Amakusa", "Haruhi Fujioka", {'weight': 8, 'color': 'blue'}), 
                   ("Benio Amakusa", "Chizuru Mihara", {'weight': 8, 'color': 'blue'}),
                   ("Benio Amakusa", "Hinako Tsuwabuki", {'weight': 8, 'color': 'blue'}), 

                   ("Ryouji Fujioka", "Haruhi Fujioka", {'weight': 9, 'color': 'blue'}), 
                   ("Ryouji Fujioka", "Kyoya Ootori", {'weight': 7, 'color': 'blue'}),
                   ("Ryouji Fujioka", "Tamaki Suoh", {'weight': 8, 'color': 'red'}),
                   ("Ryouji Fujioka", "Kaoru Hitachiin", {'weight': 6, 'color': 'blue'}),
                   ("Ryouji Fujioka", "Hikaru Hitachiin", {'weight': 6, 'color': 'blue'}),
                   ("Ryouji Fujioka", "Mitsukuni Haninozuka", {'weight': 6, 'color': 'blue'}),
                   ("Ryouji Fujioka", "Takashi Morinozuka", {'weight': 6, 'color': 'blue'}),

                   ("Kotoko Fujioka", "Haruhi Fujioka", {'weight': 9, 'color': 'blue'}), 
                   ("Kotoko Fujioka", "Ryouji Fujioka", {'weight': 9, 'color': 'blue'}),

                   ("Isao Sonoda", "Haruhi Fujioka", {'weight': 6, 'color': 'blue'}), 
                   ("Isao Sonoda", "Ryouji Fujioka", {'weight': 7, 'color': 'blue'}),

                   ("Arai", "Haruhi Fujioka", {'weight': 9, 'color': 'blue'}),
                   ("Arai", "Hikaru Hitachiin", {'weight': 8, 'color': 'red'}),

                   ("Akira Komatsuzawa", "Tamaki Suoh", {'weight': 8, 'color': 'red'}),
                   
                   ("Tomochika Sakyo", "Akira Komatsuzawa", {'weight': 8, 'color': 'blue'}),
                  
                   ("Chikage Ukyo", "Akira Komatsuzawa", {'weight': 8, 'color': 'blue'}),
                   ("Chikage Ukyo", "Tomochika Sakyo", {'weight': 8, 'color': 'blue'}),

                   ("Akito Ootori", "Kyoya Ootori", {'weight': 7, 'color': 'blue'}),

                   ("Yuuichi Ootori", "Kyoya Ootori", {'weight': 7, 'color': 'blue'}),
                   ("Yuuichi Ootori", "Akito Ootori", {'weight': 7, 'color': 'blue'}),

                   ("Fuyumi Ootori-Shidou", "Kyoya Ootori", {'weight': 8, 'color': 'blue'}),
                   ("Fuyumi Ootori-Shidou", "Akito Ootori", {'weight': 7, 'color': 'blue'}),
                   ("Fuyumi Ootori-Shidou", "Yuuichi Ootori", {'weight': 7, 'color': 'blue'}),

                   ("Yoshio Ootori", "Kyoya Ootori", {'weight': 8, 'color': 'blue'}),
                   ("Yoshio Ootori", "Akito Ootori", {'weight': 7, 'color': 'blue'}),
                   ("Yoshio Ootori", "Yuuichi Ootori", {'weight': 7, 'color': 'blue'}),
                   ("Yoshio Ootori", "Fuyumi Ootori-Shidou", {'weight': 7, 'color': 'blue'}),
                   ("Yoshio Ootori", "Tamaki Suoh", {'weight': 8, 'color': 'red'}),
                   ("Yoshio Ootori", "Haruhi Fujioka", {'weight': 8, 'color': 'blue'}), 

                   ("Yasuchika Haninozuka", "Mitsukuni Haninozuka", {'weight': 9, 'color': 'red'}),

                   ("Soga Kazukiyo", "Haruhi Fujioka", {'weight': 8, 'color': 'blue'}), 
                   ("Soga Kazukiyo", "Kaoru Hitachiin", {'weight': 6, 'color': 'blue'}),
                   ("Soga Kazukiyo", "Hikaru Hitachiin", {'weight': 6, 'color': 'blue'}),
                   ("Soga Kazukiyo", "Renge Hoshakuji", {'weight': 6, 'color': 'blue'}),

                   ("Momoka Kurakano", "Haruhi Fujioka", {'weight': 8, 'color': 'blue'}), 
                   ("Momoka Kurakano", "Kaoru Hitachiin", {'weight': 6, 'color': 'blue'}),
                   ("Momoka Kurakano", "Hikaru Hitachiin", {'weight': 6, 'color': 'blue'}),
                   ("Momoka Kurakano", "Renge Hoshakuji", {'weight': 6, 'color': 'blue'}),
                   ("Momoka Kurakano", "Soga Kazukiyo", {'weight': 9, 'color': 'blue'}),

                   ("Ayame Jounouchi", "Tamaki Suoh", {'weight': 6, 'color': 'blue'}),
                   ("Ayame Jounouchi", "Kyoya Ootori", {'weight': 6, 'color': 'blue'}),

                   ("Ritsu Kasanoda", "Haruhi Fujioka", {'weight': 9, 'color': 'blue'}), 
                   ("Ritsu Kasanoda", "Takashi Morinozuka", {'weight': 8, 'color': 'blue'}),

                   ("Tetsuya Sendo", "Ritsu Kasanoda", {'weight': 9, 'color': 'blue'}),

                   ("Yuzuru Suoh", "Haruhi Fujioka", {'weight': 8, 'color': 'blue'}), 
                   ("Yuzuru Suoh", "Kyoya Ootori", {'weight': 7, 'color': 'red'}),
                   ("Yuzuru Suoh", "Tamaki Suoh", {'weight': 9, 'color': 'blue'}),
                   ("Yuzuru Suoh", "Yoshio Ootori", {'weight': 7, 'color': 'red'}),
                   ("Yuzuru Suoh", "Akito Ootori", {'weight': 6, 'color': 'red'}),
                   ("Yuzuru Suoh", "Yuuichi Ootori", {'weight': 6, 'color': 'red'}),
                   ("Yuzuru Suoh", "Fuyumi Ootori-Shidou", {'weight': 6, 'color': 'red'}),

                   ("Shizue Suoh", "Yuzuru Suoh", {'weight': 7, 'color': 'red'}),
                   ("Shizue Suoh", "Tamaki Suoh", {'weight': 9, 'color': 'red'}),

                   ("clair Tonnerre", "Tamaki Suoh", {'weight': 9, 'color': 'blue'}),
                   ("clair Tonnerre", "Shizue Suoh", {'weight': 8, 'color': 'blue'}),
                   ("clair Tonnerre", "Haruhi Fujioka", {'weight': 8, 'color': 'red'}), 

                   ("Shima Maezono", "Tamaki Suoh", {'weight': 7, 'color': 'blue'}),
                   ("Shima Maezono", "Kyoya Ootori", {'weight': 6, 'color': 'blue'}),
                   ])

import math as math
edge_widths = [2**e[2]['weight']/64 for e in OR.edges(data=True)]
edge_alphas = [e[2]['weight'] for e in OR.edges(data=True)]
edge_colors = [e[2]['color'] for e in OR.edges(data=True)]


#### draw graphs ####
plt.figure(3,figsize=(11,10)) 
pos = nx.circular_layout(OR)
label_options = {"facecolor": 'white',"alpha": 0.9}
nx.draw(OR, pos,node_size=60,font_size=11, with_labels=True, font_weight='bold', bbox = label_options) 
plt.show()

fig, ax = plt.subplots(figsize=(11, 10))
pos = nx.kamada_kawai_layout(OR)

# compute betweeness centrality
bw_centrality = nx.betweenness_centrality(OR, k=10, endpoints=True)
# compute community structure
lpc = nx.community.label_propagation_communities(OR)
community_index = {n: i for i, com in enumerate(lpc) for n in com}

node_color = [community_index[n] for n in OR]

node_size = [v * 10000 for v in bw_centrality.values()]

cmap = plt.cm.coolwarm
label_options = {"ec": "k", "fc": "white", "alpha": 0.9}
female = ["Haruhi Fujioka",
          "Renge Hoshakuji",
          "Kirimi Nekozawa",
          "Kuretake",
          "Seika Ayanokoji",
          "Kanako Kasugazaki",
          "Hina Kamishiro",
          "Chizuru Mihara", 
          "Hinako Tsuwabuki",
          "Benio Amakusa",
          "Kotoko Fujioka",
          "Fuyumi Ootori-Shidou",
          "Momoka Kurakano",
          "Ayame Jounouchi", 
          "Shizue Suoh", 
          "clair Tonnerre", 
          "Shima Maezono"
          ]
color_map_fm = ['pink' if node in female else 'lightgreen' for node in OR]

nx.draw_networkx(
    OR,
    pos=pos,
    with_labels=True,
    #node_color="indigo",
    node_color=color_map_fm,
    node_size=node_size,
    font_color="black",
    edge_color=edge_colors,
    width=edge_widths,
    edge_cmap=cmap,
    vmin=0,
    vmax=10,
    bbox = label_options
)

# Title/legend
font = {"color": "k", "fontweight": "bold", "fontsize": 15}
font["color"] = "black"

ax.margins(0.1, 0.05)
fig.tight_layout()
plt.axis("off")
plt.legend("")
plt.show()

# number of cliques / sub-complete graphs
c = list(nx.find_cliques(OR))
print(c)
# s = sum(1 for cliq in c)
sum = 0
s = 0
for cliq in c:
  if len(cliq) > 2: 
    s += 1 
    if 'Haruhi Fujioka' in cliq: sum += 1
print(sum, s)

# percentage of femal characters
numFem = len(female)
numNodes = OR.number_of_nodes()
print(numFem, numNodes, numFem/numNodes)

#num edges
print(OR.number_of_edges())

# compute betweeness centrality
bw_centrality = nx.betweenness_centrality(OR, k=10, endpoints=True)
# compute degree centrality
deg_centrality = nx.degree_centrality(OR)
# compute closeness centrality
close_centrality = nx.closeness_centrality(OR)
# compute eigenvector centrality
eigen_centrality = nx.eigenvector_centrality

# Select a list of influential nodes in a graph using VoteRank algorithm
vr = nx.voterank(OR)
pr = nx.pagerank(OR)
print(pr)
print(vr)
print(bw_centrality)
print(deg_centrality)

import networkx as nx
import matplotlib.pyplot as plt

VK = nx.Graph()
VK.add_node("Yuki Kurosu")
VK.add_nodes_from(["Kaname Kuran", #guy lead 1st. Took YUki to Kaien
                   "Haruka Kuran",
                   "Juri Kuran",
                   "Seiren", #Kaname's bodyguard

                   "Zero Kiryu", #guy lead 2nd, hates all vampires
                   "Ichiru Kiryu", #brother of zero
                   "Mrs. Kiryu",
                   "Mr. Kiryu",                 

                   "Kaien Kurosu", #Yuki and Zero are like his children
                   "The President",

                   "Toga Yagari", #hunter + teacher, Zero's master, Yuki doesn't like him

                    #vampire squad
                   "Ruka Souen", #likes Kaname, envies Yuki
                   "Takuma Ichijo", # close with akatsuki
                   "Hanabusa Aido",
                   "Akatsuki Kain",
                   "Shiki Senri", # dating Rima
                   "Rima Touya",

                   "Maria Kurenai",
                   "Shizuka Hio",
                   "Deceased Lover",

                   "Asato Ichijo", #Takuma's grandfather

                   "Sayori Wakaba", #Yuki's roommate

                   "Kasumi Kageyama", #Yuki's class pres
                   "Nadeko Shindo",
                                                    
                   ])

#10 - Strongest, most pivotal relationships of the anime. Edges given this weight must have the protagonist as one of its endpoints (i.e. must involve the protagonist). 
#9 - Very important relationships, top relationships of non-protagonist or very plot-centric relationships of the protagonist
#8 - Close relationships, should have some plot significance and have a developed story
#7 - Important relationship but not core to the show
#6 - Acquaintances / Once-off / Not very emotionally attached
VK.add_edges_from([("Yuki Kurosu", "Kaname Kuran", {'weight': 10, 'color': 'blue'}),
                   
                   ("Haruka Kuran", "Kaname Kuran", {'weight': 9, 'color': 'blue'}),
                  
                   ("Juri Kuran", "Kaname Kuran", {'weight': 9, 'color': 'blue'}),
                   ("Juri Kuran", "Haruka Kuran", {'weight': 7, 'color': 'blue'}),

                   ("Seiren", "Kaname Kuran", {'weight': 6, 'color': 'blue'}),

                   ("Zero Kiryu", "Kaname Kuran", {'weight': 10, 'color': 'red'}),
                   ("Zero Kiryu", "Yuki Kurosu", {'weight': 10, 'color': 'blue'}),
                   
                   ("Ichiru Kiryu", "Zero Kiryu", {'weight': 9, 'color': 'red'}),

                   ("Mrs. Kiryu", "Zero Kiryu", {'weight': 8, 'color': 'blue'}),
                   ("Mrs. Kiryu", "Ichiru Kiryu", {'weight': 8, 'color': 'blue'}),

                   ("Mr. Kiryu", "Zero Kiryu", {'weight': 8, 'color': 'blue'}),
                   ("Mr. Kiryu", "Ichiru Kiryu", {'weight': 8, 'color': 'blue'}),
                   ("Mr. Kiryu", "Mrs. Kiryu", {'weight': 7, 'color': 'blue'}),

                   ("Kaien Kurosu", "Yuki Kurosu", {'weight': 8, 'color': 'blue'}),
                   ("Kaien Kurosu", "Kaname Kuran", {'weight': 8, 'color': 'blue'}),
                   ("Kaien Kurosu", "Zero Kiryu", {'weight': 8, 'color': 'blue'}),

                   ("The President", "Kaien Kurosu", {'weight': 6, 'color': 'red'}),

                   ("Toga Yagari", "Kaien Kurosu", {'weight': 8, 'color': 'blue'}),
                   ("Toga Yagari", "Zero Kiryu", {'weight': 9, 'color': 'blue'}),
                   ("Toga Yagari", "Ichiru Kiryu", {'weight': 9, 'color': 'blue'}),

                   ("Ruka Souen", "Kaname Kuran", {'weight': 9, 'color': 'blue'}),
                   ("Ruka Souen", "Yuki Kurosu", {'weight': 7, 'color': 'red'}),

                   ("Takuma Ichijo", "Kaname Kuran", {'weight': 8, 'color': 'blue'}),
                   ("Takuma Ichijo", "Ruka Souen", {'weight': 7, 'color': 'blue'}),
                   ("Takuma Ichijo", "Yuki Kurosu", {'weight': 10, 'color': 'blue'}),
                   
                   ("Hanabusa Aido", "Kaname Kuran", {'weight': 8, 'color': 'blue'}),
                   ("Hanabusa Aido", "Ruka Souen", {'weight': 7, 'color': 'blue'}),
                   ("Hanabusa Aido", "Yuki Kurosu", {'weight': 8, 'color': 'blue'}),
                   ("Hanabusa Aido", "Takuma Ichijo", {'weight': 7, 'color': 'blue'}),
                   ("Hanabusa Aido", "Zero Kiryu", {'weight': 7, 'color': 'red'}),

                   ("Akatsuki Kain", "Kaname Kuran", {'weight': 10, 'color': 'blue'}),
                   ("Akatsuki Kain", "Ruka Souen", {'weight': 8, 'color': 'blue'}),
                   ("Akatsuki Kain", "Yuki Kurosu", {'weight': 7, 'color': 'blue'}),
                   ("Akatsuki Kain", "Takuma Ichijo", {'weight': 7, 'color': 'blue'}),
                   ("Akatsuki Kain", "Hanabusa Aido", {'weight': 8, 'color': 'blue'}),
                   ("Akatsuki Kain", "Zero Kiryu", {'weight': 7, 'color': 'red'}),

                   ("Shiki Senri", "Kaname Kuran", {'weight': 7, 'color': 'blue'}),
                   ("Shiki Senri", "Ruka Souen", {'weight': 7, 'color': 'blue'}),
                   ("Shiki Senri", "Takuma Ichijo", {'weight': 7, 'color': 'blue'}),
                   ("Shiki Senri", "Hanabusa Aido", {'weight': 7, 'color': 'blue'}),
                   ("Shiki Senri", "Akatsuki Kain", {'weight': 7, 'color': 'blue'}),

                   ("Rima Touya", "Kaname Kuran", {'weight': 7, 'color': 'blue'}),
                   ("Rima Touya", "Ruka Souen", {'weight': 7, 'color': 'blue'}),
                   ("Rima Touya", "Takuma Ichijo", {'weight': 7, 'color': 'blue'}),
                   ("Rima Touya", "Hanabusa Aido", {'weight': 7, 'color': 'blue'}),
                   ("Rima Touya", "Akatsuki Kain", {'weight': 7, 'color': 'blue'}),
                   ("Rima Touya", "Shiki Senri", {'weight': 8, 'color': 'blue'}),

                   ("Maria Kurenai", "Kaname Kuran", {'weight': 9, 'color': 'blue'}),
                   ("Maria Kurenai", "Yuki Kurosu", {'weight': 8, 'color': 'blue'}),
                   ("Maria Kurenai", "Zero Kiryu", {'weight': 9, 'color': 'blue'}),
                   ("Maria Kurenai", "Ichiru Kiryu", {'weight': 9, 'color': 'blue'}),

                   ("Shizuka Hio", "Kaname Kuran", {'weight': 9, 'color': 'blue'}),
                   ("Shizuka Hio", "Yuki Kurosu", {'weight': 8, 'color': 'blue'}),
                   ("Shizuka Hio", "Zero Kiryu", {'weight': 9, 'color': 'red'}),
                   ("Shizuka Hio", "Mr. Kiryu", {'weight': 9, 'color': 'red'}),
                   ("Shizuka Hio", "Mrs. Kiryu", {'weight': 8, 'color': 'red'}),
                   ("Shizuka Hio", "Ichiru Kiryu", {'weight': 8, 'color': 'blue'}),
                   ("Shizuka Hio", "Maria Kurenai", {'weight': 9, 'color': 'blue'}),

                   ("Deceased Lover", "Mr. Kiryu", {'weight': 6, 'color': 'blue'}),
                   ("Deceased Lover", "Mrs. Kiryu", {'weight': 6, 'color': 'blue'}),
                   ("Deceased Lover", "Shizuka Hio", {'weight': 9, 'color': 'blue'}),

                   ("Asato Ichijo", "Takuma Ichijo", {'weight': 9, 'color': 'red'}),
                   ("Asato Ichijo", "Kaname Kuran", {'weight': 8, 'color': 'red'}),

                   ("Sayori Wakaba", "Yuki Kurosu", {'weight': 7, 'color': 'blue'}),
                   ("Sayori Wakaba", "Zero Kiryu", {'weight': 6, 'color': 'blue'}),

                   ("Kasumi Kageyama", "Yuki Kurosu", {'weight': 6, 'color': 'blue'}),
                   ("Kasumi Kageyama", "Zero Kiryu", {'weight': 6, 'color': 'blue'}),
                   ("Kasumi Kageyama", "Ruka Souen", {'weight': 7, 'color': 'blue'}),

                   ("Nadeko Shindo", "Zero Kiryu", {'weight': 6, 'color': 'blue'}),
                   ])

import math as math
edge_widths = [2**e[2]['weight']/64 for e in VK.edges(data=True)]
edge_alphas = [e[2]['weight'] for e in VK.edges(data=True)]
edge_colors = [e[2]['color'] for e in VK.edges(data=True)]


#### draw graphs ####
plt.figure(3,figsize=(11,10)) 
pos = nx.circular_layout(VK)
label_options = {"facecolor": 'white',"alpha": 0.9}
nx.draw(VK, pos,node_size=60,font_size=11, with_labels=True, font_weight='bold', bbox = label_options) 
plt.show()

fig, ax = plt.subplots(figsize=(11, 10))
pos = nx.kamada_kawai_layout(VK)

# compute betweeness centrality
bw_centrality = nx.betweenness_centrality(VK, k=10, endpoints=True)
# compute community structure
lpc = nx.community.label_propagation_communities(VK)
community_index = {n: i for i, com in enumerate(lpc) for n in com}

node_color = [community_index[n] for n in VK]

node_size = [v * 10000 for v in bw_centrality.values()]

cmap = plt.cm.coolwarm
label_options = {"ec": "k", "fc": "white", "alpha": 0.9}
female = ["Yuki Kurosu", 
          "Juri Kuran",
          "Mrs. Kiryu",
          "Rima Touya",
          "Maria Kurenai",
          "Shizuka Hio",
          "Sayori Wakaba",
          "Nadeko Shindo"
          ]
color_map_fm = ['pink' if node in female else 'lightgreen' for node in VK]

nx.draw_networkx(
    VK,
    pos=pos,
    with_labels=True,
    #node_color="indigo",
    node_color=color_map_fm,
    node_size=node_size,
    font_color="black",
    edge_color=edge_colors,
    width=edge_widths,
    edge_cmap=cmap,
    vmin=0,
    vmax=10,
    bbox = label_options
)

# Title/legend
font = {"color": "k", "fontweight": "bold", "fontsize": 15}
font["color"] = "black"

ax.margins(0.1, 0.05)
fig.tight_layout()
plt.axis("off")
plt.legend("")
plt.show()

# number of cliques / sub-complete graphs
c = list(nx.find_cliques(VK))
print(c)
# s = sum(1 for cliq in c)
sum = 0
s = 0
for cliq in c:
  if len(cliq) > 2: 
    s += 1 
    if 'Yuki Kurosu' in cliq: sum += 1
print(sum, s)

# percentage of femal characters
numFem = len(female)
numNodes = VK.number_of_nodes()
print(numFem, numNodes, numFem/numNodes)

#num edges
print(VK.number_of_edges())

# compute betweeness centrality
bw_centrality = nx.betweenness_centrality(VK, k=10, endpoints=True)
# compute degree centrality
deg_centrality = nx.degree_centrality(VK)
# compute closeness centrality
close_centrality = nx.closeness_centrality(VK)
# compute eigenvector centrality
eigen_centrality = nx.eigenvector_centrality

# Select a list of influential nodes in a graph using VoteRank algorithm
vr = nx.voterank(VK)
pr = nx.pagerank(VK)
print(pr)
print(vr)
print(bw_centrality)
print(deg_centrality)

import networkx as nx
import matplotlib.pyplot as plt
import matplotlib as mpl

AOT = nx.Graph()
AOT.add_nodes_from(['Eren Jaeger',
                    'Mikasa Ackerman',
                    'Armin Arlert',
                    'Reiner Braun',
                    'Jean Kirstein',
                    'Connie Springer',
                    'Sasha Braus',
                    'Historia Reiss',
                    'Ymir',
                    'Bertolt Hoover',
                    'Erwin Smith',
                    'Hange Zoe',
                    'Levi Ackerman',
                    'Annie Leonhart',
                    'Floch Forster',
                    'Grisha Jaeger',
                    'Carla Jaeger',
                    'Zeke Jaeger',
                    'Hannes',
                    'Dot Pixis',
                    'Hitch Dreyse',
                    'Kenny Ackerman',
                    'Rod Reiss',
                    'Theo Magath',
                    'Dina Jaeger',
                    'Gabi Braun',
                    'Marcel Galliard',
                    'Porco Galliard',
                    'Pieck Finger',
                    'Falco Grice'])
AOT.add_edges_from([
('Eren Jaeger', 'Mikasa Ackerman', {'weight': 10, 'color': 'blue'}),
('Eren Jaeger', 'Armin Arlert', {'weight': 10, 'color': 'blue'}),
('Eren Jaeger', 'Reiner Braun', {'weight': 8, 'color': 'red'}),
('Eren Jaeger', 'Jean Kirstein', {'weight': 8, 'color': 'blue'}),
('Eren Jaeger', 'Connie Springer', {'weight': 8, 'color': 'blue'}),
('Eren Jaeger', 'Sasha Braus', {'weight': 8, 'color': 'blue'}),
('Eren Jaeger', 'Historia Reiss', {'weight': 8, 'color': 'blue'}),
('Eren Jaeger', 'Ymir', {'weight': 6, 'color': 'blue'}),
('Eren Jaeger', 'Bertolt Hoover', {'weight': 8, 'color': 'red'}),
('Eren Jaeger', 'Erwin Smith', {'weight': 7, 'color': 'blue'}),
('Eren Jaeger', 'Hange Zoe', {'weight': 7, 'color': 'blue'}),
('Eren Jaeger', 'Levi Ackerman', {'weight': 8, 'color': 'blue'}),
('Eren Jaeger', 'Annie Leonhart', {'weight': 7, 'color': 'red'}),
('Eren Jaeger', 'Floch Forster', {'weight': 5, 'color': 'blue'}),
('Eren Jaeger', 'Grisha Jaeger', {'weight': 10, 'color': 'blue'}),
('Eren Jaeger', 'Carla Jaeger', {'weight': 10, 'color': 'blue'}),
('Eren Jaeger', 'Zeke Jaeger', {'weight': 10, 'color': 'red'}),
('Eren Jaeger', 'Hannes', {'weight': 5, 'color': 'blue'}),
('Eren Jaeger', 'Dot Pixis', {'weight': 5, 'color': 'blue'}),
('Eren Jaeger', 'Kenny Ackerman', {'weight': 5, 'color': 'red'}),
('Eren Jaeger', 'Gabi Braun', {'weight': 8, 'color': 'red'}),
('Mikasa Ackerman', 'Armin Arlert', {'weight': 9, 'color': 'blue'}),
('Mikasa Ackerman', 'Reiner Braun', {'weight': 8, 'color': 'red'}),
('Mikasa Ackerman', 'Jean Kirstein', {'weight': 8, 'color': 'blue'}),
('Mikasa Ackerman', 'Connie Springer', {'weight': 8, 'color': 'blue'}),
('Mikasa Ackerman', 'Sasha Braus', {'weight': 8, 'color': 'blue'}),
('Mikasa Ackerman', 'Historia Reiss', {'weight': 8, 'color': 'blue'}),
('Mikasa Ackerman', 'Ymir', {'weight': 6, 'color': 'blue'}),
('Mikasa Ackerman', 'Bertolt Hoover', {'weight': 8, 'color': 'red'}),
('Mikasa Ackerman', 'Erwin Smith', {'weight': 7, 'color': 'blue'}),
('Mikasa Ackerman', 'Hange Zoe', {'weight': 7, 'color': 'blue'}),
('Mikasa Ackerman', 'Levi Ackerman', {'weight': 7, 'color': 'blue'}),
('Mikasa Ackerman', 'Annie Leonhart', {'weight': 7, 'color': 'red'}),
('Mikasa Ackerman', 'Grisha Jaeger', {'weight': 9, 'color': 'blue'}),
('Mikasa Ackerman', 'Carla Jaeger', {'weight': 9, 'color': 'blue'}),
('Mikasa Ackerman', 'Zeke Jaeger', {'weight': 8, 'color': 'red'}),
('Mikasa Ackerman', 'Hannes', {'weight': 5, 'color': 'blue'}),
('Mikasa Ackerman', 'Dot Pixis', {'weight': 5, 'color': 'blue'}),
('Armin Arlert', 'Reiner Braun', {'weight': 8, 'color': 'red'}),
('Armin Arlert', 'Jean Kirstein', {'weight': 8, 'color': 'blue'}),
('Armin Arlert', 'Connie Springer', {'weight': 8, 'color': 'blue'}),
('Armin Arlert', 'Sasha Braus', {'weight': 8, 'color': 'blue'}),
('Armin Arlert', 'Historia Reiss', {'weight': 8, 'color': 'blue'}),
('Armin Arlert', 'Ymir', {'weight': 6, 'color': 'blue'}),
('Armin Arlert', 'Bertolt Hoover', {'weight': 8, 'color': 'red'}),
('Armin Arlert', 'Erwin Smith', {'weight': 7, 'color': 'blue'}),
('Armin Arlert', 'Hange Zoe', {'weight': 7, 'color': 'blue'}),
('Armin Arlert', 'Levi Ackerman', {'weight': 7, 'color': 'blue'}),
('Armin Arlert', 'Annie Leonhart', {'weight': 7, 'color': 'red'}),
('Armin Arlert', 'Grisha Jaeger', {'weight': 6, 'color': 'blue'}),
('Armin Arlert', 'Carla Jaeger', {'weight': 6, 'color': 'blue'}),
('Armin Arlert', 'Zeke Jaeger', {'weight': 8, 'color': 'red'}),
('Armin Arlert', 'Hannes', {'weight': 5, 'color': 'blue'}),
('Armin Arlert', 'Dot Pixis', {'weight': 5, 'color': 'blue'}),
('Reiner Braun', 'Jean Kirstein', {'weight': 7, 'color': 'red'}),
('Reiner Braun', 'Connie Springer', {'weight': 7, 'color': 'red'}),
('Reiner Braun', 'Sasha Braus', {'weight': 7, 'color': 'red'}),
('Reiner Braun', 'Historia Reiss', {'weight': 7, 'color': 'red'}),
('Reiner Braun', 'Ymir', {'weight': 5, 'color': 'red'}),
('Reiner Braun', 'Bertolt Hoover', {'weight': 9, 'color': 'blue'}),
('Reiner Braun', 'Erwin Smith', {'weight': 7, 'color': 'red'}),
('Reiner Braun', 'Hange Zoe', {'weight': 7, 'color': 'red'}),
('Reiner Braun', 'Levi Ackerman', {'weight': 7, 'color': 'red'}),
('Reiner Braun', 'Annie Leonhart', {'weight': 9, 'color': 'blue'}),
('Reiner Braun', 'Grisha Jaeger', {'weight': 8, 'color': 'red'}),
('Reiner Braun', 'Zeke Jaeger', {'weight': 8, 'color': 'blue'}),
('Reiner Braun', 'Theo Magath', {'weight': 7, 'color': 'blue'}),
('Reiner Braun', 'Gabi Braun', {'weight': 9, 'color': 'blue'}),
('Reiner Braun', 'Marcel Galliard', {'weight': 7, 'color': 'blue'}),
('Reiner Braun', 'Porco Galliard', {'weight': 7, 'color': 'blue'}),
('Reiner Braun', 'Pieck Finger', {'weight': 7, 'color': 'blue'}),
('Reiner Braun', 'Falco Grice', {'weight': 7, 'color': 'blue'}),
('Jean Kirstein', 'Connie Springer', {'weight': 8, 'color': 'blue'}),
('Jean Kirstein', 'Sasha Braus', {'weight': 8, 'color': 'blue'}),
('Jean Kirstein', 'Historia Reiss', {'weight': 6, 'color': 'blue'}),
('Jean Kirstein', 'Ymir', {'weight': 5, 'color': 'blue'}),
('Jean Kirstein', 'Bertolt Hoover', {'weight': 7, 'color': 'red'}),
('Jean Kirstein', 'Erwin Smith', {'weight': 7, 'color': 'blue'}),
('Jean Kirstein', 'Hange Zoe', {'weight': 7, 'color': 'blue'}),
('Jean Kirstein', 'Levi Ackerman', {'weight': 7, 'color': 'blue'}),
('Jean Kirstein', 'Annie Leonhart', {'weight': 7, 'color': 'red'}),
('Jean Kirstein', 'Zeke Jaeger', {'weight': 7, 'color': 'red'}),
('Connie Springer', 'Sasha Braus', {'weight': 8, 'color': 'blue'}),
('Connie Springer', 'Historia Reiss', {'weight': 6, 'color': 'blue'}),
('Connie Springer', 'Ymir', {'weight': 5, 'color': 'blue'}),
('Connie Springer', 'Bertolt Hoover', {'weight': 7, 'color': 'red'}),
('Connie Springer', 'Erwin Smith', {'weight': 7, 'color': 'blue'}),
('Connie Springer', 'Hange Zoe', {'weight': 7, 'color': 'blue'}),
('Connie Springer', 'Levi Ackerman', {'weight': 7, 'color': 'blue'}),
('Connie Springer', 'Annie Leonhart', {'weight': 7, 'color': 'red'}),
('Connie Springer', 'Zeke Jaeger', {'weight': 7, 'color': 'red'}),
('Sasha Braus', 'Historia Reiss', {'weight': 6, 'color': 'blue'}),
('Sasha Braus', 'Ymir', {'weight': 5, 'color': 'blue'}),
('Sasha Braus', 'Bertolt Hoover', {'weight': 7, 'color': 'red'}),
('Sasha Braus', 'Erwin Smith', {'weight': 7, 'color': 'blue'}),
('Sasha Braus', 'Hange Zoe', {'weight': 7, 'color': 'blue'}),
('Sasha Braus', 'Levi Ackerman', {'weight': 7, 'color': 'blue'}),
('Sasha Braus', 'Annie Leonhart', {'weight': 7, 'color': 'red'}),
('Sasha Braus', 'Zeke Jaeger', {'weight': 7, 'color': 'red'}),
('Historia Reiss', 'Ymir', {'weight': 8, 'color': 'blue'}),
('Historia Reiss', 'Bertolt Hoover', {'weight': 7, 'color': 'red'}),
('Historia Reiss', 'Erwin Smith', {'weight': 7, 'color': 'blue'}),
('Historia Reiss', 'Hange Zoe', {'weight': 7, 'color': 'blue'}),
('Historia Reiss', 'Levi Ackerman', {'weight': 7, 'color': 'blue'}),
('Historia Reiss', 'Annie Leonhart', {'weight': 7, 'color': 'red'}),
('Historia Reiss', 'Kenny Ackerman', {'weight': 6, 'color': 'red'}),
('Historia Reiss', 'Rod Reiss', {'weight': 8, 'color': 'red'}),
('Ymir', 'Bertolt Hoover',  {'weight': 7, 'color': 'red'}),
('Ymir', 'Erwin Smith', {'weight': 6, 'color': 'blue'}),
('Ymir', 'Hange Zoe', {'weight': 6, 'color': 'blue'}),
('Ymir', 'Levi Ackerman', {'weight': 6, 'color': 'blue'}),
('Ymir', 'Annie Leonhart', {'weight': 7, 'color': 'red'}),
('Ymir', 'Marcel Galliard', {'weight': 5, 'color': 'red'}),
('Bertolt Hoover', 'Erwin Smith', {'weight': 7, 'color': 'red'}),
('Bertolt Hoover', 'Hange Zoe', {'weight': 7, 'color': 'red'}),
('Bertolt Hoover', 'Levi Ackerman', {'weight': 7, 'color': 'red'}),
('Bertolt Hoover', 'Annie Leonhart', {'weight': 9, 'color': 'blue'}),
('Bertolt Hoover', 'Grisha Jaeger', {'weight': 8, 'color': 'red'}),
('Bertolt Hoover', 'Zeke Jaeger', {'weight': 8, 'color': 'blue'}),
('Bertolt Hoover', 'Theo Magath', {'weight': 7, 'color': 'blue'}),
('Bertolt Hoover', 'Gabi Braun', {'weight': 7, 'color': 'blue'}),
('Bertolt Hoover', 'Marcel Galliard', {'weight': 7, 'color': 'blue'}),
('Bertolt Hoover', 'Porco Galliard', {'weight': 7, 'color': 'blue'}),
('Bertolt Hoover', 'Pieck Finger', {'weight': 7, 'color': 'blue'}),
('Bertolt Hoover', 'Falco Grice', {'weight': 7, 'color': 'blue'}),
('Erwin Smith', 'Hange Zoe', {'weight': 8, 'color': 'blue'}),
('Erwin Smith', 'Levi Ackerman', {'weight': 8, 'color': 'blue'}),
('Erwin Smith', 'Annie Leonhart', {'weight': 7, 'color': 'red'}),
('Erwin Smith', 'Zeke Jaeger', {'weight': 7, 'color': 'red'}),
('Erwin Smith', 'Dot Pixis', {'weight': 6, 'color': 'blue'}),
('Hange Zoe', 'Levi Ackerman', {'weight': 8, 'color': 'blue'}),
('Hange Zoe', 'Annie Leonhart', {'weight': 7, 'color': 'red'}),
('Hange Zoe', 'Zeke Jaeger', {'weight': 7, 'color': 'red'}),
('Levi Ackerman', 'Annie Leonhart', {'weight': 7, 'color': 'red'}),
('Levi Ackerman', 'Zeke Jaeger', {'weight': 7, 'color': 'red'}),
('Levi Ackerman', 'Kenny Ackerman', {'weight': 8, 'color': 'red'}),
('Annie Leonhart', 'Grisha Jaeger', {'weight': 8, 'color': 'red'}),
('Annie Leonhart', 'Zeke Jaeger', {'weight': 8, 'color': 'blue'}),
('Annie Leonhart', 'Hitch Dreyse', {'weight': 7, 'color': 'blue'}),
('Annie Leonhart', 'Theo Magath', {'weight': 7, 'color': 'blue'}),
('Annie Leonhart', 'Gabi Braun', {'weight': 7, 'color': 'blue'}),
('Annie Leonhart', 'Marcel Galliard', {'weight': 7, 'color': 'blue'}),
('Annie Leonhart', 'Porco Galliard', {'weight': 7, 'color': 'blue'}),
('Annie Leonhart', 'Pieck Finger', {'weight': 7, 'color': 'blue'}),
('Annie Leonhart', 'Falco Grice', {'weight': 7, 'color': 'blue'}),
('Floch Forster', 'Zeke Jaeger', {'weight': 5, 'color': 'blue'}),
('Grisha Jaeger', 'Carla Jaeger', {'weight': 9, 'color': 'blue'}),
('Grisha Jaeger', 'Zeke Jaeger', {'weight': 9, 'color': 'blue'}),
('Grisha Jaeger', 'Rod Reiss', {'weight': 6, 'color': 'red'}),
('Grisha Jaeger', 'Dina Jaeger', {'weight': 9, 'color': 'blue'}),
('Carla Jaeger', 'Hannes', {'weight': 5, 'color': 'blue'}),
('Zeke Jaeger', 'Theo Magath', {'weight': 6, 'color': 'red'}),
('Zeke Jaeger', 'Dina Jaeger', {'weight': 9, 'color': 'blue'}),
('Zeke Jaeger', 'Gabi Braun', {'weight': 7, 'color': 'blue'}),
('Zeke Jaeger', 'Marcel Galliard', {'weight': 7, 'color': 'blue'}),
('Zeke Jaeger', 'Porco Galliard', {'weight': 7, 'color': 'blue'}),
('Zeke Jaeger', 'Pieck Finger', {'weight': 7, 'color': 'blue'}),
('Zeke Jaeger', 'Falco Grice', {'weight': 7, 'color': 'blue'}),
('Hannes', 'Dot Pixis', {'weight': 5, 'color': 'blue'}),
('Kenny Ackerman', 'Rod Reiss', {'weight': 8, 'color': 'blue'}),
('Theo Magath', 'Gabi Braun', {'weight': 7, 'color': 'blue'}),
('Theo Magath', 'Marcel Galliard', {'weight': 7, 'color': 'blue'}),
('Theo Magath', 'Porco Galliard', {'weight': 7, 'color': 'blue'}),
('Theo Magath', 'Pieck Finger', {'weight': 7, 'color': 'blue'}),
('Theo Magath', 'Falco Grice', {'weight': 7, 'color': 'blue'}),
('Gabi Braun', 'Marcel Galliard', {'weight': 7, 'color': 'blue'}),
('Gabi Braun', 'Porco Galliard', {'weight': 7, 'color': 'blue'}),
('Gabi Braun', 'Pieck Finger', {'weight': 7, 'color': 'blue'}),
('Gabi Braun', 'Falco Grice', {'weight': 8, 'color': 'blue'}),
('Marcel Galliard', 'Porco Galliard', {'weight': 8, 'color': 'blue'}),
('Marcel Galliard', 'Pieck Finger', {'weight': 7, 'color': 'blue'}),
('Marcel Galliard', 'Falco Grice', {'weight': 7, 'color': 'blue'}),
('Porco Galliard', 'Pieck Finger', {'weight': 7, 'color': 'blue'}),
('Porco Galliard', 'Falco Grice', {'weight': 7, 'color': 'blue'}),
('Pieck Finger', 'Falco Grice', {'weight': 7, 'color': 'blue'})
 ])

# Draw Graphs
plt.figure(3,figsize=(11,10)) 
pos = nx.circular_layout(AOT)
label_options = {"facecolor": 'white',"alpha": 0.9}
nx.draw(AOT, pos,node_size=60,font_size=11, with_labels=True, font_weight='bold', bbox = label_options) 
plt.show()

fig, ax = plt.subplots(figsize=(15, 15))
#pos = nx.spring_layout(OR, k=0.15, seed=4572320)
#pos = nx.kamada_kawai_layout(AOT)
pos = nx.kamada_kawai_layout(AOT)

# compute centrality
centrality = nx.betweenness_centrality(AOT, k=10, endpoints=True)

# compute community structure
lpc = nx.community.label_propagation_communities(AOT)
community_index = {n: i for i, com in enumerate(lpc) for n in com}

node_color = [community_index[n] for n in AOT]
node_size = [v * 10000 for v in centrality.values()]
cmap = plt.cm.coolwarm
label_options = {"ec": "k", "fc": "white", "alpha": 0.9}
female = ['Mikasa Ackerman',
          'Sasha Braus',
          'Historia Reiss',
          'Ymir',
          'Hange Zoe',
          'Annie Leonhart',
          'Carla Jaeger',
          'Hitch Dreyse',
          'Dina Jaeger',
          'Gabi Braun',
          'Pieck Finger']

color_map_fm = ['pink' if node in female else 'lightgreen' for node in AOT]

edge_widths = [2**e[2]['weight']/64 for e in AOT.edges(data=True)] # adjustable
edge_alphas = [e[2]['weight'] for e in AOT.edges(data=True)]
edge_colors = [e[2]['color'] for e in AOT.edges(data=True)]

nx.draw_networkx(
    AOT,
    pos=pos,
    with_labels=True,
    #node_color="indigo",
    node_color=color_map_fm,
    node_size=node_size,
    font_color="black",
    #edge_color=edge_alphas,
    edge_color=edge_colors,
    width=edge_widths,
    edge_cmap=cmap,
    vmin=0,
    vmax=10,
    bbox = label_options
)

# Title/legend
font = {"color": "k", "fontweight": "bold", "fontsize": 15}
# ax.set_title("Attack on Titan Character Network", font)
# Change font color for legend
font["color"] = "black"


# Resize figure for label readibility
# ax.margins(0.1, 0.05)
# fig.tight_layout()
# # Add colorbar
# sm = plt.cm.ScalarMappable(cmap=cmap, norm=plt.Normalize(vmin = 0, vmax=10))
# sm._A = []
# ax = plt.gca()
# ax.set_axis_off()
# plt.colorbar(sm, ax=ax)
plt.axis("off")
plt.show()

# Attack on Titan calculations

# number of cliques / sub-complete graphs
c = list(nx.find_cliques(AOT))
print(c)
# s = sum(1 for cliq in c)
sum = 0
s = 0
for cliq in c:
  s += 1
  if 'Eren Jaeger' in cliq: sum += 1
print(s, sum)

# percentage of female characters
numFem = len(female)
numNodes = AOT.number_of_nodes()
print(numFem, numNodes, numFem/numNodes)

#num edges
print(AOT.number_of_edges())

# compute betweeness centrality
bw_centrality = nx.betweenness_centrality(AOT, k=10, endpoints=True)
# compute degree centrality
deg_centrality = nx.degree_centrality(AOT)
# compute closeness centrality
close_centrality = nx.closeness_centrality(AOT)
# compute eigenvector centrality
eigen_centrality = nx.eigenvector_centrality

# Select a list of influential nodes in a graph using VoteRank algorithm
vr = nx.voterank(AOT)
pr = nx.pagerank(AOT)
print(pr)
print(vr)
print(bw_centrality)
print(deg_centrality)

# average negativity
avg_red_weight = 0;
num_red = 0;
for e in AOT.edges(data=True):
  if e[2]['color'] == "red": 
    avg_red_weight += e[2]['weight'] 
    num_red += 1;
avg_red_weight /= num_red
print(avg_red_weight)

# percent negative
print(num_red / AOT.number_of_edges())

import networkx as nx
import matplotlib.pyplot as plt
import matplotlib as mpl

FB = nx.Graph()
FB.add_nodes_from(['Tohru Honda',
'Kyo Sohma',
'Yuki Sohma',
'Akito Sohma',
'Shigure Sohma',
'Hatori Sohma',
'Hatsuharu Sohma',
'Momiji Sohma',
'Arisa Uotani',
'Saki Hanajima',
'Kagura Sohma',
'Ayame Sohma',
'Kisa Sohma',
'Hiro Sohma',
'Ritsu Sohma',
'Rin Sohma',
'Kureno Sohma',
'Katsuya Honda',
'Kyoko Honda',
'Kakeru Manabe',
'Machi Kuragi',
'Mitsuru',
'Kazuma Sohma',
'Ren Sohma',
'Kimi Todo',
'Naohito Sakuragi',
'Mayuko Shiraki',
'Mine Kuramae',
'Akira Sohma',
'Kana Sohma'
])
FB.add_edges_from([
('Tohru Honda', 'Kyo Sohma', {'weight': 10, 'color': 'blue'}),
('Tohru Honda', 'Yuki Sohma', {'weight': 10, 'color': 'blue'}),
('Tohru Honda', 'Akito Sohma', {'weight': 6, 'color': 'red'}),
('Tohru Honda', 'Shigure Sohma', {'weight': 8, 'color': 'blue'}),
('Tohru Honda', 'Hatori Sohma', {'weight': 7, 'color': 'blue'}),
('Tohru Honda', 'Hatsuharu Sohma', {'weight': 7, 'color': 'blue'}),
('Tohru Honda', 'Momiji Sohma', {'weight': 7, 'color': 'blue'}),
('Tohru Honda', 'Arisa Uotani', {'weight': 8, 'color': 'blue'}),
('Tohru Honda', 'Saki Hanajima', {'weight': 8, 'color': 'blue'}),
('Tohru Honda', 'Kagura Sohma', {'weight': 6, 'color': 'blue'}),
('Tohru Honda', 'Ayame Sohma', {'weight': 6, 'color': 'blue'}),
('Tohru Honda', 'Kisa Sohma', {'weight': 6, 'color': 'blue'}),
('Tohru Honda', 'Hiro Sohma', {'weight': 6, 'color': 'blue'}),
('Tohru Honda', 'Ritsu Sohma', {'weight': 6, 'color': 'blue'}),
('Tohru Honda', 'Rin Sohma', {'weight': 7, 'color': 'blue'}),
('Tohru Honda', 'Kureno Sohma', {'weight': 5, 'color': 'red'}),
('Tohru Honda', 'Katsuya Honda', {'weight': 9, 'color': 'blue'}),
('Tohru Honda', 'Kyoko Honda', {'weight': 10, 'color': 'blue'}),
('Tohru Honda', 'Kakeru Manabe', {'weight': 6, 'color': 'blue'}),
('Tohru Honda', 'Machi Kuragi', {'weight': 6, 'color': 'blue'}),
('Tohru Honda', 'Kazuma Sohma', {'weight': 6, 'color': 'blue'}),
('Tohru Honda', 'Mayuko Shiraki', {'weight': 5, 'color': 'blue'}),
('Kyo Sohma', 'Yuki Sohma', {'weight': 9, 'color': 'red'}),
('Kyo Sohma', 'Akito Sohma', {'weight': 9, 'color': 'red'}),
('Kyo Sohma', 'Shigure Sohma', {'weight': 8, 'color': 'blue'}),
('Kyo Sohma', 'Hatori Sohma', {'weight': 7, 'color': 'blue'}),
('Kyo Sohma', 'Hatsuharu Sohma', {'weight': 7, 'color': 'blue'}),
('Kyo Sohma', 'Momiji Sohma', {'weight': 7, 'color': 'blue'}),
('Kyo Sohma', 'Arisa Uotani', {'weight': 5, 'color': 'blue'}),
('Kyo Sohma', 'Saki Hanajima', {'weight': 5, 'color': 'blue'}),
('Kyo Sohma', 'Kagura Sohma', {'weight': 7, 'color': 'red'}),
('Kyo Sohma', 'Ayame Sohma', {'weight': 6, 'color': 'blue'}),
('Kyo Sohma', 'Kisa Sohma', {'weight': 6, 'color': 'blue'}),
('Kyo Sohma', 'Hiro Sohma', {'weight': 6, 'color': 'blue'}),
('Kyo Sohma', 'Ritsu Sohma', {'weight': 6, 'color': 'blue'}),
('Kyo Sohma', 'Rin Sohma', {'weight': 6, 'color': 'blue'}),
('Kyo Sohma', 'Kureno Sohma', {'weight': 5, 'color': 'red'}),
('Kyo Sohma', 'Kyoko Honda', {'weight': 8, 'color': 'blue'}),
('Kyo Sohma', 'Kazuma Sohma', {'weight': 9, 'color': 'blue'}),
('Kyo Sohma', 'Mayuko Shiraki', {'weight': 5, 'color': 'blue'}),
('Yuki Sohma', 'Akito Sohma', {'weight': 9, 'color': 'red'}),
('Yuki Sohma', 'Shigure Sohma', {'weight': 8, 'color': 'blue'}),
('Yuki Sohma', 'Hatori Sohma', {'weight': 7, 'color': 'blue'}),
('Yuki Sohma', 'Hatsuharu Sohma', {'weight': 7, 'color': 'blue'}),
('Yuki Sohma', 'Momiji Sohma', {'weight': 7, 'color': 'blue'}),
('Yuki Sohma', 'Arisa Uotani', {'weight': 5, 'color': 'blue'}),
('Yuki Sohma', 'Saki Hanajima', {'weight': 5, 'color': 'blue'}),
('Yuki Sohma', 'Kagura Sohma', {'weight': 7, 'color': 'blue'}),
('Yuki Sohma', 'Ayame Sohma', {'weight': 8, 'color': 'blue'}),
('Yuki Sohma', 'Kisa Sohma', {'weight': 6, 'color': 'blue'}),
('Yuki Sohma', 'Hiro Sohma', {'weight': 6, 'color': 'blue'}),
('Yuki Sohma', 'Ritsu Sohma', {'weight': 6, 'color': 'blue'}),
('Yuki Sohma', 'Rin Sohma', {'weight': 6, 'color': 'blue'}),
('Yuki Sohma', 'Kureno Sohma', {'weight': 5, 'color': 'red'}),
('Yuki Sohma', 'Kakeru Manabe', {'weight': 8, 'color': 'blue'}),
('Yuki Sohma', 'Machi Kuragi', {'weight': 8, 'color': 'blue'}),
('Yuki Sohma', 'Kazuma Sohma', {'weight': 5, 'color': 'blue'}),
('Yuki Sohma', 'Kimi Todo', {'weight': 6, 'color': 'blue'}),
('Yuki Sohma', 'Naohito Sakuragi', {'weight': 6, 'color': 'blue'}),
('Yuki Sohma', 'Mayuko Shiraki', {'weight': 5, 'color': 'blue'}),
('Yuki Sohma', 'Mine Kuramae', {'weight': 5, 'color': 'blue'}),
('Akito Sohma', 'Shigure Sohma', {'weight': 9, 'color': 'blue'}),
('Akito Sohma', 'Hatori Sohma', {'weight': 8, 'color': 'red'}),
('Akito Sohma', 'Hatsuharu Sohma', {'weight': 8, 'color': 'red'}),
('Akito Sohma', 'Momiji Sohma', {'weight': 8, 'color': 'red'}),
('Akito Sohma', 'Kagura Sohma', {'weight': 7, 'color': 'red'}),
('Akito Sohma', 'Ayame Sohma', {'weight': 6, 'color': 'red'}),
('Akito Sohma', 'Kisa Sohma', {'weight': 6, 'color': 'red'}),
('Akito Sohma', 'Hiro Sohma', {'weight': 6, 'color': 'red'}),
('Akito Sohma', 'Ritsu Sohma', {'weight': 6, 'color': 'red'}),
('Akito Sohma', 'Rin Sohma', {'weight': 8, 'color': 'red'}),
('Akito Sohma', 'Kureno Sohma', {'weight': 8, 'color': 'blue'}),
('Akito Sohma', 'Kazuma Sohma', {'weight': 6, 'color': 'red'}),
('Akito Sohma', 'Ren Sohma', {'weight': 9, 'color': 'red'}),
('Akito Sohma', 'Akira Sohma', {'weight': 8, 'color': 'blue'}),
('Akito Sohma', 'Kana Sohma', {'weight': 6, 'color': 'red'}),
('Shigure Sohma', 'Hatori Sohma', {'weight': 8, 'color': 'blue'}),
('Shigure Sohma', 'Hatsuharu Sohma', {'weight': 7, 'color': 'blue'}),
('Shigure Sohma', 'Momiji Sohma', {'weight': 7, 'color': 'blue'}),
('Shigure Sohma', 'Kagura Sohma', {'weight': 6, 'color': 'blue'}),
('Shigure Sohma', 'Ayame Sohma', {'weight': 8, 'color': 'blue'}),
('Shigure Sohma', 'Kisa Sohma', {'weight': 6, 'color': 'blue'}),
('Shigure Sohma', 'Hiro Sohma', {'weight': 6, 'color': 'blue'}),
('Shigure Sohma', 'Ritsu Sohma', {'weight': 6, 'color': 'blue'}),
('Shigure Sohma', 'Rin Sohma', {'weight': 6, 'color': 'blue'}),
('Shigure Sohma', 'Kureno Sohma', {'weight': 6, 'color': 'red'}),
('Shigure Sohma', 'Mitsuru', {'weight': 5, 'color': 'blue'}),
('Shigure Sohma', 'Kazuma Sohma', {'weight': 5, 'color': 'blue'}),
('Hatori Sohma', 'Hatsuharu Sohma', {'weight': 7, 'color': 'blue'}),
('Hatori Sohma', 'Momiji Sohma', {'weight': 7, 'color': 'blue'}),
('Hatori Sohma', 'Kagura Sohma', {'weight': 6, 'color': 'blue'}),
('Hatori Sohma', 'Ayame Sohma', {'weight': 8, 'color': 'blue'}),
('Hatori Sohma', 'Kisa Sohma', {'weight': 6, 'color': 'blue'}),
('Hatori Sohma', 'Hiro Sohma', {'weight': 6, 'color': 'blue'}),
('Hatori Sohma', 'Ritsu Sohma', {'weight': 6, 'color': 'blue'}),
('Hatori Sohma', 'Rin Sohma', {'weight': 6, 'color': 'blue'}),
('Hatori Sohma', 'Kureno Sohma', {'weight': 6, 'color': 'red'}),
('Hatori Sohma', 'Kana Sohma', {'weight': 8, 'color': 'blue'}),
('Hatsuharu Sohma', 'Momiji Sohma', {'weight': 7, 'color': 'blue'}),
('Hatsuharu Sohma', 'Kagura Sohma', {'weight': 6, 'color': 'blue'}),
('Hatsuharu Sohma', 'Ayame Sohma', {'weight': 6, 'color': 'blue'}),
('Hatsuharu Sohma', 'Kisa Sohma', {'weight': 6, 'color': 'blue'}),
('Hatsuharu Sohma', 'Hiro Sohma', {'weight': 6, 'color': 'blue'}),
('Hatsuharu Sohma', 'Ritsu Sohma', {'weight': 6, 'color': 'blue'}),
('Hatsuharu Sohma', 'Rin Sohma', {'weight': 8, 'color': 'blue'}),
('Hatsuharu Sohma', 'Kureno Sohma', {'weight': 6, 'color': 'red'}),
('Momiji Sohma', 'Kagura Sohma', {'weight': 6, 'color': 'blue'}),
('Momiji Sohma', 'Ayame Sohma', {'weight': 6, 'color': 'blue'}),
('Momiji Sohma', 'Kisa Sohma', {'weight': 6, 'color': 'blue'}),
('Momiji Sohma', 'Hiro Sohma', {'weight': 6, 'color': 'blue'}),
('Momiji Sohma', 'Ritsu Sohma', {'weight': 6, 'color': 'blue'}),
('Momiji Sohma', 'Rin Sohma', {'weight': 6, 'color': 'blue'}),
('Momiji Sohma', 'Kureno Sohma', {'weight': 6, 'color': 'red'}),
('Arisa Uotani', 'Saki Hanajima', {'weight': 8, 'color': 'blue'}),
('Arisa Uotani', 'Kyoko Honda', {'weight': 8, 'color': 'blue'}),
('Arisa Uotani', 'Mayuko Shiraki', {'weight': 5, 'color': 'blue'}),
('Saki Hanajima', 'Kyoko Honda', {'weight': 6, 'color': 'blue'}),
('Saki Hanajima', 'Mayuko Shiraki', {'weight': 5, 'color': 'blue'}),
('Kagura Sohma', 'Ayame Sohma', {'weight': 6, 'color': 'blue'}),
('Kagura Sohma', 'Kisa Sohma', {'weight': 6, 'color': 'blue'}),
('Kagura Sohma', 'Hiro Sohma', {'weight': 6, 'color': 'blue'}),
('Kagura Sohma', 'Ritsu Sohma', {'weight': 6, 'color': 'blue'}),
('Kagura Sohma', 'Rin Sohma', {'weight': 6, 'color': 'blue'}),
('Kagura Sohma', 'Kureno Sohma', {'weight': 6, 'color': 'red'}),
('Ayame Sohma', 'Kisa Sohma', {'weight': 6, 'color': 'blue'}),
('Ayame Sohma', 'Hiro Sohma', {'weight': 6, 'color': 'blue'}),
('Ayame Sohma', 'Ritsu Sohma', {'weight': 6, 'color': 'blue'}),
('Ayame Sohma', 'Rin Sohma', {'weight': 6, 'color': 'blue'}),
('Ayame Sohma', 'Kureno Sohma', {'weight': 6, 'color': 'red'}),
('Ayame Sohma', 'Mine Kuramae', {'weight': 8, 'color': 'blue'}),
('Kisa Sohma', 'Hiro Sohma', {'weight': 7, 'color': 'blue'}),
('Kisa Sohma', 'Ritsu Sohma', {'weight': 6, 'color': 'blue'}),
('Kisa Sohma', 'Rin Sohma', {'weight': 6, 'color': 'blue'}),
('Kisa Sohma', 'Kureno Sohma', {'weight': 6, 'color': 'red'}),
('Hiro Sohma', 'Ritsu Sohma', {'weight': 6, 'color': 'blue'}),
('Hiro Sohma', 'Rin Sohma', {'weight': 6, 'color': 'blue'}),
('Hiro Sohma', 'Kureno Sohma', {'weight': 6, 'color': 'red'}),
('Ritsu Sohma', 'Rin Sohma', {'weight': 6, 'color': 'blue'}),
('Ritsu Sohma', 'Kureno Sohma', {'weight': 6, 'color': 'red'}),
('Rin Sohma', 'Kureno Sohma', {'weight': 6, 'color': 'red'}),
('Katsuya Honda', 'Kyoko Honda', {'weight': 9, 'color': 'blue'}),
('Kakeru Manabe', 'Machi Kuragi', {'weight': 8, 'color': 'blue'}),
('Kakeru Manabe', 'Kimi Todo', {'weight': 7, 'color': 'blue'}),
('Kakeru Manabe', 'Naohito Sakuragi', {'weight': 7, 'color': 'blue'}),
('Machi Kuragi', 'Kimi Todo', {'weight': 7, 'color': 'blue'}),
('Machi Kuragi', 'Naohito Sakuragi', {'weight': 7, 'color': 'blue'}),
('Ren Sohma', 'Akira Sohma', {'weight': 8, 'color': 'blue'}),
('Kimi Todo', 'Naohito Sakuragi', {'weight': 7, 'color': 'blue'})
 ])

# Draw Graphs
plt.figure(3,figsize=(11,10)) 
pos = nx.circular_layout(FB)
label_options = {"facecolor": 'white',"alpha": 0.9}
nx.draw(FB, pos,node_size=60,font_size=11, with_labels=True, font_weight='bold', bbox = label_options) 
plt.show()

fig, ax = plt.subplots(figsize=(15, 15))
#pos = nx.spring_layout(OR, k=0.15, seed=4572320)
pos = nx.kamada_kawai_layout(FB)
# pos = nx.circular_layout(FB)

# compute centrality
centrality = nx.betweenness_centrality(FB, k=10, endpoints=True)

# compute community structure
lpc = nx.community.label_propagation_communities(FB)
community_index = {n: i for i, com in enumerate(lpc) for n in com}

node_color = [community_index[n] for n in FB]
node_size = [v * 10000 for v in centrality.values()]
cmap = plt.cm.coolwarm
label_options = {"ec": "k", "fc": "white", "alpha": 0.9}
female = ['Tohru Honda',
'Akito Sohma',
'Arisa Uotani',
'Saki Hanajima',
'Kagura Sohma',
'Kisa Sohma',
'Rin Sohma',
'Kyoko Honda',
'Machi Kuragi',
'Mitsuru',
'Ren Sohma',
'Kimi Todo',
'Mayuko Shiraki',
'Mine Kuramae',
'Kana Sohma'
]

color_map_fm = ['pink' if node in female else 'lightgreen' for node in FB]

edge_widths = [2**e[2]['weight']/64 for e in FB.edges(data=True)] # adjustable
edge_alphas = [e[2]['weight'] for e in FB.edges(data=True)]
edge_colors = [e[2]['color'] for e in FB.edges(data=True)]

nx.draw_networkx(
    FB,
    pos=pos,
    with_labels=True,
    #node_color="indigo",
    node_color=color_map_fm,
    node_size=node_size,
    font_color="black",
    #edge_color=edge_alphas,
    edge_color=edge_colors,
    width=edge_widths,
    edge_cmap=cmap,
    vmin=0,
    vmax=10,
    bbox = label_options
)

# Title/legend
font = {"color": "k", "fontweight": "bold", "fontsize": 15}
# ax.set_title("Fruits Basket Character Network", font)
# Change font color for legend
font["color"] = "black"

# Resize figure for label readibility
# ax.margins(0.1, 0.05)
# fig.tight_layout()
# # Add colorbar
# sm = plt.cm.ScalarMappable(cmap=cmap, norm=plt.Normalize(vmin = 0, vmax=10))
# sm._A = []
# ax = plt.gca()
# ax.set_axis_off()
# plt.colorbar(sm, ax=ax)
plt.axis("off")
plt.show()

# Fruits Basket calculations

# number of cliques / sub-complete graphs
c = list(nx.find_cliques(FB))
print(c)
# s = sum(1 for cliq in c)
sum = 0
s = 0
for cliq in c:
  s += 1
  if 'Tohru Honda' in cliq: sum += 1
print(s, sum)

# percentage of female characters
numFem = len(female)
numNodes = FB.number_of_nodes()
print(numFem, numNodes, numFem/numNodes)

#num edges
print(FB.number_of_edges())

# compute betweeness centrality
bw_centrality = nx.betweenness_centrality(FB, k=10, endpoints=True)
# compute degree centrality
deg_centrality = nx.degree_centrality(FB)
# compute closeness centrality
close_centrality = nx.closeness_centrality(FB)
# compute eigenvector centrality
eigen_centrality = nx.eigenvector_centrality

# Select a list of influential nodes in a graph using VoteRank algorithm
vr = nx.voterank(FB)
pr = nx.pagerank(FB)
print(pr)
print(vr)
print(bw_centrality)
print(deg_centrality)

# average negativity
avg_red_weight = 0;
num_red = 0;
for e in FB.edges(data=True):
  if e[2]['color'] == "red": 
    avg_red_weight += e[2]['weight'] 
    num_red += 1;
avg_red_weight /= num_red
print(avg_red_weight)

# percent negative
print(num_red / FB.number_of_edges())

import networkx as nx
import matplotlib.pyplot as plt
import matplotlib as mpl

JJK = nx.Graph()
JJK.add_nodes_from(['Yuji Itadori',
'Megumi Fushiguro',
'Nobara Kugisaki',
'Satoru Gojo',
'Maki Zenin',
'Toge Inumaki',
'Panda',
'Yuta Okkotsu',
'Kiyotaka Ijichi',
'Shoko Ieiri',
'Kento Nanami',
'Masamichi Yaga',
'Aoi Todo',
'Mai Zenin',
'Kasumi Miwa',
'Kokichi Muta',
'Momo Nishimiya',
'Noritoshi Kamo',
'Yoshinobu Gakuganji',
'Utahime Iori',
'Kenjaku',
'Jogo',
'Suguru Geto',
'Nanako Hasaba',
'Mimiko Hasaba',
'Junpei Yoshino',
'Ryomen Sukuna',
'Mahito',
'Dagon',
'Choso'
])
JJK.add_edges_from([
('Yuji Itadori', 'Megumi Fushiguro', {'weight': 9, 'color': 'blue'}),
('Yuji Itadori', 'Nobara Kugisaki', {'weight': 9, 'color': 'blue'}),
('Yuji Itadori', 'Satoru Gojo', {'weight': 9, 'color': 'blue'}),
('Yuji Itadori', 'Maki Zenin', {'weight': 7, 'color': 'blue'}),
('Yuji Itadori', 'Toge Inumaki', {'weight': 7, 'color': 'blue'}),
('Yuji Itadori', 'Panda', {'weight': 7, 'color': 'blue'}),
('Yuji Itadori', 'Yuta Okkotsu', {'weight': 6, 'color': 'blue'}),
('Yuji Itadori', 'Kiyotaka Ijichi', {'weight': 5, 'color': 'blue'}),
('Yuji Itadori', 'Shoko Ieiri', {'weight': 5, 'color': 'blue'}),
('Yuji Itadori', 'Kento Nanami', {'weight': 8, 'color': 'blue'}),
('Yuji Itadori', 'Masamichi Yaga', {'weight': 5, 'color': 'blue'}),
('Yuji Itadori', 'Aoi Todo', {'weight': 6, 'color': 'blue'}),
('Yuji Itadori', 'Yoshinobu Gakuganji', {'weight': 5, 'color': 'blue'}),
('Yuji Itadori', 'Kenjaku', {'weight': 9, 'color': 'red'}),
('Yuji Itadori', 'Jogo', {'weight': 7, 'color': 'red'}),
('Yuji Itadori', 'Suguru Geto', {'weight': 8, 'color': 'red'}),
('Yuji Itadori', 'Junpei Yoshino', {'weight': 8, 'color': 'blue'}),
('Yuji Itadori', 'Ryomen Sukuna', {'weight': 10, 'color': 'red'}),
('Yuji Itadori', 'Mahito', {'weight': 8, 'color': 'red'}),
('Yuji Itadori', 'Dagon', {'weight': 7, 'color': 'red'}),
('Yuji Itadori', 'Choso', {'weight': 7, 'color': 'red'}),
('Megumi Fushiguro', 'Nobara Kugisaki', {'weight': 9, 'color': 'blue'}),
('Megumi Fushiguro', 'Satoru Gojo', {'weight': 9, 'color': 'blue'}),
('Megumi Fushiguro', 'Maki Zenin', {'weight': 8, 'color': 'blue'}),
('Megumi Fushiguro', 'Toge Inumaki', {'weight': 7, 'color': 'blue'}),
('Megumi Fushiguro', 'Panda', {'weight': 7, 'color': 'blue'}),
('Megumi Fushiguro', 'Yuta Okkotsu', {'weight': 6, 'color': 'blue'}),
('Megumi Fushiguro', 'Kiyotaka Ijichi', {'weight': 5, 'color': 'blue'}),
('Megumi Fushiguro', 'Shoko Ieiri', {'weight': 5, 'color': 'blue'}),
('Megumi Fushiguro', 'Kento Nanami', {'weight': 7, 'color': 'blue'}),
('Megumi Fushiguro', 'Masamichi Yaga', {'weight': 5, 'color': 'blue'}),
('Megumi Fushiguro', 'Mai Zenin', {'weight': 8, 'color': 'blue'}),
('Megumi Fushiguro', 'Kenjaku', {'weight': 8, 'color': 'red'}),
('Megumi Fushiguro', 'Suguru Geto', {'weight': 8, 'color': 'red'}),
('Megumi Fushiguro', 'Ryomen Sukuna', {'weight': 9, 'color': 'red'}),
('Megumi Fushiguro', 'Mahito', {'weight': 7, 'color': 'red'}),
('Megumi Fushiguro', 'Dagon', {'weight': 6, 'color': 'red'}),
('Megumi Fushiguro', 'Choso', {'weight': 6, 'color': 'red'}),
('Nobara Kugisaki', 'Satoru Gojo', {'weight': 9, 'color': 'blue'}),
('Nobara Kugisaki', 'Maki Zenin', {'weight': 8, 'color': 'blue'}),
('Nobara Kugisaki', 'Toge Inumaki', {'weight': 7, 'color': 'blue'}),
('Nobara Kugisaki', 'Panda', {'weight': 7, 'color': 'blue'}),
('Nobara Kugisaki', 'Yuta Okkotsu', {'weight': 6, 'color': 'blue'}),
('Nobara Kugisaki', 'Kiyotaka Ijichi', {'weight': 5, 'color': 'blue'}),
('Nobara Kugisaki', 'Shoko Ieiri', {'weight': 5, 'color': 'blue'}),
('Nobara Kugisaki', 'Kento Nanami', {'weight': 7, 'color': 'blue'}),
('Nobara Kugisaki', 'Masamichi Yaga', {'weight': 5, 'color': 'blue'}),
('Nobara Kugisaki', 'Kenjaku', {'weight': 8, 'color': 'red'}),
('Nobara Kugisaki', 'Jogo', {'weight': 7, 'color': 'red'}),
('Nobara Kugisaki', 'Suguru Geto', {'weight': 8, 'color': 'red'}),
('Nobara Kugisaki', 'Ryomen Sukuna', {'weight': 9, 'color': 'red'}),
('Nobara Kugisaki', 'Mahito', {'weight': 7, 'color': 'red'}),
('Nobara Kugisaki', 'Dagon', {'weight': 6, 'color': 'red'}),
('Nobara Kugisaki', 'Choso', {'weight': 6, 'color': 'red'}),
('Satoru Gojo', 'Maki Zenin', {'weight': 8, 'color': 'blue'}),
('Satoru Gojo', 'Toge Inumaki', {'weight': 8, 'color': 'blue'}),
('Satoru Gojo', 'Panda', {'weight': 8, 'color': 'blue'}),
('Satoru Gojo', 'Yuta Okkotsu', {'weight': 9, 'color': 'blue'}),
('Satoru Gojo', 'Kiyotaka Ijichi', {'weight': 5, 'color': 'blue'}),
('Satoru Gojo', 'Shoko Ieiri', {'weight': 8, 'color': 'blue'}),
('Satoru Gojo', 'Kento Nanami', {'weight': 8, 'color': 'blue'}),
('Satoru Gojo', 'Masamichi Yaga', {'weight': 8, 'color': 'blue'}),
('Satoru Gojo', 'Yoshinobu Gakuganji', {'weight': 6, 'color': 'blue'}),
('Satoru Gojo', 'Utahime Iori', {'weight': 8, 'color': 'blue'}),
('Satoru Gojo', 'Kenjaku', {'weight': 8, 'color': 'red'}),
('Satoru Gojo', 'Jogo', {'weight': 7, 'color': 'red'}),
('Satoru Gojo', 'Suguru Geto', {'weight': 9, 'color': 'red'}),
('Satoru Gojo', 'Junpei Yoshino', {'weight': 6, 'color': 'blue'}),
('Satoru Gojo', 'Ryomen Sukuna', {'weight': 9, 'color': 'red'}),
('Satoru Gojo', 'Mahito', {'weight': 7, 'color': 'red'}),
('Satoru Gojo', 'Dagon', {'weight': 7, 'color': 'red'}),
('Satoru Gojo', 'Choso', {'weight': 7, 'color': 'red'}),
('Maki Zenin', 'Toge Inumaki', {'weight': 8, 'color': 'blue'}),
('Maki Zenin', 'Panda', {'weight': 8, 'color': 'blue'}),
('Maki Zenin', 'Yuta Okkotsu', {'weight': 8, 'color': 'blue'}),
('Maki Zenin', 'Shoko Ieiri', {'weight': 6, 'color': 'blue'}),
('Maki Zenin', 'Masamichi Yaga', {'weight': 6, 'color': 'blue'}),
('Maki Zenin', 'Mai Zenin', {'weight': 8, 'color': 'blue'}),
('Maki Zenin', 'Suguru Geto', {'weight': 8, 'color': 'red'}),
('Maki Zenin', 'Ryomen Sukuna', {'weight': 8, 'color': 'red'}),
('Toge Inumaki', 'Panda', {'weight': 8, 'color': 'blue'}),
('Toge Inumaki', 'Yuta Okkotsu', {'weight': 8, 'color': 'blue'}),
('Toge Inumaki', 'Shoko Ieiri', {'weight': 6, 'color': 'blue'}),
('Toge Inumaki', 'Masamichi Yaga', {'weight': 6, 'color': 'blue'}),
('Toge Inumaki', 'Suguru Geto', {'weight': 8, 'color': 'red'}),
('Toge Inumaki', 'Ryomen Sukuna', {'weight': 8, 'color': 'red'}),
('Panda', 'Yuta Okkotsu', {'weight': 8, 'color': 'blue'}),
('Panda', 'Shoko Ieiri', {'weight': 6, 'color': 'blue'}),
('Panda', 'Masamichi Yaga', {'weight': 8, 'color': 'blue'}),
('Panda', 'Suguru Geto', {'weight': 8, 'color': 'red'}),
('Panda', 'Ryomen Sukuna', {'weight': 8, 'color': 'red'}),
('Yuta Okkotsu', 'Masamichi Yaga', {'weight': 6, 'color': 'blue'}),
('Yuta Okkotsu', 'Suguru Geto', {'weight': 9, 'color': 'red'}),
('Yuta Okkotsu', 'Ryomen Sukuna', {'weight': 8, 'color': 'red'}),
('Shoko Ieiri', 'Masamichi Yaga', {'weight': 5, 'color': 'blue'}),
('Shoko Ieiri', 'Kenjaku', {'weight': 7, 'color': 'red'}),
('Shoko Ieiri', 'Suguru Geto', {'weight': 8, 'color': 'red'}),
('Shoko Ieiri', 'Ryomen Sukuna', {'weight': 8, 'color': 'red'}),
('Masamichi Yaga', 'Suguru Geto', {'weight': 8, 'color': 'red'}),
('Masamichi Yaga', 'Ryomen Sukuna', {'weight': 8, 'color': 'red'}),
('Aoi Todo', 'Mai Zenin', {'weight': 7, 'color': 'blue'}),
('Aoi Todo', 'Kasumi Miwa', {'weight': 7, 'color': 'blue'}),
('Aoi Todo', 'Kokichi Muta', {'weight': 7, 'color': 'blue'}),
('Aoi Todo', 'Momo Nishimiya', {'weight': 7, 'color': 'blue'}),
('Aoi Todo', 'Noritoshi Kamo', {'weight': 7, 'color': 'blue'}),
('Aoi Todo', 'Yoshinobu Gakuganji', {'weight': 5, 'color': 'blue'}),
('Aoi Todo', 'Utahime Iori', {'weight': 6, 'color': 'blue'}),
('Mai Zenin', 'Kasumi Miwa', {'weight': 7, 'color': 'blue'}),
('Mai Zenin', 'Kokichi Muta', {'weight': 7, 'color': 'blue'}),
('Mai Zenin', 'Momo Nishimiya', {'weight': 7, 'color': 'blue'}),
('Mai Zenin', 'Noritoshi Kamo', {'weight': 7, 'color': 'blue'}),
('Mai Zenin', 'Yoshinobu Gakuganji', {'weight': 5, 'color': 'blue'}),
('Mai Zenin', 'Utahime Iori', {'weight': 6, 'color': 'blue'}),
('Kasumi Miwa', 'Kokichi Muta', {'weight': 7, 'color': 'blue'}),
('Kasumi Miwa', 'Momo Nishimiya', {'weight': 7, 'color': 'blue'}),
('Kasumi Miwa', 'Noritoshi Kamo', {'weight': 7, 'color': 'blue'}),
('Kasumi Miwa', 'Yoshinobu Gakuganji', {'weight': 5, 'color': 'blue'}),
('Kasumi Miwa', 'Utahime Iori', {'weight': 6, 'color': 'blue'}),
('Kokichi Muta', 'Momo Nishimiya', {'weight': 7, 'color': 'blue'}),
('Kokichi Muta', 'Noritoshi Kamo', {'weight': 7, 'color': 'blue'}),
('Kokichi Muta', 'Yoshinobu Gakuganji', {'weight': 5, 'color': 'blue'}),
('Kokichi Muta', 'Utahime Iori', {'weight': 6, 'color': 'blue'}),
('Momo Nishimiya', 'Noritoshi Kamo', {'weight': 7, 'color': 'blue'}),
('Momo Nishimiya', 'Yoshinobu Gakuganji', {'weight': 6, 'color': 'blue'}),
('Momo Nishimiya', 'Utahime Iori', {'weight': 5, 'color': 'blue'}),
('Noritoshi Kamo', 'Yoshinobu Gakuganji', {'weight': 5, 'color': 'blue'}),
('Noritoshi Kamo', 'Utahime Iori', {'weight': 6, 'color': 'blue'}),
('Yoshinobu Gakuganji', 'Utahime Iori', {'weight': 7, 'color': 'blue'}),
('Kenjaku', 'Suguru Geto', {'weight': 8, 'color': 'blue'}),
('Jogo', 'Suguru Geto', {'weight': 8, 'color': 'blue'}),
('Jogo', 'Mahito', {'weight': 8, 'color': 'blue'}),
('Jogo', 'Dagon', {'weight': 7, 'color': 'blue'}),
('Jogo', 'Choso', {'weight': 7, 'color': 'blue'}),
('Suguru Geto', 'Nanako Hasaba', {'weight': 8, 'color': 'blue'}),
('Suguru Geto', 'Mimiko Hasaba', {'weight': 8, 'color': 'blue'}),
('Suguru Geto', 'Mahito', {'weight': 5, 'color': 'blue'}),
('Suguru Geto', 'Dagon', {'weight': 5, 'color': 'blue'}),
('Suguru Geto', 'Choso', {'weight': 5, 'color': 'blue'}),
('Nanako Hasaba', 'Mimiko Hasaba', {'weight': 8, 'color': 'blue'}),
('Junpei Yoshino', 'Mahito', {'weight': 8, 'color': 'red'}),
('Mahito', 'Dagon', {'weight': 7, 'color': 'blue'}),
('Mahito', 'Choso', {'weight': 7, 'color': 'blue'}),
('Dagon', 'Choso', {'weight': 7, 'color': 'blue'})
 ])

# Draw Graphs
plt.figure(3,figsize=(11,10)) 
pos = nx.circular_layout(JJK)
label_options = {"facecolor": 'white',"alpha": 0.9}
nx.draw(JJK, pos,node_size=60,font_size=11, with_labels=True, font_weight='bold', bbox = label_options) 
plt.show()

fig, ax = plt.subplots(figsize=(15, 15))
#pos = nx.spring_layout(OR, k=0.15, seed=4572320)
pos = nx.kamada_kawai_layout(JJK)
#pos = nx.circular_layout(JJK)

# compute centrality
centrality = nx.betweenness_centrality(JJK, k=10, endpoints=True)

# compute community structure
lpc = nx.community.label_propagation_communities(JJK)
community_index = {n: i for i, com in enumerate(lpc) for n in com}

node_color = [community_index[n] for n in JJK]
node_size = [v * 10000 for v in centrality.values()]
cmap = plt.cm.coolwarm
label_options = {"ec": "k", "fc": "white", "alpha": 0.9}
female = [
'Nobara Kugisaki',
'Maki Zenin',
'Shoko Ieiri',
'Mai Zenin',
'Kasumi Miwa',
'Momo Nishimiya',
'Utahime Iori',
'Nanako Hasaba',
'Mimiko Hasaba',
]

color_map_fm = ['pink' if node in female else 'lightgreen' for node in JJK]

edge_widths = [2**e[2]['weight']/64 for e in JJK.edges(data=True)] # adjustable
edge_alphas = [e[2]['weight'] for e in JJK.edges(data=True)]
edge_colors = [e[2]['color'] for e in JJK.edges(data=True)]

nx.draw_networkx(
    JJK,
    pos=pos,
    with_labels=True,
    #node_color="indigo",
    node_color=color_map_fm,
    node_size=node_size,
    font_color="black",
    #edge_color=edge_alphas,
    edge_color=edge_colors,
    width=edge_widths,
    edge_cmap=cmap,
    vmin=0,
    vmax=10,
    bbox = label_options
)

# Title/legend
font = {"color": "k", "fontweight": "bold", "fontsize": 15}
# ax.set_title("Jujutsu Kaisen Character Network", font)
# Change font color for legend
font["color"] = "black"


# Resize figure for label readibility
# ax.margins(0.1, 0.05)
# fig.tight_layout()
# # Add colorbar
# sm = plt.cm.ScalarMappable(cmap=cmap, norm=plt.Normalize(vmin = 0, vmax=10))
# sm._A = []
# ax = plt.gca()
# ax.set_axis_off()
# plt.colorbar(sm, ax=ax)
plt.axis("off")
plt.show()

# Jujutsu Kaisen calculations

# number of cliques / sub-complete graphs
c = list(nx.find_cliques(JJK))
print(c)
# s = sum(1 for cliq in c)
sum = 0
s = 0
for cliq in c:
  s += 1
  if 'Yuji Itadori' in cliq: sum += 1
print(s, sum)

# percentage of female characters
numFem = len(female)
numNodes = JJK.number_of_nodes()
print(numFem, numNodes, numFem/numNodes)

#num edges
print(JJK.number_of_edges())

# compute betweeness centrality
bw_centrality = nx.betweenness_centrality(JJK, k=10, endpoints=True)
# compute degree centrality
deg_centrality = nx.degree_centrality(JJK)
# compute closeness centrality
close_centrality = nx.closeness_centrality(JJK)
# compute eigenvector centrality
eigen_centrality = nx.eigenvector_centrality

# Select a list of influential nodes in a graph using VoteRank algorithm
vr = nx.voterank(JJK)
pr = nx.pagerank(JJK)
print(pr)
print(vr)
print(bw_centrality)
print(deg_centrality)

# average negativity
avg_red_weight = 0;
num_red = 0;
for e in JJK.edges(data=True):
  if e[2]['color'] == "red": 
    avg_red_weight += e[2]['weight'] 
    num_red += 1;
avg_red_weight /= num_red
print(avg_red_weight)

# percent negative
print(num_red / JJK.number_of_edges())

import networkx as nx
import matplotlib.pyplot as plt
import matplotlib as mpl

MHA = nx.Graph()
MHA.add_nodes_from(['Izuku Midoriya',
'Katsuki Bakugo',
'Ochaco Uraraka',
'Tenya Ida',
'Shoto Todoroki',
'Eijiro Kirishima',
'Tsuyu Asui',
'Momo Yaoyorozu',
'Minoru Mineta',
'Denki Kaminari',
'Kyoka Jiro',
'Fumikage Tokoyami',
'Mina Ashido',
'Yuga Aoyama',
'Mezo Shoji',
'Hanta Sero',
'Mashirao Ojiro',
'Koji Koda',
'Rikido Sato',
'Toru Hagakure',
'All Might',
'Endeavor',
'Shota Aizawa',
'Present Mic',
'Tomura Shigaraki',
'All For One',
'Inko Midoriya',
'Kurogiri',
'Dabi',
'Himiko Toga'
])
MHA.add_edges_from([
('Izuku Midoriya', 'Katsuki Bakugo', {'weight': 10, 'color': 'blue'}),
('Izuku Midoriya', 'Ochaco Uraraka', {'weight': 8, 'color': 'blue'}),
('Izuku Midoriya', 'Tenya Ida', {'weight': 8, 'color': 'blue'}),
('Izuku Midoriya', 'Shoto Todoroki', {'weight': 8, 'color': 'blue'}),
('Izuku Midoriya', 'Eijiro Kirishima', {'weight': 7, 'color': 'blue'}),
('Izuku Midoriya', 'Tsuyu Asui', {'weight': 8, 'color': 'blue'}),
('Izuku Midoriya', 'Momo Yaoyorozu', {'weight': 7, 'color': 'blue'}),
('Izuku Midoriya', 'Minoru Mineta', {'weight': 7, 'color': 'blue'}),
('Izuku Midoriya', 'Denki Kaminari', {'weight': 7, 'color': 'blue'}),
('Izuku Midoriya', 'Kyoka Jiro', {'weight': 7, 'color': 'blue'}),
('Izuku Midoriya', 'Fumikage Tokoyami', {'weight': 7, 'color': 'blue'}),
('Izuku Midoriya', 'Mina Ashido', {'weight': 7, 'color': 'blue'}),
('Izuku Midoriya', 'Yuga Aoyama', {'weight': 7, 'color': 'blue'}),
('Izuku Midoriya', 'Mezo Shoji', {'weight': 7, 'color': 'blue'}),
('Izuku Midoriya', 'Hanta Sero', {'weight': 7, 'color': 'blue'}),
('Izuku Midoriya', 'Mashirao Ojiro', {'weight': 7, 'color': 'blue'}),
('Izuku Midoriya', 'Koji Koda', {'weight': 7, 'color': 'blue'}),
('Izuku Midoriya', 'Rikido Sato', {'weight': 7, 'color': 'blue'}),
('Izuku Midoriya', 'Toru Hagakure', {'weight': 7, 'color': 'blue'}),
('Izuku Midoriya', 'All Might', {'weight': 10, 'color': 'blue'}),
('Izuku Midoriya', 'Present Mic', {'weight': 7, 'color': 'blue'}),
('Izuku Midoriya', 'Shota Aizawa', {'weight': 8, 'color': 'blue'}),
('Izuku Midoriya', 'Tomura Shigaraki', {'weight': 10, 'color': 'red'}),
('Izuku Midoriya', 'All For One', {'weight': 10, 'color': 'red'}),
('Izuku Midoriya', 'Inko Midoriya', {'weight': 10, 'color': 'blue'}),
('Izuku Midoriya', 'Himiko Toga', {'weight': 7, 'color': 'red'}),
('Katsuki Bakugo', 'Shoto Todoroki', {'weight': 7, 'color': 'blue'}),
('Katsuki Bakugo', 'Eijiro Kirishima', {'weight': 8, 'color': 'blue'}),
('Katsuki Bakugo', 'All Might', {'weight': 9, 'color': 'blue'}),
('Katsuki Bakugo', 'Shota Aizawa', {'weight': 8, 'color': 'blue'}),
('Katsuki Bakugo', 'Tomura Shigaraki', {'weight': 9, 'color': 'red'}),
('Katsuki Bakugo', 'All For One', {'weight': 9, 'color': 'red'}),
('Ochaco Uraraka', 'Tenya Ida', {'weight': 8, 'color': 'blue'}),
('Ochaco Uraraka', 'Shoto Todoroki', {'weight': 8, 'color': 'blue'}),
('Ochaco Uraraka', 'Tsuyu Asui', {'weight': 8, 'color': 'blue'}),
('Ochaco Uraraka', 'Momo Yaoyorozu', {'weight': 7, 'color': 'blue'}),
('Ochaco Uraraka', 'Kyoka Jiro', {'weight': 7, 'color': 'blue'}),
('Ochaco Uraraka', 'Mina Ashido', {'weight': 7, 'color': 'blue'}),
('Ochaco Uraraka', 'Toru Hagakure', {'weight': 7, 'color': 'blue'}),
('Tenya Ida', 'Shoto Todoroki', {'weight': 8, 'color': 'blue'}),
('Tenya Ida', 'Tsuyu Asui', {'weight': 8, 'color': 'blue'}),
('Tenya Ida', 'Shota Aizawa', {'weight': 8, 'color': 'blue'}),
('Shoto Todoroki', 'Tsuyu Asui', {'weight': 7, 'color': 'blue'}),
('Shoto Todoroki', 'All Might', {'weight': 8, 'color': 'blue'}),
('Shoto Todoroki', 'Endeavor', {'weight': 9, 'color': 'red'}),
('Shoto Todoroki', 'Shota Aizawa', {'weight': 8, 'color': 'blue'}),
('Shoto Todoroki', 'Tomura Shigaraki', {'weight': 7, 'color': 'red'}),
('Shoto Todoroki', 'All For One', {'weight': 7, 'color': 'red'}),
('Shoto Todoroki', 'Dabi', {'weight': 9, 'color': 'red'}),
('Eijiro Kirishima', 'Denki Kaminari', {'weight': 8, 'color': 'blue'}),
('Eijiro Kirishima', 'Mina Ashido', {'weight': 8, 'color': 'blue'}),
('Eijiro Kirishima', 'Hanta Sero', {'weight': 8, 'color': 'blue'}),
('Tsuyu Asui', 'Momo Yaoyorozu', {'weight': 7, 'color': 'blue'}),
('Tsuyu Asui', 'Kyoka Jiro', {'weight': 7, 'color': 'blue'}),
('Tsuyu Asui', 'Mina Ashido', {'weight': 7, 'color': 'blue'}),
('Tsuyu Asui', 'Toru Hagakure', {'weight': 7, 'color': 'blue'}),
('Momo Yaoyorozu', 'Kyoka Jiro', {'weight': 8, 'color': 'blue'}),
('Momo Yaoyorozu', 'Mina Ashido', {'weight': 7, 'color': 'blue'}),
('Momo Yaoyorozu', 'Toru Hagakure', {'weight': 7, 'color': 'blue'}),
('Minoru Mineta', 'Denki Kaminari', {'weight': 7, 'color': 'blue'}),
('Denki Kaminari', 'Kyoka Jiro', {'weight': 8, 'color': 'blue'}),
('Denki Kaminari', 'Hanta Sero', {'weight': 8, 'color': 'blue'}),
('Kyoka Jiro', 'Mina Ashido', {'weight': 7, 'color': 'blue'}),
('Kyoka Jiro', 'Toru Hagakure', {'weight': 7, 'color': 'blue'}),
('Mina Ashido', 'Toru Hagakure', {'weight': 7, 'color': 'blue'}),
('All Might', 'Endeavor', {'weight': 7, 'color': 'red'}),
('All Might', 'Shota Aizawa', {'weight': 6, 'color': 'blue'}),
('All Might', 'Tomura Shigaraki', {'weight': 9, 'color': 'red'}),
('All Might', 'All For One', {'weight': 9, 'color': 'red'}),
('All Might', 'Kurogiri', {'weight': 8, 'color': 'red'}),
('All Might', 'Dabi', {'weight': 8, 'color': 'red'}),
('All Might', 'Himiko Toga', {'weight': 8, 'color': 'red'}),
('Endeavor', 'Tomura Shigaraki', {'weight': 10, 'color': 'red'}),
('Endeavor', 'All For One', {'weight': 9, 'color': 'red'}),
('Endeavor', 'Kurogiri', {'weight': 8, 'color': 'red'}),
('Endeavor', 'Dabi', {'weight': 8, 'color': 'red'}),
('Endeavor', 'Himiko Toga', {'weight': 8, 'color': 'red'}),
('Shota Aizawa', 'Present Mic', {'weight': 8, 'color': 'blue'}),
('Shota Aizawa', 'Tomura Shigaraki', {'weight': 8, 'color': 'red'}),
('Shota Aizawa', 'All For One', {'weight': 8, 'color': 'red'}),
('Shota Aizawa', 'Kurogiri', {'weight': 8, 'color': 'red'}),
('Shota Aizawa', 'Dabi', {'weight': 8, 'color': 'red'}),
('Shota Aizawa', 'Himiko Toga', {'weight': 8, 'color': 'red'}),
('Present Mic', 'Tomura Shigaraki', {'weight': 8, 'color': 'red'}),
('Present Mic', 'All For One', {'weight': 8, 'color': 'red'}),
('Present Mic', 'Kurogiri', {'weight': 8, 'color': 'red'}),
('Present Mic', 'Dabi', {'weight': 8, 'color': 'red'}),
('Present Mic', 'Himiko Toga', {'weight': 8, 'color': 'red'}),
('Tomura Shigaraki', 'All For One', {'weight': 9, 'color': 'blue'}),
('Tomura Shigaraki', 'Kurogiri', {'weight': 8, 'color': 'blue'}),
('Tomura Shigaraki', 'Dabi', {'weight': 7, 'color': 'blue'}),
('Tomura Shigaraki', 'Himiko Toga', {'weight': 7, 'color': 'blue'}),
('All For One', 'Kurogiri', {'weight': 7, 'color': 'blue'}),
('All For One', 'Dabi', {'weight': 6, 'color': 'blue'}),
('All For One', 'Himiko Toga', {'weight': 6, 'color': 'blue'}),
('Kurogiri', 'Dabi', {'weight': 7, 'color': 'blue'}),
('Kurogiri', 'Himiko Toga', {'weight': 7, 'color': 'blue'}),
('Dabi',  'Himiko Toga', {'weight': 6, 'color': 'blue'})])

# Draw Graphs
plt.figure(3,figsize=(11,10)) 
pos = nx.circular_layout(MHA)
label_options = {"facecolor": 'white',"alpha": 0.9}
nx.draw(MHA, pos,node_size=60,font_size=11, with_labels=True, font_weight='bold', bbox = label_options) 
plt.show()

fig, ax = plt.subplots(figsize=(15, 15))
#pos = nx.spring_layout(OR, k=0.15, seed=4572320)
pos = nx.kamada_kawai_layout(MHA)
# pos = nx.circular_layout(MHA)

# compute centrality
centrality = nx.betweenness_centrality(MHA, k=10, endpoints=True)

# compute community structure
lpc = nx.community.label_propagation_communities(MHA)
community_index = {n: i for i, com in enumerate(lpc) for n in com}

node_color = [community_index[n] for n in MHA]
node_size = [v * 10000 for v in centrality.values()]
cmap = plt.cm.coolwarm
label_options = {"ec": "k", "fc": "white", "alpha": 0.9}
female = [
'Ochaco Uraraka',
'Tsuyu Asui',
'Momo Yaoyorozu',
'Kyoka Jiro',
'Mina Ashido',
'Toru Hagakure',
'All Might',
'Inko Midoriya',
'Himiko Toga'
]

color_map_fm = ['pink' if node in female else 'lightgreen' for node in MHA]

edge_widths = [2**e[2]['weight']/64 for e in MHA.edges(data=True)] # adjustable
edge_alphas = [e[2]['weight'] for e in MHA.edges(data=True)]
edge_colors = [e[2]['color'] for e in MHA.edges(data=True)]

nx.draw_networkx(
    MHA,
    pos=pos,
    with_labels=True,
    #node_color="indigo",
    node_color=color_map_fm,
    node_size=node_size,
    font_color="black",
    #edge_color=edge_alphas,
    edge_color=edge_colors,
    width=edge_widths,
    edge_cmap=cmap,
    vmin=0,
    vmax=10,
    bbox = label_options
)

# Title/legend
font = {"color": "k", "fontweight": "bold", "fontsize": 15}
# ax.set_title("My Hero Academia Character Network", font)
# Change font color for legend
font["color"] = "black"


# Resize figure for label readibility
# ax.margins(0.1, 0.05)
# fig.tight_layout()
# # Add colorbar
# sm = plt.cm.ScalarMappable(cmap=cmap, norm=plt.Normalize(vmin = 0, vmax=10))
# sm._A = []
# ax = plt.gca()
# ax.set_axis_off()
# plt.colorbar(sm, ax=ax)
plt.axis("off")
plt.show()

# My Hero Academia calculations

# number of cliques / sub-complete graphs
c = list(nx.find_cliques(MHA))
print(c)
# s = sum(1 for cliq in c)
sum = 0
s = 0
for cliq in c:
  s += 1
  if 'Izuku Midoriya' in cliq: sum += 1
print(s, sum)

# percentage of female characters
numFem = len(female)
numNodes = MHA.number_of_nodes()
print(numFem, numNodes, numFem/numNodes)

#num edges
print(MHA.number_of_edges())

# compute betweeness centrality
bw_centrality = nx.betweenness_centrality(MHA, k=10, endpoints=True)
# compute degree centrality
deg_centrality = nx.degree_centrality(MHA)
# compute closeness centrality
close_centrality = nx.closeness_centrality(MHA)
# compute eigenvector centrality
eigen_centrality = nx.eigenvector_centrality

# Select a list of influential nodes in a graph using VoteRank algorithm
vr = nx.voterank(MHA)
pr = nx.pagerank(MHA)
print(pr)
print(vr)
print(bw_centrality)
print(deg_centrality)

# average negativity
avg_red_weight = 0;
num_red = 0;
for e in MHA.edges(data=True):
  if e[2]['color'] == "red": 
    avg_red_weight += e[2]['weight'] 
    num_red += 1;
avg_red_weight /= num_red
print(avg_red_weight)

# percent negative
print(num_red / MHA.number_of_edges())

import networkx as nx
import matplotlib.pyplot as plt
import matplotlib as mpl

BF = nx.Graph()
BF.add_nodes_from(['Ash Lynx',
'Eiji Okumura',
'Max Lobo',
'Shunichi Ibe',
'Griffin Callenreese',
'Alexis Dawson',
'Jessica Randy',
'Dino Golzine',
'Frederick Arthur',
'Abraham Dawson',
'Mannerheim',
'Blanca',
'Eduardo L. Fox',
'Shorter Wong',
'Lee Yut-Lung',
'Sing Soo-Ling',
'Lao Yen-Thai',
'Alex',
'Skip',
'Bones',
'Kong',
'Cain Blood',
'Antonio Jenkins',
'Charlie Dickenson',
'Michael Glenreed'
])
BF.add_edges_from([
('Ash Lynx', 'Eiji Okumura', {'weight': 10, 'color': 'blue'}),
('Ash Lynx', 'Max Lobo', {'weight': 8, 'color': 'blue'}),
('Ash Lynx', 'Shunichi Ibe', {'weight': 6, 'color': 'blue'}),
('Ash Lynx', 'Griffin Callenreese', {'weight': 9, 'color': 'blue'}),
('Ash Lynx', 'Alexis Dawson', {'weight': 5, 'color': 'blue'}),
('Ash Lynx', 'Jessica Randy', {'weight': 7, 'color': 'blue'}),
('Ash Lynx', 'Dino Golzine', {'weight': 10, 'color': 'red'}),
('Ash Lynx', 'Frederick Arthur', {'weight': 8, 'color': 'red'}),
('Ash Lynx', 'Abraham Dawson', {'weight': 7, 'color': 'red'}),
('Ash Lynx', 'Mannerheim', {'weight': 5, 'color': 'red'}),
('Ash Lynx', 'Blanca', {'weight': 7, 'color': 'blue'}),
('Ash Lynx', 'Eduardo L. Fox', {'weight': 5, 'color': 'red'}),
('Ash Lynx', 'Shorter Wong', {'weight': 9, 'color': 'blue'}),
('Ash Lynx', 'Lee Yut-Lung', {'weight': 9, 'color': 'red'}),
('Ash Lynx', 'Sing Soo-Ling', {'weight': 8, 'color': 'blue'}),
('Ash Lynx', 'Lao Yen-Thai', {'weight': 8, 'color': 'red'}),
('Ash Lynx', 'Alex', {'weight': 8, 'color': 'blue'}),
('Ash Lynx', 'Skip', {'weight': 7, 'color': 'blue'}),
('Ash Lynx', 'Bones', {'weight': 7, 'color': 'blue'}),
('Ash Lynx', 'Kong', {'weight': 7, 'color': 'blue'}),
('Ash Lynx', 'Cain Blood', {'weight': 7, 'color': 'blue'}),
('Ash Lynx', 'Antonio Jenkins', {'weight': 5, 'color': 'blue'}),
('Ash Lynx', 'Charlie Dickenson', {'weight': 5, 'color': 'blue'}),
('Ash Lynx', 'Michael Glenreed', {'weight': 5, 'color': 'blue'}),
('Eiji Okumura', 'Max Lobo', {'weight': 6, 'color': 'blue'}),
('Eiji Okumura', 'Shunichi Ibe', {'weight': 8, 'color': 'blue'}),
('Eiji Okumura', 'Alexis Dawson', {'weight': 5, 'color': 'blue'}),
('Eiji Okumura', 'Jessica Randy', {'weight': 5, 'color': 'blue'}),
('Eiji Okumura', 'Dino Golzine', {'weight': 8, 'color': 'red'}),
('Eiji Okumura', 'Frederick Arthur', {'weight': 7, 'color': 'red'}),
('Eiji Okumura', 'Abraham Dawson', {'weight': 7, 'color': 'red'}),
('Eiji Okumura', 'Mannerheim', {'weight': 5, 'color': 'red'}),
('Eiji Okumura', 'Blanca', {'weight': 6, 'color': 'blue'}),
('Eiji Okumura', 'Eduardo L. Fox', {'weight': 5, 'color': 'red'}),
('Eiji Okumura', 'Shorter Wong', {'weight': 8, 'color': 'blue'}),
('Eiji Okumura', 'Lee Yut-Lung', {'weight': 9, 'color': 'red'}),
('Eiji Okumura', 'Sing Soo-Ling', {'weight': 8, 'color': 'blue'}),
('Eiji Okumura', 'Lao Yen-Thai', {'weight': 8, 'color': 'red'}),
('Eiji Okumura', 'Alex', {'weight': 6, 'color': 'blue'}),
('Eiji Okumura', 'Skip', {'weight': 6, 'color': 'blue'}),
('Eiji Okumura', 'Bones', {'weight': 5, 'color': 'blue'}),
('Eiji Okumura', 'Kong', {'weight': 5, 'color': 'blue'}),
('Eiji Okumura', 'Cain Blood', {'weight': 5, 'color': 'blue'}),
('Eiji Okumura', 'Antonio Jenkins', {'weight': 5, 'color': 'blue'}),
('Eiji Okumura', 'Charlie Dickenson', {'weight': 5, 'color': 'blue'}),
('Eiji Okumura', 'Michael Glenreed', {'weight': 5, 'color': 'blue'}),
('Max Lobo', 'Shunichi Ibe', {'weight': 5, 'color': 'blue'}),
('Max Lobo', 'Griffin Callenreese', {'weight': 8, 'color': 'blue'}),
('Max Lobo', 'Jessica Randy', {'weight': 7, 'color': 'blue'}),
('Max Lobo', 'Antonio Jenkins', {'weight': 7, 'color': 'blue'}),
('Max Lobo', 'Charlie Dickenson',  {'weight': 7, 'color': 'blue'}),
('Shunichi Ibe', 'Shorter Wong', {'weight': 6, 'color': 'blue'}),
('Shunichi Ibe', 'Jessica Randy', {'weight': 5, 'color': 'blue'}),
('Shunichi Ibe', 'Antonio Jenkins', {'weight': 7, 'color': 'blue'}),
('Griffin Callenreese', 'Skip', {'weight': 5, 'color': 'blue'}),
('Alexis Dawson', 'Abraham Dawson', {'weight': 8, 'color': 'blue'}),
('Jessica Randy', 'Michael Glenreed', {'weight': 8, 'color': 'blue'}),
('Dino Golzine', 'Lee Yut-Lung', {'weight': 8, 'color': 'blue'}),
('Dino Golzine', 'Blanca', {'weight': 8, 'color': 'blue'}),
('Dino Golzine', 'Frederick Arthur', {'weight': 8, 'color': 'blue'}),
('Dino Golzine', 'Eduardo L. Fox', {'weight': 7, 'color': 'blue'}),
('Dino Golzine', 'Abraham Dawson', {'weight': 7, 'color': 'blue'}),
('Dino Golzine', 'Mannerheim', {'weight': 7, 'color': 'blue'}),
('Dino Golzine', 'Cain Blood', {'weight': 7, 'color': 'red'}),
('Frederick Arthur', 'Skip', {'weight': 6, 'color': 'red'}),
('Abraham Dawson', 'Griffin Callenreese', {'weight': 6, 'color': 'red'}),
('Mannerheim', 'Eduardo L. Fox', {'weight': 6, 'color': 'blue'}),
('Blanca', 'Lee Yut-Lung', {'weight': 6, 'color': 'blue'}),
('Blanca', 'Sing Soo-Ling', {'weight': 5, 'color': 'blue'}),
('Shorter Wong', 'Lee Yut-Lung', {'weight': 6, 'color': 'red'}),
('Shorter Wong', 'Sing Soo-Ling', {'weight': 7, 'color': 'blue'}),
('Lee Yut-Lung', 'Sing Soo-Ling', {'weight': 8, 'color': 'blue'}),
('Lee Yut-Lung', 'Lao Yen-Thai', {'weight': 5, 'color': 'red'}),
('Sing Soo-Ling', 'Lao Yen-Thai', {'weight': 7, 'color': 'blue'}),
('Sing Soo-Ling', 'Cain Blood', {'weight': 5, 'color': 'blue'}),
('Alex', 'Skip', {'weight': 6, 'color': 'blue'}),
('Alex', 'Bones', {'weight': 6, 'color': 'blue'}),
('Alex', 'Kong', {'weight': 6, 'color': 'blue'}),
('Skip', 'Bones', {'weight': 6, 'color': 'blue'}),
('Skip', 'Kong', {'weight': 6, 'color': 'blue'}),
('Skip', 'Charlie Dickenson', {'weight': 5, 'color': 'blue'}),
('Bones', 'Kong', {'weight': 7, 'color': 'blue'}),
('Antonio Jenkins', 'Charlie Dickenson', {'weight': 7, 'color': 'blue'}),
('Michael Glenreed', 'Max Lobo', {'weight': 7, 'color': 'blue'})
 ])

# Draw Graphs
plt.figure(3,figsize=(11,10)) 
pos = nx.circular_layout(BF)
label_options = {"facecolor": 'white',"alpha": 0.9}
nx.draw(BF, pos,node_size=60,font_size=11, with_labels=True, font_weight='bold', bbox = label_options) 
plt.show()

fig, ax = plt.subplots(figsize=(15, 15))
#pos = nx.spring_layout(BF, k=0.15, seed=4572320)
pos = nx.kamada_kawai_layout(BF)
# pos = nx.circular_layout(BF)

# compute centrality
centrality = nx.betweenness_centrality(BF, k=10, endpoints=True)

# compute community structure
lpc = nx.community.label_propagation_communities(BF)
community_index = {n: i for i, com in enumerate(lpc) for n in com}

node_color = [community_index[n] for n in BF]
node_size = [v * 10000 for v in centrality.values()]
cmap = plt.cm.coolwarm
label_options = {"ec": "k", "fc": "white", "alpha": 0.9}
female = [
'Jessica Randy'
]

color_map_fm = ['pink' if node in female else 'lightgreen' for node in BF]

edge_widths = [2**e[2]['weight']/64 for e in BF.edges(data=True)] # adjustable
edge_alphas = [e[2]['weight'] for e in BF.edges(data=True)]
edge_colors = [e[2]['color'] for e in BF.edges(data=True)]

nx.draw_networkx(
    BF,
    pos=pos,
    with_labels=True,
    #node_color="indigo",
    node_color=color_map_fm,
    node_size=node_size,
    font_color="black",
    #edge_color=edge_alphas,
    edge_color=edge_colors,
    width=edge_widths,
    edge_cmap=cmap,
    vmin=0,
    vmax=10,
    bbox = label_options
)

# Title/legend
font = {"color": "k", "fontweight": "bold", "fontsize": 15}
# ax.set_title("Banana Fish Character Network", font)
# Change font color for legend
font["color"] = "black"

# Resize figure for label readibility
# ax.margins(0.1, 0.05)
# fig.tight_layout()
# # Add colorbar
# sm = plt.cm.ScalarMappable(cmap=cmap, norm=plt.Normalize(vmin = 0, vmax=10))
# sm._A = []
# ax = plt.gca()
# ax.set_axis_off()
# plt.colorbar(sm, ax=ax)
plt.axis("off")
plt.show()

# Banana Fish calculations

# number of cliques / sub-complete graphs
c = list(nx.find_cliques(BF))
print(c)
# s = sum(1 for cliq in c)
sum = 0
s = 0
for cliq in c:
  s += 1
  if 'Ash Lynx' in cliq: sum += 1
print(s, sum)

# percentage of female characters
numFem = len(female)
numNodes = BF.number_of_nodes()
print(numFem, numNodes, numFem/numNodes)

#num edges
print(BF.number_of_edges())

# compute betweeness centrality
bw_centrality = nx.betweenness_centrality(BF, k=10, endpoints=True)
# compute degree centrality
deg_centrality = nx.degree_centrality(BF)
# compute closeness centrality
close_centrality = nx.closeness_centrality(BF)
# compute eigenvector centrality
eigen_centrality = nx.eigenvector_centrality

# Select a list of influential nodes in a graph using VoteRank algorithm
vr = nx.voterank(BF)
#pr = nx.pagerank(BF)
#print(pr)
print(vr)
print(bw_centrality)
print(deg_centrality)

# average negativity
avg_red_weight = 0;
num_red = 0;
for e in BF.edges(data=True):
  if e[2]['color'] == "red": 
    avg_red_weight += e[2]['weight'] 
    num_red += 1;
avg_red_weight /= num_red
print(avg_red_weight)

# percent negative
print(num_red / BF.number_of_edges())

import networkx as nx
import matplotlib.pyplot as plt
import matplotlib as mpl

DN = nx.Graph()
DN.add_nodes_from([
'Light Yagami',
'L Lawliet',
'Ryuk',
'Rem',
'Misa Amane',
'Near',
'Mello',
'Teru Mikami',
'Soichiro Yagami',
'Touta Matsuda',
'Shuichi Aizawa',
'Kanzo Mogi',
'Hideki Ide',
'Hirokazu Ukita',
'Watari',
'Aiber',
'Raye Penber',
'Naomi Misora',
'Steve Mason',
'Kyosuke Higuchi',
'Anthony Rester',
'Halle Lidner',
'Sayu Yagami',
'Sachiko Yagami',
'Wedy'
])
DN.add_edges_from([
('Light Yagami', 'L Lawliet', {'weight': 10, 'color': 'red'}),
('Light Yagami', 'Ryuk', {'weight': 10, 'color': 'blue'}),
('Light Yagami', 'Misa Amane', {'weight': 9, 'color': 'red'}),
('Light Yagami', 'Near', {'weight': 9, 'color': 'red'}),
('Light Yagami', 'Mello', {'weight': 9, 'color': 'red'}),
('Light Yagami', 'Teru Mikami', {'weight': 7, 'color': 'blue'}),
('Light Yagami', 'Soichiro Yagami', {'weight': 9, 'color': 'red'}),
('Light Yagami', 'Touta Matsuda', {'weight': 7, 'color': 'red'}),
('Light Yagami', 'Shuichi Aizawa', {'weight': 7, 'color': 'red'}),
('Light Yagami', 'Kanzo Mogi', {'weight': 7, 'color': 'red'}),
('Light Yagami', 'Hideki Ide', {'weight': 7, 'color': 'red'}),
('Light Yagami', 'Hirokazu Ukita', {'weight': 7, 'color': 'red'}),
('Light Yagami', 'Watari', {'weight': 7, 'color': 'red'}),
('Light Yagami', 'Aiber', {'weight': 7, 'color': 'red'}),
('Light Yagami', 'Raye Penber', {'weight': 7, 'color': 'red'}),
('Light Yagami', 'Naomi Misora', {'weight': 7, 'color': 'red'}),
('Light Yagami', 'Steve Mason', {'weight': 6, 'color': 'red'}),
('Light Yagami', 'Kyosuke Higuchi', {'weight': 8, 'color': 'blue'}),
('Light Yagami', 'Anthony Rester', {'weight': 6, 'color': 'red'}),
('Light Yagami', 'Halle Lidner', {'weight': 6, 'color': 'red'}),
('Light Yagami', 'Sayu Yagami', {'weight': 8, 'color': 'blue'}),
('Light Yagami', 'Sachiko Yagami', {'weight': 8, 'color': 'blue'}),
('Light Yagami', 'Wedy', {'weight': 7, 'color': 'red'}),
('L Lawliet', 'Misa Amane', {'weight': 8, 'color': 'blue'}),
('L Lawliet', 'Rem', {'weight': 5, 'color': 'red'}),
('L Lawliet', 'Soichiro Yagami', {'weight': 7, 'color': 'blue'}),
('L Lawliet', 'Touta Matsuda', {'weight': 7, 'color': 'blue'}),
('L Lawliet', 'Shuichi Aizawa', {'weight': 6, 'color': 'blue'}),
('L Lawliet', 'Kanzo Mogi', {'weight': 5, 'color': 'blue'}),
('L Lawliet', 'Hideki Ide', {'weight': 5, 'color': 'blue'}),
('L Lawliet', 'Hirokazu Ukita', {'weight': 5, 'color': 'blue'}),
('L Lawliet', 'Watari', {'weight': 8, 'color': 'blue'}),
('L Lawliet', 'Kyosuke Higuchi', {'weight': 7, 'color': 'red'}),
('L Lawliet', 'Wedy', {'weight': 6, 'color': 'blue'}),
('L Lawliet', 'Aiber', {'weight': 6, 'color': 'blue'}),
('Ryuk', 'Rem', {'weight': 8, 'color': 'blue'}),
('Ryuk', 'Misa Amane', {'weight': 7, 'color': 'blue'}),
('Ryuk', 'Near', {'weight': 7, 'color': 'red'}),
('Ryuk', 'Mello', {'weight': 7, 'color': 'red'}),
('Ryuk', 'Teru Mikami', {'weight': 8, 'color': 'blue'}),
('Ryuk', 'Soichiro Yagami', {'weight': 7, 'color': 'red'}),
('Ryuk', 'Kyosuke Higuchi', {'weight': 6, 'color': 'blue'}),
('Rem', 'Misa Amane', {'weight': 9, 'color': 'blue'}),
('Rem', 'Kyosuke Higuchi', {'weight': 8, 'color': 'blue'}),
('Rem', 'Soichiro Yagami', {'weight': 5, 'color': 'red'}),
('Rem', 'Touta Matsuda', {'weight': 5, 'color': 'red'}),
('Rem', 'Shuichi Aizawa', {'weight': 5, 'color': 'red'}),
('Rem', 'Kanzo Mogi', {'weight': 5, 'color': 'red'}),
('Rem', 'Watari', {'weight': 5, 'color': 'red'}),
('Misa Amane', 'Mello', {'weight': 7, 'color': 'red'}),
('Misa Amane', 'Kanzo Mogi', {'weight': 5, 'color': 'red'}),
('Misa Amane', 'Soichiro Yagami', {'weight': 8, 'color': 'red'}),
('Misa Amane', 'Sayu Yagami', {'weight': 6, 'color': 'blue'}),
('Misa Amane', 'Sachiko Yagami', {'weight': 6, 'color': 'blue'}),
('Misa Amane', 'Touta Matsuda', {'weight': 5, 'color': 'blue'}),
('Misa Amane', 'Shuichi Aizawa', {'weight': 5, 'color': 'blue'}),
('Misa Amane', 'Hideki Ide', {'weight': 5, 'color': 'blue'}),
('Misa Amane', 'Hirokazu Ukita', {'weight': 5, 'color': 'blue'}),
('Near', 'Mello', {'weight': 5, 'color': 'blue'}),
('Near', 'Teru Mikami', {'weight': 7, 'color': 'red'}),
('Near', 'Soichiro Yagami', {'weight': 5, 'color': 'red'}),
('Near', 'Touta Matsuda', {'weight': 5, 'color': 'blue'}),
('Near', 'Shuichi Aizawa', {'weight': 5, 'color': 'blue'}),
('Near', 'Kanzo Mogi', {'weight': 5, 'color': 'blue'}),
('Near', 'Watari', {'weight': 8, 'color': 'blue'}),
('Near', 'Halle Lidner', {'weight': 7, 'color': 'blue'}),
('Near', 'Anthony Rester', {'weight': 7, 'color': 'blue'}),
('Near', 'Steve Mason', {'weight': 6, 'color': 'blue'}),
('Mello', 'Soichiro Yagami', {'weight': 7, 'color': 'red'}),
('Mello', 'Touta Matsuda', {'weight': 6, 'color': 'red'}),
('Mello', 'Shuichi Aizawa', {'weight': 6, 'color': 'red'}),
('Mello', 'Kanzo Mogi', {'weight': 5, 'color': 'red'}),
('Mello', 'Watari', {'weight': 8, 'color': 'blue'}),
('Mello', 'Halle Lidner', {'weight': 6, 'color': 'blue'}),
('Soichiro Yagami', 'Touta Matsuda', {'weight': 6, 'color': 'blue'}),
('Soichiro Yagami', 'Shuichi Aizawa', {'weight': 6, 'color': 'blue'}),
('Soichiro Yagami', 'Kanzo Mogi', {'weight': 6, 'color': 'blue'}),
('Soichiro Yagami', 'Hideki Ide', {'weight': 6, 'color': 'blue'}),
('Soichiro Yagami', 'Hirokazu Ukita', {'weight': 6, 'color': 'blue'}),
('Soichiro Yagami', 'Sayu Yagami', {'weight': 8, 'color': 'blue'}),
('Soichiro Yagami', 'Sachiko Yagami', {'weight': 8, 'color': 'blue'}),
('Touta Matsuda', 'Shuichi Aizawa', {'weight': 6, 'color': 'blue'}),
('Touta Matsuda', 'Kanzo Mogi', {'weight': 6, 'color': 'blue'}),
('Touta Matsuda', 'Hideki Ide', {'weight': 6, 'color': 'blue'}),
('Touta Matsuda', 'Hirokazu Ukita', {'weight': 6, 'color': 'blue'}),
('Shuichi Aizawa', 'Kanzo Mogi', {'weight': 6, 'color': 'blue'}),
('Shuichi Aizawa', 'Hideki Ide', {'weight': 6, 'color': 'blue'}),
('Shuichi Aizawa', 'Hirokazu Ukita', {'weight': 6, 'color': 'blue'}),
('Kanzo Mogi', 'Hideki Ide', {'weight': 6, 'color': 'blue'}),
('Kanzo Mogi', 'Hirokazu Ukita', {'weight': 6, 'color': 'blue'}),
('Hideki Ide', 'Hirokazu Ukita', {'weight': 6, 'color': 'blue'}),
('Watari', 'Kyosuke Higuchi', {'weight': 5, 'color': 'red'}),
('Raye Penber', 'Naomi Misora', {'weight': 8, 'color': 'blue'}),
('Sayu Yagami', 'Sachiko Yagami', {'weight': 8, 'color': 'blue'})
 ])

# Draw Graphs
plt.figure(3,figsize=(11,10)) 
pos = nx.circular_layout(DN)
label_options = {"facecolor": 'white',"alpha": 0.9}
nx.draw(DN, pos,node_size=60,font_size=11, with_labels=True, font_weight='bold', bbox = label_options) 
plt.show()

fig, ax = plt.subplots(figsize=(15, 15))
#pos = nx.spring_layout(BF, k=0.15, seed=4572320)
pos = nx.kamada_kawai_layout(DN)
# pos = nx.circular_layout(BF)

# compute centrality
centrality = nx.betweenness_centrality(DN, k=10, endpoints=True)

# compute community structure
lpc = nx.community.label_propagation_communities(DN)
community_index = {n: i for i, com in enumerate(lpc) for n in com}

node_color = [community_index[n] for n in DN]
node_size = [v * 10000 for v in centrality.values()]
cmap = plt.cm.coolwarm
label_options = {"ec": "k", "fc": "white", "alpha": 0.9}
female = [
'Rem',
'Misa Amane',
'Naomi Misora',
'Halle Lidner',
'Sayu Yagami',
'Sachiko Yagami',
'Wedy'
]

color_map_fm = ['pink' if node in female else 'lightgreen' for node in DN]

edge_widths = [2**e[2]['weight']/64 for e in DN.edges(data=True)] # adjustable
edge_alphas = [e[2]['weight'] for e in DN.edges(data=True)]
edge_colors = [e[2]['color'] for e in DN.edges(data=True)]

nx.draw_networkx(
    DN,
    pos=pos,
    with_labels=True,
    #node_color="indigo",
    node_color=color_map_fm,
    node_size=node_size,
    font_color="black",
    #edge_color=edge_alphas,
    edge_color=edge_colors,
    width=edge_widths,
    edge_cmap=cmap,
    vmin=0,
    vmax=10,
    bbox = label_options
)

# Title/legend
font = {"color": "k", "fontweight": "bold", "fontsize": 15}
# ax.set_title("Death Note Character Network", font)
# Change font color for legend
font["color"] = "black"

# Resize figure for label readibility
# ax.margins(0.1, 0.05)
# fig.tight_layout()
# # Add colorbar
# sm = plt.cm.ScalarMappable(cmap=cmap, norm=plt.Normalize(vmin = 0, vmax=10))
# sm._A = []
# ax = plt.gca()
# ax.set_axis_off()
# plt.colorbar(sm, ax=ax)
plt.axis("off")
plt.show()

# Death Note calculations

# number of cliques / sub-complete graphs
c = list(nx.find_cliques(DN))
print(c)
# s = sum(1 for cliq in c)
sum = 0
s = 0
for cliq in c:
  s += 1
  if 'Light Yagami' in cliq: sum += 1
print(s, sum)

# percentage of female characters
numFem = len(female)
numNodes = DN.number_of_nodes()
print(numFem, numNodes, numFem/numNodes)

#num edges
print(DN.number_of_edges())

# compute betweeness centrality
bw_centrality = nx.betweenness_centrality(DN, k=10, endpoints=True)
# compute degree centrality
deg_centrality = nx.degree_centrality(DN)
# compute closeness centrality
close_centrality = nx.closeness_centrality(DN)
# compute eigenvector centrality
eigen_centrality = nx.eigenvector_centrality

# Select a list of influential nodes in a graph using VoteRank algorithm
vr = nx.voterank(DN)
pr = nx.pagerank(DN)
print(pr)
print(vr)
print(bw_centrality)
print(deg_centrality)

# average negativity
avg_red_weight = 0;
num_red = 0;
for e in DN.edges(data=True):
  if e[2]['color'] == "red": 
    avg_red_weight += e[2]['weight'] 
    num_red += 1;
avg_red_weight /= num_red
print(avg_red_weight)

# percent negative
print(num_red / DN.number_of_edges())